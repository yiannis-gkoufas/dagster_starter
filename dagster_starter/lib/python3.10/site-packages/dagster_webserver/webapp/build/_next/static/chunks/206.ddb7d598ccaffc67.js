"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{41222:function(e,n,t){t.d(n,{K:function(){return AssetPageHeader},w:function(){return AssetGlobalLineageLink}});var r=t(81862),i=t(85333),o=t(2281),s=t(58467),a=t(73235),l=t(22970),c=t(52322),u=t(38058),d=t(17131),p=t(18399),h=t(81308),m=t(43180),x=t(71897),f=t(86412),g=t(2784),j=t(47933),v=t(35505),y=t(19211),S=t(47544);function _templateObject(){var e=(0,a._)(["\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  padding: 3px;\n  margin-top: 2px;\n\n  :focus {\n    outline: none;\n  }\n\n  "," {\n    transition: background-color 100ms linear;\n  }\n\n  :hover "," {\n    background-color: ",";\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,a._)(["\n  & li:not(:first-child)::after {\n    background: none;\n    font-size: 20px;\n    font-weight: bold;\n    color: #5c7080;\n    content: '/';\n    width: 8px;\n    line-height: 16px;\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,a._)(["\n  color: ",";\n\n  :hover,\n  :active {\n    color: ",";\n  }\n"]);return _templateObject2=function(){return e},e}var AssetPageHeader=function(e){var n=e.assetKey,t=(0,o._)(e,["assetKey"]),a=(0,S.m)(),u=n.path.join("/"),j=(0,s._)(g.useState(!1),2),v=j[0],R=j[1],P=g.useRef(),k=g.useCallback((0,r._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return P.current&&clearTimeout(P.current),a(u),R(!0),[4,(0,y.B7)({icon:"done",intent:"primary",message:"Copied asset key!"})];case 1:return e.sent(),P.current=setTimeout(function(){R(!1)},2e3),[2]}})}),[a,u]),w=g.useMemo(function(){var e=[{text:"Assets",href:"/assets"}];return n.path.reduce(function(n,t){var r="".concat(n,"/").concat(encodeURIComponent(t));return e.push({text:t,href:r}),r},"/assets"),e},[n.path]);return(0,c.jsx)(d.m,(0,i._)({title:(0,c.jsxs)(p.x,{flex:{alignItems:"center",gap:4},style:{maxWidth:"600px",overflow:"hidden",marginBottom:4},children:[(0,c.jsx)(_,{items:w,currentBreadcrumbRenderer:function(e){var n=e.text;return(0,c.jsx)(h.X6,{children:n})},breadcrumbRenderer:function(e){var n=e.text,t=e.href;return(0,c.jsx)(h.X6,{children:(0,c.jsx)(O,{to:t||"#",children:n})})}}),(0,c.jsx)(m.u,{placement:"bottom",content:"Copy asset key",children:(0,c.jsx)(b,{onClick:k,children:(0,c.jsx)(x.JO,{name:v?"copy_to_clipboard_done":"copy_to_clipboard",color:f.w.Gray400})})})]})},t))},b=v.ZP.button.withConfig({componentId:"sc-4cd077c4-0"})(_templateObject(),x.a1,x.a1,f.w.Gray800),AssetGlobalLineageLink=function(){return(0,c.jsx)(j.rU,{to:"/asset-groups",children:(0,c.jsxs)(p.x,{flex:{gap:4},children:[(0,c.jsx)(x.JO,{color:f.w.Link,name:"schema"}),"View global asset lineage"]})})},_=(0,v.ZP)(u.Oo).withConfig({componentId:"sc-4cd077c4-1"})(_templateObject1()),O=(0,v.ZP)(j.rU).withConfig({componentId:"sc-4cd077c4-2"})(_templateObject2(),f.w.Gray800,f.w.Gray800)},29211:function(e,n,t){t.d(n,{G:function(){return PipelineRunsRoot}});var r=t(85333),i=t(6692),o=t(58467),s=t(73235),a=t(82550),l=t(52322),c=t(60138),u=t(21221),d=t(28888),p=t(18399),h=t(92364),m=t(57830),x=t(12084),f=t(83302),g=t(71897),j=t(2784),v=t(7267),y=t(91195),S=t(55237),b=t(68028),_=t(46253),O=t(84495),R=t(38917),P=t(49313),k=t(65767),w=t(16148),C=t(90894),A=t(19358),E=t(51969),N=t(44254),T=t(38153),F=t(88286),I=t(14388);function _templateObject(){var e=(0,s._)(["\n  query PipelineRunsRootQuery($limit: Int, $cursor: String, $filter: RunsFilter!) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var D=["status","tag","created_date_before","created_date_after"],PipelineRunsRoot=function(e){(0,b.Px)();var n=(0,v.UO)().pipelinePath,t=e.repoAddress,s=void 0===t?null:t,c=(0,F.p3)(n),g=c.pipelineName,y=c.snapshotId,w=(0,E.Ux)(s),T=(0,E.E8)(w,g);(0,I.b)(c,T);var z=(0,o._)((0,P.oD)(D),2),L=z[0],G=z[1],U=j.useMemo(function(){return[T?{token:"job",value:g}:{token:"pipeline",value:g},y?{token:"snapshotId",value:y}:null].filter(Boolean)},[T,g,y]),V=(0,a._)(L).concat((0,a._)(U));if(s){var J={token:"tag",value:"".concat(O.H.RepositoryLabelTag,"=").concat((0,N.Wg)(s))};V.push(J)}var q=(0,k.l)({query:$,pageSize:25,variables:{filter:(0,i._)((0,r._)({},(0,P.VH)(V)),{pipelineName:g,snapshotId:y})},nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]}}),W=q.queryResult,B=q.paginationProps,M=j.useCallback(function(e){var n=(0,u.HY)(e);L.some(function(e){return(0,u.HY)(e)===n})||G((0,a._)(L).concat([e]))},[L,G]),H=(0,S.C4)(W,S.dT),K=(0,P.Vv)({enabledFilters:D,tokens:L,onChange:G,loading:W.loading}),Q=K.button,Z=K.activeFiltersJsx;return(0,l.jsx)(R.Lw.Provider,{value:{refetch:W.refetch},children:(0,l.jsx)(d.T,{children:(0,l.jsx)(C.g,{queryResult:W,allowStaleData:!0,children:function(e){var t=e.pipelineRunsOrError;if("Runs"!==t.__typename)return(0,l.jsx)(p.x,{padding:{vertical:64},children:(0,l.jsx)(h.t,{icon:"error",title:"Query Error",description:t.message})});var i=t.results.slice(0,25),o=B.hasNextCursor,a=B.hasPrevCursor;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(A.Y,{$top:0,children:(0,l.jsx)(_.AL,{runs:i,onAddTag:M,actionBarComponents:(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between",grow:1,alignItems:"center",gap:4},margin:{right:8},children:[Q,(0,l.jsx)(S.xi,{refreshState:H})]}),belowActionBarComponents:(0,l.jsxs)(l.Fragment,{children:[U.map(function(e){var n=e.token,t=e.value;return(0,l.jsx)(m.V,{children:"".concat(n,":").concat(t)},n)}),Z.length?(0,l.jsxs)(l.Fragment,{children:[Z,(0,l.jsx)(x.Z,{onClick:function(){G([])},children:"Clear all"})]}):null]}),emptyState:function(){return(0,l.jsx)(EmptyState,{repoAddress:s,anyFilter:L.length>0,jobName:g,jobPath:n})}})}),o||a?(0,l.jsx)("div",{style:{marginTop:"20px"},children:(0,l.jsx)(f.pI,(0,r._)({},B))}):null]})}})})})},EmptyState=function(e){var n=e.repoAddress,t=e.anyFilter,r=e.jobName,i=e.jobPath,o=(0,E.Ux)(n),s=(0,E.Hb)(o,r);return(0,l.jsx)(p.x,{padding:{vertical:64},children:(0,l.jsx)(h.t,{icon:"run",title:"No runs found",description:n?s?(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not materialized any assets with this job yet."}),(0,l.jsx)("div",{children:(0,l.jsx)(w.A,{icon:(0,l.jsx)(g.JO,{name:"materialization"}),to:(0,T.$U)(n,"/jobs/".concat(i)),children:"Materialize an asset"})})]}):(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this job yet."}),(0,l.jsx)("div",{children:(0,l.jsx)(w.A,{icon:(0,l.jsx)(g.JO,{name:"add_circle"}),to:(0,T.$U)(n,"/jobs/".concat(i,"/playground")),children:"Launch a run"})})]}):(0,l.jsx)("div",{children:"You have not launched any runs for this job."})})})},$=(0,c.Ps)(_templateObject(),_.ZZ,y.B)},39852:function(e,n,t){t.d(n,{i:function(){return ReloadAllButton}});var r=t(58467),i=t(52322),o=t(43180),s=t(9001),a=t(71897),l=t(10952),c=t(2784),u=t(54949),d=t(56266),p=t(40092),h=t(70958),ReloadAllButton=function(e){var n=e.label,t=void 0===n?"Reload all":n,m=(0,u.WB)(),x=m.permissions.canReloadWorkspace,f=m.disabledReasons,g=(0,p.Dc)({scope:"workspace",reloadFn:p.rL}),j=g.reloading,v=g.tryReload,y=g.error,S=g.errorLocationId,b=(0,r._)(c.useState(!!y),2),_=b[0],O=b[1];return(c.useEffect(function(){return O(!!y)},[y]),x)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.zx,{onClick:v,icon:(0,i.jsx)(a.JO,{name:"refresh"}),loading:j,intent:"none",children:t}),S?(0,i.jsx)(h.V,{error:y,location:S,reloading:j,onTryReload:v,onDismiss:function(){return O(!1)},isOpen:_}):(0,i.jsxs)(l.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:_,children:[(0,i.jsx)(l.a7,{children:y&&(0,i.jsx)(d.T9,{error:y})}),(0,i.jsx)(l.cN,{children:(0,i.jsx)(s.zx,{onClick:function(){return O(!1)},children:"Dismiss"})})]})]}):(0,i.jsx)(o.u,{content:f.canReloadWorkspace,children:(0,i.jsx)(s.zx,{icon:(0,i.jsx)(a.JO,{name:"refresh"}),disabled:!0,intent:"none",children:t})})}},58206:function(e,n,t){t.r(n),t.d(n,{WorkspaceRoot:function(){return WorkspaceRoot},default:function(){return tQ}});var r,i,o=t(52322),s=t(18399),a=t(92364),l=t(82370),c=t(2784),u=t(7267),d=t(73235),p=t(60138),h=t(40794),m=t(28888),x=t(17131),f=t(81308),g=t(56024),j=t(57830),v=t(68028),y=t(42760),S=t(28252),b=t(63386),_=t(88286),O=t(40049),R=t(39852),P=t(38153),k=t(41222),w=t(65885),C=t(87631),A=t(74711);function _templateObject(){var e=(0,d._)(["\n  query AssetGroupMetadataQuery($selector: AssetGroupSelector!) {\n    assetNodes(group: $selector) {\n      id\n      autoMaterializePolicy {\n        policyType\n      }\n    }\n  }\n"]);return _templateObject=function(){return e},e}var AssetGroupRoot=function(e){var n=e.repoAddress,t=e.tab;(0,v.Px)();var r=(0,u.UO)(),i=r.groupName,a=r[0],l=(0,u.k6)();(0,S.j)("Asset Group: ".concat(i));var d=(0,P.$U)(n,"/asset-groups/".concat(i)),p=c.useMemo(function(){return{groupName:i,repositoryLocationName:n.location,repositoryName:n.name}},[i,n]),h=c.useCallback(function(e,n){l[n]("".concat(d,"/").concat((0,_.gY)(e)))},[d,l]),j=c.useCallback(function(e){e.groupName&&e.repoAddress?l.push((0,P.$U)(e.repoAddress,"/asset-groups/".concat(e.groupName,"/lineage/").concat(e.assetKey.path.map(encodeURIComponent).join("/")))):l.push((0,A.p)(e.assetKey,{view:"definition"}))},[l]);return(0,o.jsxs)(m.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,o.jsx)(x.m,{title:(0,o.jsx)(f.X6,{children:i}),right:(0,o.jsx)(R.i,{label:"Reload definitions"}),tags:(0,o.jsx)(AssetGroupTags,{groupSelector:p,repoAddress:n}),tabs:(0,o.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},margin:{right:4},children:[(0,o.jsxs)(g.mQ,{selectedTabId:t,children:[(0,o.jsx)(O.f,{id:"lineage",title:"Lineage",to:"".concat(d,"/lineage")}),(0,o.jsx)(O.f,{id:"list",title:"List",to:"".concat(d,"/list")})]}),(0,o.jsx)(k.w,{})]})}),"lineage"===t?(0,o.jsx)(y.OK,{fetchOptions:{groupSelector:p},options:{preferAssetRendering:!0,explodeComposites:!0},explorerPath:(0,_.p3)(a||"lineage/"),onChangeExplorerPath:h,onNavigateToSourceAssetNode:j}):(0,o.jsx)(w.fv,{groupSelector:p,prefixPath:a.split("/").map(decodeURIComponent).filter(Boolean),setPrefixPath:function(e){return l.push("".concat(d,"/list/").concat(e.map(encodeURIComponent).join("/")))}})]})},E=(0,p.Ps)(_templateObject()),AssetGroupTags=function(e){var n,t=e.repoAddress,r=e.groupSelector,i=(0,h.a)(E,{variables:{selector:r}}).data;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(j.V,{icon:"asset_group",children:["Asset Group in ",(0,o.jsx)(b.b,{repoAddress:t})]}),(null==i?void 0:null===(n=i.assetNodes)||void 0===n?void 0:n.some(function(e){return!!e.autoMaterializePolicy}))&&(0,o.jsx)(C.mM,{})]})},N=t(1222),T=t(58467),F=t(78567),I=t(54949),D=t(91195),$=t(14388),z=t(51969),L=t(37563),G=t(25545);function LaunchpadSetupFromRunRoot_templateObject(){var e=(0,d._)(["\n  query ConfigForRunQuery($runId: ID!) {\n    runOrError(runId: $runId) {\n      ... on Run {\n        id\n        mode\n        runConfigYaml\n        solidSelection\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return LaunchpadSetupFromRunRoot_templateObject=function(){return e},e}var LaunchpadSetupFromRunRoot=function(e){var n=e.repoAddress,t=(0,I.xz)(n.location).permissions.canLaunchPipelineExecution,r=(0,u.UO)(),i=r.repoPath,s=r.pipelinePath,a=r.runId;return t?(0,o.jsx)(LaunchpadSetupFromRunAllowedRoot,{pipelinePath:s,repoAddress:n,runId:a}):(0,o.jsx)(u.l_,{to:"/locations/".concat(i,"/pipeline_or_job/").concat(s)})},LaunchpadSetupFromRunAllowedRoot=function(e){var n=e.pipelinePath,t=e.repoAddress,r=e.runId,i=(0,_.p3)(n),s=i.pipelineName,a=(0,z.Ux)(t),l=(0,z.E8)(a,s);(0,$.b)(i,l);var d=(0,T._)((0,F.aC)(t,s),2),p=d[0],m=d[1],x=(0,h.a)(U,{variables:{runId:r}}),f=x.data,g=x.loading,j=null==f?void 0:f.runOrError,v=(null==j?void 0:j.__typename)==="Run"?j:null;return(c.useEffect(function(){if(v){var e=v.runConfigYaml,n=v.mode,t=v.solidSelection;if(e||n||t){var r={name:"From run ".concat(v.id.slice(0,8))};"string"==typeof e&&(r.runConfigYaml=e),"string"==typeof n&&(r.mode=n),t instanceof Array&&t.length>0?r.solidSelection=t:"string"==typeof t&&t&&(r.solidSelection=[t]),m(function(e){return(0,F.f0)(e,r)})}}},[v,p,m]),g)?(0,o.jsx)(G.m,{}):j&&"RunNotFoundError"!==j.__typename?"PythonError"===j.__typename?(0,o.jsx)(L.U,{icon:"error",title:"Python error",description:j.message}):(0,o.jsx)(u.l_,{to:{pathname:(0,P.$U)(t,"/".concat(l?"jobs":"pipelines","/").concat(s,"/playground"))}}):(0,o.jsx)(L.U,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})},U=(0,p.Ps)(LaunchpadSetupFromRunRoot_templateObject(),D.B),V=t(19126),J=t.n(V),LaunchpadSetupRoot=function(e){var n=e.repoAddress,t=(0,I.xz)(n.location).permissions.canLaunchPipelineExecution,r=(0,u.UO)(),i=r.repoPath,s=r.pipelinePath;return t?(0,o.jsx)(LaunchpadSetupAllowedRoot,{pipelinePath:s,repoAddress:n}):(0,o.jsx)(u.l_,{to:"/locations/".concat(i,"/pipeline_or_job/").concat(s)})},LaunchpadSetupAllowedRoot=function(e){var n=e.pipelinePath,t=e.repoAddress,r=(0,_.p3)(n),i=r.pipelineName,s=(0,z.Ux)(t),a=(0,z.E8)(s,i);(0,$.b)(r,a);var l=(0,T._)((0,F.aC)(t,i),2),d=(l[0],l[1]),p=J().parse(window.location.search,{ignoreQueryPrefix:!0});return c.useEffect(function(){if(p.config||p.mode||p.solidSelection||p.tags||p.assetSelection){var e={};"string"==typeof p.config&&(e.runConfigYaml=p.config),"string"==typeof p.mode&&(e.mode=p.mode),p.solidSelection instanceof Array&&p.solidSelection.length>0?e.solidSelection=p.solidSelection:"string"==typeof p.solidSelection&&p.solidSelection&&(e.solidSelection=[p.solidSelection]),"string"==typeof p.solidSelectionQuery&&(e.solidSelectionQuery=p.solidSelectionQuery),Array.isArray(p.tags)&&(e.tags=p.tags),Array.isArray(p.assetSelection)&&(e.assetSelection=p.assetSelection),d(function(n){return(0,F.f0)(n,e)})}}),(0,o.jsx)(u.l_,{to:{pathname:(0,P.$U)(t,"/".concat(a?"jobs":"pipelines","/").concat(i,"/playground"))}})},q=t(16057),W=t(7575),B=t(12084),M=t(86412),H=t(10952),K=t(9001),Q=t(75652),Z=t.n(Q),X=t(47933),Y=t(35157),ee=t(84495),en=t(38917),et=t(66207),er=t(23054),ei=t(44254),eo=t(43180),es=t(95223),ea=t(55237),el=t(61935),ec=t(21485),eu=t(76487),ed=t(30301);function LatestRunTag_templateObject(){var e=(0,d._)(["\n  query LatestRunTagQuery($runsFilter: RunsFilter) {\n    pipelineRunsOrError(filter: $runsFilter, limit: 1) {\n      ... on PipelineRuns {\n        results {\n          id\n          status\n          ...RunTimeFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return LatestRunTag_templateObject=function(){return e},e}var ep={showSeconds:!0,showTimezone:!1},LatestRunTag=function(e){var n=e.pipelineName,t=e.repoAddress,r=(0,h.a)(eh,{variables:{runsFilter:{pipelineName:n,tags:[{key:ee.H.RepositoryLabelTag,value:(0,ei.Wg)(t)}]}},notifyOnNetworkStatusChange:!0});(0,ea.C4)(r,ea.dT);var i=c.useMemo(function(){var e,n=null===(e=r.data)||void 0===e?void 0:e.pipelineRunsOrError;return n&&"Runs"===n.__typename&&n.results[0]||null},[r]);if(!i)return null;var a={start:i.startTime,end:i.endTime,status:i.status};return(0,o.jsx)(j.V,{intent:function(){switch(i.status){case el.VOA.SUCCESS:return"success";case el.VOA.CANCELED:case el.VOA.CANCELING:case el.VOA.FAILURE:return"danger";default:return"none"}}(),children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,o.jsx)(ec.K9,{status:i.status,size:10}),"Latest run:",a?(0,o.jsx)(eo.u,{placement:"bottom",content:(0,o.jsx)(es.k6,{children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{color:M.w.Gray300},children:(0,o.jsx)(s.x,{padding:{right:16},children:"Started"})}),(0,o.jsx)("td",{children:a.start?(0,o.jsx)(ed.v,{timestamp:a.start,timeFormat:ep}):(0,eu.Z0)(a.status)})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{color:M.w.Gray300},children:"Ended"}),(0,o.jsx)("td",{children:a.end?(0,o.jsx)(ed.v,{timestamp:a.end,timeFormat:ep}):(0,eu.Z0)(a.status)})]})]})}),children:(0,o.jsx)(X.rU,{to:"/runs/".concat(i.id),children:(0,o.jsx)(en.Zr,{run:i})})}):null]})})},eh=(0,p.Ps)(LatestRunTag_templateObject(),en.$X),em=t(12518);function JobMetadata_templateObject(){var e=(0,d._)(["\n  query JobMetadataQuery($params: PipelineSelector!, $runsFilter: RunsFilter!) {\n    pipelineOrError(params: $params) {\n      ... on Pipeline {\n        id\n        ...JobMetadataFragment\n      }\n    }\n    assetNodes(pipeline: $params) {\n      id\n      ...JobMetadataAssetNode\n    }\n    pipelineRunsOrError(filter: $runsFilter, limit: 5) {\n      ... on PipelineRuns {\n        results {\n          id\n          ...RunMetadataFragment\n        }\n      }\n    }\n  }\n\n  fragment JobMetadataAssetNode on AssetNode {\n    id\n    autoMaterializePolicy {\n      policyType\n    }\n    assetKey {\n      path\n    }\n  }\n\n  fragment JobMetadataFragment on Pipeline {\n    id\n    isJob\n    name\n    schedules {\n      id\n      mode\n      ...ScheduleSwitchFragment\n    }\n    sensors {\n      id\n      targets {\n        pipelineName\n        mode\n      }\n      ...SensorSwitchFragment\n    }\n  }\n\n  fragment RunMetadataFragment on PipelineRun {\n    id\n    status\n    assets {\n      id\n      key {\n        path\n      }\n    }\n    ...RunTimeFragment\n  }\n\n  ","\n  ","\n  ","\n"]);return JobMetadata_templateObject=function(){return e},e}var JobMetadata=function(e){var n,t=e.pipelineName,r=e.repoAddress,i=(n=(0,h.a)(ex,{variables:{runsFilter:{pipelineName:t,tags:[{key:ee.H.RepositoryLabelTag,value:(0,ei.Wg)(r)}]},params:{pipelineName:t,repositoryName:r.name,repositoryLocationName:r.location}}}).data,c.useMemo(function(){return{assetNodes:(null==n?void 0:n.assetNodes)||null,job:(null==n?void 0:n.pipelineOrError)&&"Pipeline"===n.pipelineOrError.__typename?n.pipelineOrError:null,runsForAssetScan:(null==n?void 0:n.pipelineRunsOrError)&&"Runs"===n.pipelineRunsOrError.__typename?n.pipelineRunsOrError.results:[]}},[n]));return(0,o.jsxs)(o.Fragment,{children:[i.job?(0,o.jsx)(JobScheduleOrSensorTag,{job:i.job,repoAddress:r}):null,(0,o.jsx)(LatestRunTag,{pipelineName:t,repoAddress:r}),i.assetNodes&&i.assetNodes.some(function(e){return!!e.autoMaterializePolicy})&&(0,o.jsx)(C.mM,{}),i.runsForAssetScan?(0,o.jsx)(RelatedAssetsTag,{relatedAssets:i.assetNodes?i.assetNodes.map(function(e){return(0,Y.Je)(e.assetKey)}):Z()(i.runsForAssetScan.flatMap(function(e){return e.assets.map(function(e){return(0,Y.Je)(e.key)})}))}):null]})},JobScheduleOrSensorTag=function(e){var n=e.job,t=e.repoAddress,r=c.useMemo(function(){return(null==n?void 0:n.__typename)==="Pipeline"&&n.schedules.length?n.schedules:[]},[n]),i=c.useMemo(function(){return(null==n?void 0:n.__typename)==="Pipeline"&&n.sensors.length?n.sensors:[]},[n]);return(0,o.jsx)(em.I,{schedules:r,sensors:i,repoAddress:t})},RelatedAssetsTag=function(e){var n=e.relatedAssets,t=(0,T._)(c.useState(!1),2),r=t[0],i=t[1];if(0===n.length)return null;if(1===n.length){var a=n[0];return(0,o.jsxs)(j.V,{icon:"asset",children:["Asset: ",(0,o.jsx)(X.rU,{to:"/assets/".concat(a),children:a})]})}return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.V,{icon:"asset",children:(0,o.jsx)(B.Z,{color:M.w.Link,onClick:function(){return i(!0)},children:"View ".concat(n.length," assets")})}),(0,o.jsxs)(H.Vq,{title:"Related assets",canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:r,onClose:function(){return i(!1)},style:{maxWidth:"80%",minWidth:"500px",width:"auto"},children:[n.map(function(e,t){return(0,o.jsx)(s.x,{padding:{vertical:12,horizontal:20},border:t<n.length-1?"bottom":null,children:(0,o.jsx)(X.rU,{to:"/assets/".concat(e),style:{wordBreak:"break-word"},children:e},e)},e)}),(0,o.jsx)(H.cN,{topBorder:!0,children:(0,o.jsx)(K.zx,{intent:"primary",onClick:function(){return i(!1)},children:"OK"})})]})]})},ex=(0,p.Ps)(JobMetadata_templateObject(),et.J,er.U,en.$X),PipelineNav=function(e){var n=e.repoAddress,t=(0,I.xz)(n.location),r=c.useContext(q.v).tabBuilder,i=(0,u.$B)(["/locations/:repoPath/pipelines/:selector/:tab?","/locations/:repoPath/jobs/:selector/:tab?","/locations/:repoPath/pipeline_or_job/:selector/:tab?"]),a=(0,_.p3)(i.params.selector),l=a.pipelineName,d=a.snapshotId,p=(0,z.Ux)(n),h=null==p?void 0:p.repository.pipelines.find(function(e){return e.name===l}),m=!!(null==h?void 0:h.isJob),g=r({hasLaunchpad:!(null==h?void 0:h.isAssetJob),hasPartitionSet:((null==p?void 0:p.repository.partitionSets)||[]).some(function(e){return e.pipelineName===l})});return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(x.m,{title:(0,o.jsx)(f.X6,{children:l}),tags:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:8,wrap:"wrap"},children:[(0,o.jsxs)(j.V,{icon:"job",children:[m?"Job in ":"Pipeline in ",(0,o.jsx)(b.b,{repoAddress:n})]}),d?null:(0,o.jsx)(JobMetadata,{pipelineName:l,repoAddress:n})]}),tabs:(0,o.jsx)(W.IJ,{repoAddress:n,isJob:m,explorerPath:a,permissions:t,matchingTab:i.params.tab,tabs:g})})})};function usePartitionNameForPipeline_templateObject(){var e=(0,d._)(["\n  query AssetJobPartitionSetsQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n          mode\n          solidSelection\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return usePartitionNameForPipeline_templateObject=function(){return e},e}var ef=(0,p.Ps)(usePartitionNameForPipeline_templateObject(),D.B),eg=t(90894),ej=t(85333),ev=t(6692),ey=t(21106),eS=t(24601),eb=t(7872),e_=t(53521),eO=t(311),eR=t(54877),eP=t(56121),ek=t(82550),ew=t(83302),eC=t(94611);function JobBackfillsTable_templateObject(){var e=(0,d._)(["\n  query JobBackfillsQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n    $cursor: String\n    $limit: Int\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        pipelineName\n        backfills(cursor: $cursor, limit: $limit) {\n          id\n          ...BackfillTableFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return JobBackfillsTable_templateObject=function(){return e},e}var JobBackfillsTable=function(e){var n=e.partitionSetName,t=e.partitionNames,r=e.repositorySelector,i=e.refetchCounter,l=(0,T._)(c.useState(function(){return[]}),2),u=l[0],d=l[1],p=(0,T._)(c.useState(),2),m=p[0],x=p[1],f=(0,h.a)(eA,{variables:{partitionSetName:n,repositorySelector:r,cursor:m,limit:10}}),g=f.refetch;return c.useEffect(function(){i&&g()},[g,i]),(0,o.jsx)(eg.g,{queryResult:f,children:function(e){var n=e.partitionSetOrError;if("PartitionSetNotFoundError"===n.__typename)return(0,o.jsx)(s.x,{margin:{vertical:20},children:(0,o.jsx)(a.t,{title:"Partition set not found.",icon:"no-results"})});if("PythonError"===n.__typename)return(0,o.jsx)(s.x,{margin:{vertical:20},children:(0,o.jsx)(a.t,{title:"An error occurred.",icon:"no-results"})});var r=n.backfills,i=n.pipelineName;if(!r.length)return(0,o.jsx)(s.x,{margin:{vertical:20},children:(0,o.jsx)(a.t,{title:"No backfills for ".concat(i),icon:"no-results"})});var l={hasPrevCursor:!!m,hasNextCursor:r&&10===r.length,popCursor:function(){var e=(0,ek._)(u);x(e.pop()),d(e)},advanceCursor:function(){m&&d(function(e){return(0,ek._)(e).concat([m])});var e=r&&r[r.length-1].id;e&&x(e)},reset:function(){d([]),x(void 0)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eC.G,{backfills:r,refetch:g,showBackfillTarget:!1,allPartitions:t}),(0,o.jsx)(ew.b$,(0,ej._)({},l))]})}})},eA=(0,p.Ps)(JobBackfillsTable_templateObject(),eC.b),eE=t(63832),eN=t(71897),eT=t(56266),eF=t(81862),eI=t(22970),eD=t(33379),e$=t(82585),ez=t(82329),eL=t(84692),eG=t(18190),eU=t(56101),eV=t(14877),eJ=t(18970),eq=t(42982),eW=t(15848),eB=t(20093),eM=t(62311),eH=t(3979),eK=t(87612),eQ=t(87424),eZ=t(68052),PartitionRunStatusCheckboxes=function(e){var n=e.counts,t=e.value,r=e.onChange,i=e.allowed,a=e.disabled;return(0,o.jsx)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:i.map(function(e){return(0,o.jsx)(e$.X,{"data-testid":(0,eZ.N)("run-status-".concat(e,"-checkbox")),disabled:a,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:t.includes(e)&&!a,label:"".concat((0,eQ.fi)(e)," (").concat(n[e],")"),onChange:function(){return r(t.includes(e)?t.filter(function(n){return n!==e}):(0,ek._)(t).concat([e]))}},e)})})};function BackfillSelector_templateObject(){var e=(0,d._)(["\n  query BackfillSelectorQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n    }\n    instance {\n      id\n      ...UsingDefaultLauncherAlertInstanceFragment\n      ...DaemonNotRunningAlertInstanceFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return BackfillSelector_templateObject=function(){return e},e}var BackfillPartitionSelector=function(e){var n=e.partitionSetName,t=e.onLaunch,r=e.onCancel,i=e.onSubmit,l=e.repoAddress,d=e.runStatusData,p=e.pipelineName,m=e.partitionNames,x=(0,u.k6)(),f=(0,T._)(c.useState(Object.keys(d).filter(function(e){return!d[e]||d[e]===el.VOA.FAILURE})),2),g=f[0],j=f[1],v=(0,T._)(c.useState([el.VOA.NOT_STARTED,el.VOA.FAILURE]),2),y=v[0],S=v[1],b=c.useMemo(function(){return g.filter(function(e){return y.includes(d[e])})},[g,y,d]),_=(0,T._)(c.useState(!1),2),O=_[0],R=_[1],P=(0,T._)(c.useState([]),2),k=P[0],w=P[1],C=(0,T._)(c.useState(""),2),A=C[0],E=C[1],N=(0,T._)(c.useState({reexecute:!1,fromFailure:!1}),2),F=N[0],I=N[1],D=(0,eP.$)(l),$=(0,h.a)(eX,{variables:{pipelineSelector:(0,ev._)((0,ej._)({},D),{pipelineName:p})},fetchPolicy:"network-only"}).data,z=c.useRef(!0);if(c.useEffect(function(){return z.current=!0,function(){z.current=!1}},[t]),!$)return(0,o.jsx)(s.x,{margin:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(eE.$,{purpose:"section"})});if("PipelineSnapshot"!==$.pipelineSnapshotOrError.__typename)return(0,o.jsx)(s.x,{margin:20,children:(0,o.jsx)(a.t,{icon:"error",title:"Could not fetch job details"})});var L=$.pipelineSnapshotOrError,G=$.instance,U=(0,eq.i)(L.solidHandles).map(function(e){return e.solid}),V=(0,ez.V)(U,A),J=(0,eG.tc)({nodes:V.all,mode:eL.hS.FLAT}).boxes.map(function(e){return{x:e.x,name:e.node.name}}),isFailed=function(e){return d[e]===el.VOA.FAILURE},q=m.filter(isFailed),W=function(e){var n=(o={},(0,eK._)(o,el.VOA.SUCCESS,0),(0,eK._)(o,el.VOA.NOT_STARTED,0),(0,eK._)(o,el.VOA.FAILURE,0),(0,eK._)(o,el.VOA.QUEUED,0),(0,eK._)(o,el.VOA.STARTED,0),o),t=!0,r=!1,i=void 0;try{for(var o,s,a=e[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var l=s.value;n[l.state]=(n[l.state]||0)+1}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(g.map(function(e){return{partitionKey:e,state:d[e]}}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(H.a7,{children:(0,o.jsxs)(s.x,{flex:{direction:"column",gap:24},children:[(0,o.jsxs)(Section,{title:"Partitions",children:[(0,o.jsx)(s.x,{children:"Select partitions to materialize. Click and drag to select a range on the timeline."}),(0,o.jsx)(eH.x,{selected:g,setSelected:function(e){var n=new Set(e);j(m.filter(function(e){return n.has(e)})),F.fromFailure&&e.filter(function(e){return!isFailed(e)}).length>0&&I((0,ev._)((0,ej._)({},F),{fromFailure:!1}))},health:{runStatusForPartitionKey:function(e){return d[e]}},partitionKeys:m,dimensionType:(0,eO.vH)(m[0])?el.iVC.TIME_WINDOW:el.iVC.STATIC}),(0,o.jsx)(PartitionRunStatusCheckboxes,{value:y,onChange:S,counts:W,allowed:F.fromFailure?[el.VOA.FAILURE]:[el.VOA.NOT_STARTED,el.VOA.FAILURE,el.VOA.QUEUED,el.VOA.STARTED,el.VOA.SUCCESS]})]}),q.length?(0,o.jsx)(Section,{title:"Reexecution",children:(0,o.jsx)(e$.X,{checked:F.fromFailure,disabled:!b.every(isFailed),onChange:function(){var e=(0,ev._)((0,ej._)({},F),{fromFailure:!F.fromFailure,reexecute:!F.reexecute});e.fromFailure&&S([el.VOA.FAILURE]),E(""),I(e)},label:(0,o.jsxs)(s.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,o.jsx)(s.x,{margin:{right:4},children:"Re-execute from failures"}),(0,o.jsx)(eo.u,{placement:"top",content:"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed. Only applies for selections of failed partitions.",children:(0,o.jsx)(eN.JO,{name:"info",color:M.w.Gray500})})]})})}):null,(0,o.jsx)(Section,{title:(0,o.jsxs)(s.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,o.jsx)(s.x,{margin:{right:4},children:"Step subset"}),(0,o.jsx)(eo.u,{placement:"top",content:"Applies a step-selection to each run for the requested partitions.",children:(0,o.jsx)(eN.JO,{name:"info",color:M.w.Gray500})})]}),children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,o.jsx)(eB.j,{disabled:F.fromFailure,width:520,items:U,value:A,placeholder:"Type a step subset",onChange:E,autoApplyChanges:!0}),A?(0,o.jsxs)("div",{style:{color:M.w.Gray500},children:[J.length," step",1===J.length?"":"s"," selected"]}):null]})}),(0,o.jsxs)(Section,{title:"Tags",children:[(0,o.jsx)(eJ.U,{tagsFromSession:k,onChange:w,open:O,onRequestClose:function(){return R(!1)}}),k.length?(0,o.jsx)("div",{style:{border:"1px solid ".concat(M.w.Gray300),borderRadius:8,padding:3},children:(0,o.jsx)(eJ.x,{tagsFromSession:k,onRequestEdit:function(){return R(!0)}})}):(0,o.jsx)("div",{children:(0,o.jsx)(K.zx,{onClick:function(){return R(!0)},children:"Add tags to backfill runs"})})]}),(0,o.jsxs)(s.x,{flex:{direction:"column",gap:16},children:[(0,o.jsx)(eM.So,{instance:G}),(0,o.jsx)(eM.d,{instance:G})]})]})}),(0,o.jsxs)(H.cN,{children:[(0,o.jsx)(K.zx,{intent:"none",onClick:r,children:"Cancel"}),(0,o.jsx)(LaunchBackfillButton,{partitionNames:b,partitionSetName:n,reexecutionSteps:!F.fromFailure&&V.all.length<U.length?J.map(function(e){return e.name}):void 0,fromFailure:F.fromFailure,tags:k,onSubmit:i,onSuccess:function(e){(0,eM.Xd)(x,e,!1),null==t||t(e,A)},onError:function(e){(0,eM.mv)(e)},repoAddress:l})]})]})},LaunchBackfillButton=function(e){var n,t=e.partitionSetName,r=e.partitionNames,i=e.reexecutionSteps,s=e.fromFailure,a=e.tags,l=e.onSuccess,u=e.onError,d=e.onSubmit,p=e.repoAddress,h=(0,eP.$)(p),m=c.useRef(!0),x=(0,T._)((0,eD.D)(eU.f),2),f=x[0],g=x[1].loading;c.useEffect(function(){return m.current=!0,function(){m.current=!1}},[l]);var j=(n=(0,eF._)(function(){var e;return(0,eI.Jh)(this,function(n){switch(n.label){case 0:return d(),[4,f({variables:{backfillParams:{selector:{partitionSetName:t,repositorySelector:h},partitionNames:r,reexecutionSteps:i,fromFailure:s,tags:a}}})];case 1:if(e=n.sent().data,!m.current)return[2];return e&&"LaunchBackfillSuccess"===e.launchPartitionBackfill.__typename?null==l||l(e.launchPartitionBackfill.backfillId,!1):null==u||u(e),[2]}})}),function(){return n.apply(this,arguments)}),v=r.length,y=null==i?void 0:i.length,S=[g?"Submitting ".concat(v," ").concat(1===v?"run":"runs","…"):v?"Submit ".concat(v," ").concat(1===v?"run":"runs"):"Select partitions to submit",!g&&y?"(".concat(y," selected ").concat(1===y?"step":"steps",")"):""].join(" ");return(0,o.jsx)(eV.C,{runCount:v,config:{title:S,icon:"open_in_new",disabled:!v||g,onClick:j}})},eX=(0,p.Ps)(BackfillSelector_templateObject(),eW.Q,eM.op,eM.EC),Section=function(e){var n=e.title,t=e.children;return(0,o.jsxs)(s.x,{flex:{direction:"column",gap:4},children:[(0,o.jsx)(f.pm,{children:n}),(0,o.jsx)(s.x,{flex:{direction:"column",gap:8},padding:{top:16},border:"top",children:t})]})},eY=t(343),e0=t(35505),e1=t(20059);function PartitionGraph_templateObject(){var e=(0,d._)(["\n  display: flex;\n  color: ",";\n  padding: 24px 12px;\n  text-decoration: none;\n"]);return PartitionGraph_templateObject=function(){return e},e}var PartitionGraph=function(e){var n,t,r=e.partitionNames,i=e.jobDataByPartition,s=e.stepDataByPartition,a=e.title,l=e.yLabel,u=e.isJob,d=e.hiddenStepKeys,p=(0,T._)(c.useState(function(){return{}}),2),h=p[0],m=p[1],x=c.useRef(null),f=c.useCallback(function(e){var n=x.current;if(n){var t=n.scales["x-axis-0"];if(t){var r=e.offsetX,i=e.offsetY;if("click"===e.type&&r<=n.chartArea.right&&r>=n.chartArea.left&&i<=n.chartArea.bottom&&i>=n.chartArea.top&&e.shiftKey){var o=t.getValueForPixel(r),s=n.data.labels[o];m(function(e){return(0,ev._)((0,ej._)({},e),(0,eK._)({},s,!e[s]))})}}}},[]),g=c.useMemo(function(){return{title:a?{display:!0,text:a}:void 0,animation:!1,scales:l?{y:{id:"y",title:{display:!0,text:l}},x:{id:"x",title:{display:!0,text:a}}}:void 0,plugins:{legend:{display:!1,onClick:function(e,n){}}},onClick:f,maintainAspectRatio:!1}},[f,a,l]),j=(n=[],t={},r.forEach(function(e){var r=!!h[e];i&&n.push({x:e,y:r?void 0:i[e]}),s&&Object.entries(s[e]||{}).forEach(function(n){var i=(0,T._)(n,2),o=i[0],s=i[1];(null==d||!d.includes(o))&&s&&(t[o]=(0,ek._)(t[o]||[]).concat([{x:e,y:r?void 0:s}]))})}),Object.keys(t).forEach(function(e){t[e]=_fillPartitions(r,t[e])}),{jobData:n,stepData:t}),v=j.jobData,y=j.stepData,S=u?"Total job":"Total pipeline",b={labels:r,datasets:(0,ek._)(!i||d&&d.includes(S)?[]:[{label:S,data:v,borderColor:M.w.Gray500,backgroundColor:"rgba(0,0,0,0)"}]).concat((0,ek._)(Object.keys(y).map(function(e){return{label:e,data:y[e],borderColor:(0,e1.kU)(e),backgroundColor:"rgba(0,0,0,0)"}})))};return(0,o.jsx)(e2,{children:(0,o.jsx)(eY.x1,{data:function(){return b},height:300,options:g,ref:x})})},_fillPartitions=function(e,n){var t={};return n.forEach(function(e){t[e.x]=e.y}),e.map(function(e){return{x:e,y:t[e]}})},e2=e0.ZP.div.withConfig({componentId:"sc-ed33bdef-0"})(PartitionGraph_templateObject(),M.w.Gray700),e4=t(52246),e8=t(79321),e6=t(6749),e3=t(6871);function OpJobPartitionsView_templateObject(){var e=(0,d._)(["\n  query PartitionsStatusQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        ...OpJobPartitionSet\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionSet on PartitionSet {\n    id\n    name\n    pipelineName\n    partitionsOrError {\n      ... on Partitions {\n        results {\n          name\n        }\n      }\n      ...PythonErrorFragment\n    }\n    partitionStatusesOrError {\n      ... on PartitionStatuses {\n        results {\n          id\n          ...OpJobPartitionStatus\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionStatus on PartitionStatus {\n    id\n    partitionName\n    runStatus\n    runDuration\n  }\n\n  ","\n"]);return OpJobPartitionsView_templateObject=function(){return e},e}var OpJobPartitionsView=function(e){var n=e.partitionSetName,t=e.repoAddress,r=(0,eP.$)(t),i=(0,h.a)(e5,{variables:{partitionSetName:n,repositorySelector:r}}),l=i.data,c=i.loading;if(!l)return c?(0,o.jsx)(s.x,{padding:32,flex:{direction:"column",alignItems:"center"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,o.jsx)(eE.$,{purpose:"body-text"}),(0,o.jsx)("div",{children:"Loading partitions…"})]})}):(0,o.jsx)(s.x,{padding:32,children:(0,o.jsx)(a.t,{icon:"error",title:"An error occurred",description:"An unexpected error occurred."})});var u=l.partitionSetOrError;if("PartitionSetNotFoundError"===u.__typename)return(0,o.jsx)(s.x,{padding:32,children:(0,o.jsx)(a.t,{icon:"search",title:"Partition set not found",description:u.message})});if("PythonError"===u.__typename)return(0,o.jsx)(s.x,{padding:32,children:(0,o.jsx)(eT.T9,{error:u})});if("PythonError"===u.partitionsOrError.__typename)return(0,o.jsx)(s.x,{padding:32,children:(0,o.jsx)(eT.T9,{error:u.partitionsOrError})});var d=u.partitionsOrError.results.map(function(e){return e.name});return(0,o.jsx)(OpJobPartitionsViewContent,{partitionNames:d,partitionSet:u,repoAddress:t})};function usePartitionDurations(e){return c.useMemo(function(){var n={},t={};return e.forEach(function(e){if(e.runsLoaded&&0!==e.runs.length){var r=e.runs.sort(function(e,n){return e.startTime||0-(n.startTime||0)}),i=r[r.length-1];n[e.name]={},t[e.name]=(null==i?void 0:i.endTime)&&(null==i?void 0:i.startTime)?i.endTime-i.startTime:void 0,i.stepStats.forEach(function(t){n[e.name][t.stepKey]=[t.endTime&&t.startTime?t.endTime-t.startTime:void 0]})}}),{runDurationData:t,stepDurationData:n}},[e])}var OpJobPartitionsViewContent=function(e){var n=e.partitionSet,t=e.partitionNames,r=e.repoAddress,i=(0,I.xz)(r.location),a=i.permissions.canLaunchPartitionBackfill,l=i.disabledReasons,u=(0,ey.S)(),d=u.viewport,p=u.containerProps,h=(0,T._)(c.useState(60),2),m=h[0],x=h[1],g=(0,T._)(c.useState(0),2),j=g[0],v=g[1],y=(0,T._)(c.useState(!1),2),S=y[0],b=y[1],_=(0,T._)(c.useState(!1),2),O=_[0],R=_[1],P=(0,T._)(c.useState(!1),2),k=P[0],w=P[1],C=(0,eP.$)(r),A=(0,T._)(c.useState(0),2),E=A[0],N=A[1],F=(0,e3.T)({partitionSetName:n.name,partitionTagName:ee.H.Partition,partitionNames:t,pageSize:m,runsFilter:[],repositorySelector:C,jobName:n.pipelineName,offset:j,skipQuery:!S});c.useEffect(function(){d.width&&!S&&x((0,e8.Rc)(d.width-e6.AQ))},[d.width,S,x]);var D=S?t.slice(Math.max(0,t.length-1-j-m),t.length-j):t,$=usePartitionDurations(F).stepDurationData,z=c.useCallback(function(){return w(!0)},[]),L=n.partitionStatusesOrError,G=c.useMemo(function(){return"PartitionStatuses"===L.__typename?L.results:[]},[L]),U=c.useMemo(function(){var e={},n={};return G.forEach(function(t){e[t.partitionName]=t.runStatus||el.VOA.NOT_STARTED,D.includes(t.partitionName)&&(n[t.partitionName]=t.runDuration||void 0)}),{runStatusData:e,runDurationData:n}},[G,D]),V=U.runStatusData,J=U.runDurationData,q=c.useMemo(function(){return{runStatusForPartitionKey:function(e){return V[e]}}},[V]);return(0,o.jsxs)("div",{children:[(0,o.jsx)(H.Vq,{canEscapeKeyClose:!k,canOutsideClickClose:!k,onClose:function(){return R(!1)},style:{width:800,zIndex:1e3},title:"Launch ".concat(n.pipelineName," backfill"),isOpen:O,children:O&&(0,o.jsx)(BackfillPartitionSelector,{partitionSetName:n.name,partitionNames:t,runStatusData:V,pipelineName:n.pipelineName,onCancel:function(){return R(!1)},onLaunch:function(e,n){N(E+1),R(!1)},onSubmit:z,repoAddress:r})}),(0,o.jsxs)(s.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,o.jsx)(f.pm,{children:"Status"}),(0,o.jsxs)(s.x,{flex:{gap:8},children:[(0,o.jsx)(K.zx,{onClick:function(){return b(!S)},active:O,children:S?"Hide per-step status":"Show per-step status"}),a?(0,o.jsx)(K.zx,{onClick:function(){return R(!O)},icon:(0,o.jsx)(eN.JO,{name:"add_circle"}),active:O,children:"Launch backfill…"}):(0,o.jsx)(eo.u,{content:l.canLaunchPartitionBackfill,children:(0,o.jsx)(K.zx,{icon:(0,o.jsx)(eN.JO,{name:"add_circle"}),disabled:!0,children:"Launch backfill…"})})]})]}),(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,o.jsx)(CountBox,{count:t.length,label:"Total partitions"}),(0,o.jsx)(CountBox,{count:t.filter(function(e){return V[e]===el.VOA.FAILURE}).length,label:"Failed partitions"}),(0,o.jsx)(CountBox,{count:t.filter(function(e){return!V[e]||V[e]===el.VOA.NOT_STARTED}).length,label:"Missing partitions"})]}),(0,o.jsxs)(s.x,{padding:{vertical:16,horizontal:24},children:[(0,o.jsx)("div",(0,ev._)((0,ej._)({},p),{children:(0,o.jsx)(e4.b,{partitionNames:t,health:q,selected:S?D:void 0,selectionWindowSize:m,onClick:function(e){var n=t.length-1;v(Math.min(n,Math.max(0,n-t.indexOf(e)-.5*m))),S||b(!0)},tooltipMessage:"Click to view per-step status"})})),S?(0,o.jsx)(s.x,{margin:{top:16},children:(0,o.jsx)(e8.ux,{partitionNames:t,partitions:F,pipelineName:n.pipelineName,repoAddress:r,setPageSize:x,offset:j,setOffset:v})}):null]}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,o.jsx)(f.pm,{children:"Run duration"})}),(0,o.jsx)(s.x,{margin:24,children:(0,o.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:S?D:t,jobDataByPartition:J})}),S?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,o.jsx)(f.pm,{children:"Step duration"})}),(0,o.jsx)(s.x,{margin:24,children:(0,o.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:D,stepDataByPartition:$})})]}):null,(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,o.jsx)(f.pm,{children:"Backfill history"})}),(0,o.jsx)(s.x,{margin:{bottom:20},children:(0,o.jsx)(JobBackfillsTable,{partitionSetName:n.name,repositorySelector:C,partitionNames:t,refetchCounter:E})})]})},CountBox=function(e){var n=e.count,t=e.label;return(0,o.jsxs)(s.x,{padding:16,style:{flex:1},border:"right",children:[(0,o.jsx)("div",{style:{fontSize:18,marginBottom:4},children:(0,o.jsx)("strong",{children:n})}),(0,o.jsx)("div",{children:t})]})},e5=(0,p.Ps)(OpJobPartitionsView_templateObject(),D.B),e7=t(49577),AssetJobPartitionsView=function(e){var n=e.partitionSetName,t=e.repoAddress,r=e.pipelineName,i=(0,ey.S)(),a=i.viewport,l=i.containerProps,u=(0,eP.$)(t),d=(0,eS.uc)("*",{pipelineSelector:{pipelineName:r,repositoryName:t.name,repositoryLocationName:t.location}}),p=(0,eR.mR)(d.graphAssetKeys),h=c.useMemo(function(){var e=(0,eO.$G)(p.filter(function(e){return e.dimensions.length>0})),n=e.dimensions.map(function(e){return{selectedKeys:e.partitionKeys,selectedRanges:[(0,e7.$0)(e)],dimension:e}}),t=(0,eO.ju)(n,function(n){return e.stateForKeyIdx(n).includes(eb.yo.MISSING)});return{merged:e,total:(0,eR.xD)(n),missing:t.length}},[p]),m=h.total,x=h.missing,g=h.merged,j=(0,T._)(c.useState(60),2),v=j[0],y=j[1],S=(0,T._)(c.useState(0),2),b=S[0],_=S[1],O=(0,T._)(c.useState(!1),2),R=O[0],P=O[1];c.useEffect(function(){a.width&&y((0,e8.Rc)(a.width-e6.AQ))},[a.width,y]);var k=g.dimensions.findIndex(eO.nv);-1===k&&(k=0);var w=g.dimensions[k]?g.dimensions[k]:null,C=(null==w?void 0:w.partitionKeys)||[],A=C.slice(Math.max(0,C.length-1-b-v),C.length-b);return(0,o.jsxs)("div",{children:[(0,o.jsxs)(s.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,o.jsx)(f.pm,{children:"Status"}),(0,o.jsxs)(s.x,{flex:{gap:8},children:[(0,o.jsx)(K.zx,{onClick:function(){return P(!R)},children:R?"Hide per-asset status":"Show per-asset status"}),(0,o.jsx)(e_.XE,{scope:{all:d.graphQueryItems.map(function(e){return e.node}),skipAllTerm:!0},preferredJobName:r})]})]}),(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,o.jsx)(CountBox,{count:m,label:"Total partitions"}),(0,o.jsx)(CountBox,{count:x,label:"Missing partitions"})]}),(0,o.jsxs)(s.x,{padding:{vertical:16,horizontal:24},children:[(0,o.jsx)("div",(0,ev._)((0,ej._)({},l),{children:(0,o.jsx)(e4.b,{partitionNames:C,splitPartitions:!!w&&!(0,eO.nv)(w),health:{ranges:g.rangesForSingleDimension(k)},selected:A,selectionWindowSize:v,tooltipMessage:"Click to view per-asset status",onClick:function(e){var n=C.length-1;_(Math.min(n,Math.max(0,n-C.indexOf(e)-.5*v)))}})})),R&&w&&(0,o.jsx)(s.x,{margin:{top:16},children:(0,o.jsx)(e8.ac,{rangeDimensionIdx:k,rangeDimension:w,assetHealth:p,assetQueryItems:d.graphQueryItems,pipelineName:r,setPageSize:y,offset:b,setOffset:_})})]}),R&&(0,o.jsx)(AssetJobPartitionGraphs,{repositorySelector:u,pipelineName:r,partitionSetName:n,multidimensional:((null==g?void 0:g.dimensions.length)||0)>1,dimensionName:w?w.name:null,dimensionKeys:C,selected:A,offset:b,pageSize:v}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,o.jsx)(f.pm,{children:"Backfill history"})}),(0,o.jsx)(s.x,{margin:{bottom:20},children:(0,o.jsx)(JobBackfillsTable,{partitionSetName:n,repositorySelector:u,partitionNames:C,refetchCounter:1})})]})},AssetJobPartitionGraphs=function(e){var n=e.repositorySelector,t=e.dimensionKeys,r=e.dimensionName,i=e.selected,a=e.pageSize,l=e.partitionSetName,c=e.multidimensional,u=e.pipelineName,d=e.offset,p=usePartitionDurations((0,e3.T)({partitionSetName:l,partitionTagName:c?"".concat(ee.H.Partition,"/").concat(r):ee.H.Partition,partitionNames:t,repositorySelector:n,pageSize:a,runsFilter:[],jobName:u,offset:d,skipQuery:!r})),h=p.stepDurationData,m=p.runDurationData;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,o.jsx)(f.pm,{children:"Run duration"})}),(0,o.jsx)(s.x,{margin:24,children:(0,o.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:i,jobDataByPartition:m})}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,o.jsx)(f.pm,{children:"Step durations"})}),(0,o.jsx)(s.x,{margin:24,children:(0,o.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:i,stepDataByPartition:h})})]})},PipelinePartitionsRoot=function(e){var n,t=e.repoAddress,r=(0,u.UO)(),i=r.pipelinePath,l=(0,_.p3)(i),d=l.pipelineName,p=(0,z.Ux)(t),m=null==p?void 0:p.repository.pipelines.find(function(e){return e.name===d}),x=!!(null==m?void 0:m.isJob),f=!!(null==m?void 0:m.isAssetJob);(0,$.b)(l,x),(0,_.Bj)(r);var g=(n=(0,h.a)(ef,{skip:!d,variables:{repositoryLocationName:t.location,repositoryName:t.name,pipelineName:d}}).data,c.useMemo(function(){return{partitionSet:(null==n?void 0:n.partitionSetsOrError.__typename)==="PartitionSets"?n.partitionSetsOrError.results[0]:void 0,partitionSetError:(null==n?void 0:n.partitionSetsOrError.__typename)==="PipelineNotFoundError"||(null==n?void 0:n.partitionSetsOrError.__typename)==="PythonError"?n.partitionSetsOrError:void 0}},[n])),j=g.partitionSet,v=g.partitionSetError;return j||v?v?(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"error",title:"Partitions",description:v.message})}):j?f?(0,o.jsx)(AssetJobPartitionsView,{pipelineName:d,partitionSetName:j.name,repoAddress:t}):(0,o.jsx)(OpJobPartitionsView,{partitionSetName:j.name,repoAddress:t}):(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"error",title:"Partitions",description:(0,o.jsxs)("div",{children:["There are no partition sets defined for ",x?"job":"pipeline"," ",(0,o.jsx)("code",{children:d}),"."]})})}):(0,o.jsx)(eg.T,{purpose:"page"})},PipelineOrJobDisambiguationRoot=function(e){var n=e.repoAddress,t=(0,u.TH)(),r=(0,u.UO)().pipelinePath,i=(0,_.p3)(r).pipelineName,s=(0,z.Ux)(n),a=(0,z.E8)(s,i),l=t.pathname,c=t.search,d=l.replace("/pipeline_or_job/",a?"/jobs/":"/pipelines/");return(0,o.jsx)(u.l_,{to:"".concat(d).concat(c)})},e9=t(29211),PipelineRoot=function(e){var n=e.repoAddress,t=c.useContext(q.v).FallthroughRoute;return(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,o.jsx)(PipelineNav,{repoAddress:n}),(0,o.jsxs)(u.rs,{children:[(0,o.jsx)(u.AW,{path:"/locations/:repoPath/pipeline_or_job/:pipelinePath(/?.*)",children:(0,o.jsx)(PipelineOrJobDisambiguationRoot,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup","/locations/:repoPath/jobs/:pipelinePath/playground/setup"],children:(0,o.jsx)(LaunchpadSetupRoot,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup-from-run/:runId","/locations/:repoPath/jobs/:pipelinePath/playground/setup-from-run/:runId"],children:(0,o.jsx)(LaunchpadSetupFromRunRoot,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground","/locations/:repoPath/jobs/:pipelinePath/playground"],children:(0,o.jsx)(N.H,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs/:runId","/locations/:repoPath/jobs/:pipelinePath/runs/:runId"],render:function(e){return(0,o.jsx)(u.l_,{to:"/runs/".concat(e.match.params.runId)})}}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs","/locations/:repoPath/jobs/:pipelinePath/runs"],children:(0,o.jsx)(e9.G,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/partitions","/locations/:repoPath/jobs/:pipelinePath/partitions"],children:(0,o.jsx)(PipelinePartitionsRoot,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/overview","/locations/:repoPath/jobs/:pipelinePath/overview"],render:function(e){return(0,o.jsx)(u.l_,{to:"/locations/".concat(e.match.url.replace(/\/overview$/i,""))})}}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)"],children:(0,o.jsx)(t,{repoAddress:n})})]})]})},ne=t(56043),nn=t(76588),nt=t(31761);t(33521);var nr=t(3842),ni=t(99046),no=t(54266),ns=t(65511),na=t(42418),nl=t(19211),nc=t(20775),nu=t(47544),nd=t(71277),np=t(88846),nh=t(65767),nm=t(25774),nx=t(34793);function TickLogDialog_templateObject(){var e=(0,d._)(["\n  query TickLogEventsQuery($instigationSelector: InstigationSelector!, $timestamp: Float!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        tick(timestamp: $timestamp) {\n          id\n          status\n          timestamp\n          logEvents {\n            events {\n              ...TickLogEvent\n            }\n          }\n        }\n      }\n    }\n  }\n\n  fragment TickLogEvent on InstigationEvent {\n    message\n    timestamp\n    level\n  }\n"]);return TickLogDialog_templateObject=function(){return e},e}var TickLogDialog=function(e){var n=e.tick,t=e.instigationSelector,r=e.onClose,i=(0,h.a)(nf,{variables:{instigationSelector:t,timestamp:n.timestamp},notifyOnNetworkStatusChange:!0}).data,a=(null==i?void 0:i.instigationStateOrError.__typename)==="InstigationState"&&(null==i?void 0:i.instigationStateOrError.tick)?null==i?void 0:i.instigationStateOrError.tick.logEvents.events:void 0;return(0,o.jsxs)(H.Vq,{isOpen:!!a,onClose:r,style:{width:"70vw",display:"flex"},title:n?(0,o.jsx)(ed.v,{timestamp:n.timestamp}):null,children:[(0,o.jsx)(H.a7,{children:a&&a.length?(0,o.jsx)(TickLogsTable,{events:a}):(0,o.jsx)(s.x,{flex:{justifyContent:"center",alignItems:"center"},style:{flex:1,color:M.w.Gray600},children:"No logs available"})}),(0,o.jsx)(H.cN,{children:(0,o.jsx)(K.zx,{intent:"primary",onClick:r,children:"OK"})})]})},TickLogsTable=function(e){var n=e.events;return(0,o.jsx)("div",{style:{overflow:"hidden",borderBottom:"0.5px solid #ececec",flex:1},children:(0,o.jsxs)(nx.bu,{onWidthsChanged:function(){},children:[(0,o.jsx)(Headers,{}),n.map(function(e,n){return(0,o.jsx)(TickLogRow,{event:e},n)})]})})},Headers=function(){var e=c.useContext(nx.D7);return(0,o.jsxs)(nx.Cr,{children:[(0,o.jsx)(nx.h4,{width:e.eventType,onResize:function(n){return e.onChange((0,ev._)((0,ej._)({},e),{eventType:n}))},children:"Event Type"}),(0,o.jsx)(nx.gM,{style:{flex:1},children:"Info"}),(0,o.jsx)(nx.h4,{handleSide:"left",width:e.timestamp,onResize:function(n){return e.onChange((0,ev._)((0,ej._)({},e),{timestamp:n}))},children:"Timestamp"})]})},TickLogRow=function(e){var n=e.event;return(0,o.jsxs)(nm.X2,{level:n.level,highlighted:!1,children:[(0,o.jsx)(nm.qH,{children:(0,o.jsx)("span",{style:{marginLeft:8},children:n.level})}),(0,o.jsx)(s.x,{padding:{horizontal:12},style:{flex:1},children:n.message}),(0,o.jsx)(nm.pq,{time:n.timestamp})]})},nf=(0,p.Ps)(TickLogDialog_templateObject()),ng=t(581),nj=t(91230),nv=t(49280),ny=t(90437),nS=t(32911),nb=t(85888);function TickHistory_templateObject(){var e=(0,d._)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        ticks(\n          dayRange: $dayRange\n          limit: $limit\n          cursor: $cursor\n          statuses: $statuses\n          beforeTimestamp: $beforeTimestamp\n          afterTimestamp: $afterTimestamp\n        ) {\n          id\n          ...HistoryTick\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return TickHistory_templateObject=function(){return e},e}function _templateObject1(){var e=(0,d._)(["\n  background: transparent;\n  border: 0;\n  cursor: pointer;\n  padding: 8px;\n  margin: -6px;\n  outline: none;\n\n  "," {\n    background-color: ",";\n    transition: background-color 100ms;\n  }\n\n  :hover "," {\n    background-color: ",";\n  }\n\n  :focus "," {\n    background-color: ",";\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,d._)(["\n  th,\n  td {\n    vertical-align: middle !important;\n  }\n"]);return _templateObject2=function(){return e},e}ns.kL.register(na.ZP);var n_=(r={},(0,eK._)(r,el.izS.SUCCESS,!0),(0,eK._)(r,el.izS.FAILURE,!0),(0,eK._)(r,el.izS.STARTED,!0),(0,eK._)(r,el.izS.SKIPPED,!1),r),nO=(i={},(0,eK._)(i,el.izS.SUCCESS,"Requested"),(0,eK._)(i,el.izS.FAILURE,"Failed"),(0,eK._)(i,el.izS.STARTED,"Started"),(0,eK._)(i,el.izS.SKIPPED,"Skipped"),i),TicksTable=function(e){var n,t=e.name,r=e.repoAddress,i=e.tabs,l=e.setTimerange,u=e.setParentStatuses,d=(0,T._)((0,nd.q)({encode:function(e){var n={};return Object.keys(e).map(function(t){n[t.toLowerCase()]=String(e[t])}),n},decode:function(e){var n=(0,ej._)({},n_);return Object.keys(n_).forEach(function(t){t.toLowerCase() in e&&(n[t]="false"!==e[t.toLowerCase()])}),n}}),2),p=d[0],h=d[1],m=(0,nc.gV)().flagSensorScheduleLogging,x=(0,ev._)((0,ej._)({},(0,eP.$)(r)),{name:t}),f=c.useMemo(function(){return Object.keys(p).filter(function(e){return p[e]}).map(function(e){return e})},[p]),g=(0,nh.l)({nextCursorForResult:function(e){var n;if("InstigationState"===e.instigationStateOrError.__typename)return null===(n=e.instigationStateOrError.ticks[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[]},variables:{instigationSelector:x,statuses:f},query:nR,pageSize:25}),j=g.queryResult,v=g.paginationProps,y=null==j?void 0:null===(n=j.data)||void 0===n?void 0:n.instigationStateOrError,S=c.useMemo(function(){return(null==y?void 0:y.__typename)==="InstigationState"?y.ticks:[]},[y]);c.useEffect(function(){if(v.hasPrevCursor){if(S&&S.length){var e,n,t=null===(e=S[S.length-1])||void 0===e?void 0:e.timestamp,r=null===(n=S[0])||void 0===n?void 0:n.endTimestamp;t&&r&&(null==l||l([t,r]))}}else null==l||l(void 0)},[v.hasPrevCursor,S,l]),c.useEffect(function(){v.hasPrevCursor?null==u||u(Array.from(f)):null==u||u(void 0)},[v.hasPrevCursor,u,f]),c.useEffect(function(){!v.hasPrevCursor||S.length||j.loading||v.reset()},[S,j.loading,v.hasPrevCursor]);var b=(0,T._)(c.useState(),2),_=b[0],O=b[1],R=j.data;if(!R)return(0,o.jsx)(s.x,{padding:{vertical:48},children:(0,o.jsx)(eE.$,{purpose:"page"})});if("PythonError"===R.instigationStateOrError.__typename)return(0,o.jsx)(eT.T9,{error:R.instigationStateOrError});if("InstigationStateNotFoundError"===R.instigationStateOrError.__typename)return(0,o.jsx)(s.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(a.t,{icon:"no-results",title:"No ticks to display"})});var P=R.instigationStateOrError.instigationType;if(!S.length&&f.length===Object.keys(n_).length)return null;var StatusFilter=function(e){var n=e.status;return(0,o.jsx)(e$.X,{label:nO[n],checked:p[n],onChange:function(e){h((0,ev._)((0,ej._)({},p),(0,eK._)({},n,e.target.checked)))}})};return(0,o.jsxs)(o.Fragment,{children:[_?(0,o.jsx)(TickLogDialog,{tick:_,instigationSelector:x,onClose:function(){return O(void 0)}}):null,(0,o.jsx)(s.x,{padding:{vertical:8,horizontal:24},children:(0,o.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[i,(0,o.jsxs)(s.x,{flex:{direction:"row",gap:16},children:[(0,o.jsx)(StatusFilter,{status:el.izS.STARTED}),(0,o.jsx)(StatusFilter,{status:el.izS.SUCCESS}),(0,o.jsx)(StatusFilter,{status:el.izS.FAILURE}),(0,o.jsx)(StatusFilter,{status:el.izS.SKIPPED})]})]})}),S.length?(0,o.jsxs)(nk,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,o.jsx)("th",{style:{width:90},children:"Status"}),(0,o.jsx)("th",{style:{width:90},children:"Duration"}),P===el._5b.SENSOR?(0,o.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,o.jsx)("th",{style:{width:180},children:"Result"}),m?(0,o.jsx)("th",{style:{width:180},children:"Logs"}):null]})}),(0,o.jsx)("tbody",{children:S.map(function(e){return(0,o.jsx)(TickRow,{tick:e,setLogTick:O,instigationSelector:x},e.id)})})]}):(0,o.jsx)(s.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(a.t,{icon:"no-results",title:"No ticks to display"})}),S.length>0?(0,o.jsx)("div",{style:{marginTop:"16px"},children:(0,o.jsx)(ew.pI,(0,ej._)({},v))}):null]})},TickHistoryTimeline=function(e){var n=e.name,t=e.repoAddress,r=e.onHighlightRunIds,i=e.beforeTimestamp,a=e.afterTimestamp,l=e.statuses,u=(0,T._)((0,nd.q)({encode:function(e){return{time:e}},decode:function(e){return e.time?Number(e.time):void 0}}),2),d=u[0],p=u[1],m=(0,T._)(c.useState(!1),2),x=m[0],g=m[1],j=(0,ev._)((0,ej._)({},(0,eP.$)(t)),{name:n}),v=(0,h.a)(nR,{variables:{instigationSelector:j,beforeTimestamp:i,afterTimestamp:a,statuses:l,limit:i?void 0:15},notifyOnNetworkStatusChange:!0});(0,ea.C4)(v,1e3,!(x||i&&a));var y=v.data,S=v.error;if(!y||S)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{padding:{top:16,horizontal:24},border:"bottom",children:(0,o.jsx)(f.pm,{children:"Recent ticks"})}),(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(eE.$,{purpose:"section"})})]});if("PythonError"===y.instigationStateOrError.__typename)return(0,o.jsx)(eT.T9,{error:y.instigationStateOrError});if("InstigationStateNotFoundError"===y.instigationStateOrError.__typename)return null;var b=y.instigationStateOrError.ticks,onTickClick=function(e){p(e?e.timestamp:void 0)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nS.X,{isOpen:!!d,timestamp:d,instigationSelector:j,onClose:function(){return onTickClick(void 0)}}),(0,o.jsx)(s.x,{padding:{vertical:16,horizontal:24},children:(0,o.jsx)(f.pm,{children:"Recent ticks"})}),(0,o.jsx)(s.x,{border:"top",children:(0,o.jsx)(ny.p,{ticks:void 0===b?[]:b,onHoverTick:function(e){e||g(!1),(null==e?void 0:e.runIds)&&(r&&r(e.runIds),g(!0))},onSelectTick:onTickClick,exactRange:i&&a?[a,i]:void 0})})]})};function TickRow(e){var n=e.tick,t=e.setLogTick,r=e.instigationSelector,i=(0,nu.m)(),a=(0,nc.gV)().flagSensorScheduleLogging,l=(0,T._)(c.useState(!1),2),u=l[0],d=l[1],p=(0,T._)(c.useMemo(function(){return[null==n?void 0:n.dynamicPartitionsRequestResults.filter(function(e){var n;return e.type===el.Dq2.ADD_PARTITIONS&&(null===(n=e.partitionKeys)||void 0===n?void 0:n.length)}).length,null==n?void 0:n.dynamicPartitionsRequestResults.filter(function(e){var n;return e.type===el.Dq2.DELETE_PARTITIONS&&(null===(n=e.partitionKeys)||void 0===n?void 0:n.length)}).length]},[null==n?void 0:n.dynamicPartitionsRequestResults]),2),h=p[0],m=p[1];return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(ed.v,{timestamp:n.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,o.jsx)("td",{children:(0,o.jsx)(ng.a,{tick:n})}),(0,o.jsx)("td",{children:(0,nb.S)(n)?"- ":(0,o.jsx)(np.Q,{startUnix:n.timestamp,endUnix:n.endTimestamp||Date.now()/1e3})}),n.instigationType===el._5b.SENSOR?(0,o.jsx)("td",{style:{width:120},children:n.cursor?(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,o.jsx)("div",{style:{fontFamily:nr.b.monospace,fontSize:"16px"},children:(0,nb.$)(n.cursor||"")}),(0,o.jsx)(nP,{onClick:(0,eF._)(function(){return(0,eI.Jh)(this,function(e){switch(e.label){case 0:return i(n.cursor||""),[4,(0,nl.B7)({message:(0,o.jsx)("div",{children:"Copied value"}),intent:"success"})];case 1:return e.sent(),[2]}})}),children:(0,o.jsx)(eN.JO,{name:"assignment"})})]}):(0,o.jsx)(o.Fragment,{children:"—"})}):null,(0,o.jsx)("td",{children:n.runIds.length?(0,o.jsxs)(s.x,{flex:{direction:"column",gap:6},children:[(0,o.jsxs)(s.x,{flex:{alignItems:"center",gap:8},children:[(0,o.jsxs)(B.Z,{onClick:function(){d(!0)},children:[n.runIds.length," run",(0,ni.I)(n.runIds.length,"","s")," requested"]}),1===n.runs.length?n.runs.map(function(e){return(0,o.jsx)(c.Fragment,{children:(0,o.jsx)(nv.RX,{run:e})},e.id)}):null]}),h||m?(0,o.jsxs)(f.YS,{children:["(",h?(0,o.jsxs)("span",{children:[h," partition",(0,ni.I)(h,"","s")," created",m?",":""]}):null,m?(0,o.jsxs)("span",{children:[m," partition",(0,ni.I)(m,"","s")," deleted,"]}):null,")"]}):null,(0,o.jsx)(nS.X,{isOpen:u,timestamp:n.timestamp,instigationSelector:r,onClose:function(){d(!1)}})]}):(0,o.jsx)(o.Fragment,{children:"—"})}),a?(0,o.jsx)("td",{children:n.logKey?(0,o.jsx)("a",{onClick:function(){return t(n)},children:"View logs"}):(0,o.jsx)(o.Fragment,{children:"—"})}):null]})}var nR=(0,p.Ps)(TickHistory_templateObject(),nv.S9,D.B,nj.dY,nv.vw),nP=e0.ZP.button.withConfig({componentId:"sc-e09186d-0"})(_templateObject1(),eN.a1,M.w.Gray600,eN.a1,M.w.Gray800,eN.a1,M.w.Link),nk=(0,e0.ZP)(no.i).withConfig({componentId:"sc-e09186d-1"})(_templateObject2()),nw=t(46253),nC=t(59692),nA=t(90818),nE=t(37783),nN=t(44678),nT=t(59686),nF=t(37305),nI=t(4472),nD=t(39818);function EvaluateScheduleDialog_templateObject(){var e=(0,d._)(["\n  query getSchedule(\n    $scheduleSelector: ScheduleSelector!\n    $startTimestamp: Float\n    $ticksAfter: Int\n    $ticksBefore: Int\n  ) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on PythonError {\n        message\n        stack\n      }\n      ... on Schedule {\n        id\n        name\n        potentialTickTimestamps(\n          startTimestamp: $startTimestamp\n          upperLimit: $ticksAfter\n          lowerLimit: $ticksBefore\n        )\n      }\n    }\n  }\n"]);return EvaluateScheduleDialog_templateObject=function(){return e},e}function EvaluateScheduleDialog_templateObject1(){var e=(0,d._)(["\n  mutation ScheduleDryRunMutation($selectorData: ScheduleSelector!, $timestamp: Float) {\n    scheduleDryRun(selectorData: $selectorData, timestamp: $timestamp) {\n      ...PythonErrorFragment\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ... on ScheduleNotFoundError {\n        scheduleName\n      }\n    }\n  }\n  ","\n  ","\n"]);return EvaluateScheduleDialog_templateObject1=function(){return e},e}function EvaluateScheduleDialog_templateObject2(){var e=(0,d._)(["\n  button {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n  }\n"]);return EvaluateScheduleDialog_templateObject2=function(){return e},e}function _templateObject3(){var e=(0,d._)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  padding-bottom: 12px;\n  border-bottom: 1px solid ",";\n  margin-bottom: 12px;\n  "," {\n    padding-bottom: 4px;\n    display: block;\n  }\n  pre {\n    margin: 0;\n  }\n  button {\n    margin-top: 4px;\n  }\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,d._)(["\n  padding-bottom: 2px;\n"]);return _templateObject4=function(){return e},e}var n$=navigator.language,EvaluateScheduleDialog=function(e){return(0,o.jsx)(H.Vq,(0,ev._)((0,ej._)({},e),{style:{width:"70vw",display:"flex"},title:(0,o.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,o.jsx)(eN.JO,{name:"schedule"}),(0,o.jsx)("span",{children:e.name})]}),children:(0,o.jsx)(EvaluateSchedule,(0,ej._)({},e))}))},EvaluateSchedule=function(e){var n=e.repoAddress,t=e.name,r=e.onClose,i=e.jobName,a=(0,T._)(c.useState(),2),l=a[0],u=a[1],d=(0,h.a)(nz,{variables:{scheduleSelector:{repositoryLocationName:n.location,repositoryName:n.name,scheduleName:t}}}).data,p=c.useContext(nT.JB),m=(0,T._)(p.timezone,1)[0],x=(0,T._)(c.useState(!1),2),f=x[0],g=x[1],j=c.useRef(null),v=(0,ey.S)(),y=v.viewport,S=v.containerProps,b=(0,T._)(c.useState(!1),2),_=b[0],O=b[1],R=c.useMemo(function(){if(_)return(0,o.jsx)(EvaluateScheduleContent,{repoAddress:n,name:t,timestamp:j.current.ts,jobName:i});if(!d)return(0,o.jsx)(s.x,{padding:{vertical:48},flex:{alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(eE.$,{purpose:"page"})});if("PythonError"===d.scheduleOrError.__typename||"ScheduleNotFoundError"===d.scheduleOrError.__typename)return(0,o.jsx)("div",{});var e,r=d.scheduleOrError.potentialTickTimestamps.map(function(e){return{ts:e,label:(0,nF.j)({timestamp:{unix:e},locale:n$,timezone:m,timeFormat:{showTimezone:!0}})}});return j.current=l||r[0]||null,(0,o.jsxs)(nG,{children:[(0,o.jsx)(nV,{children:"Select a mock evaluation time"}),(0,o.jsx)(nE.J,{isOpen:f,position:"bottom-left",fill:!0,content:(0,o.jsx)(nN.v2,{style:{maxHeight:"400px",overflow:"scroll",width:"".concat(y.width,"px")},children:r.map(function(e){return(0,o.jsx)(nN.sN,{text:(0,o.jsx)("div",{"data-testid":(0,eZ.N)("tick-".concat(e.ts)),children:e.label}),onClick:function(){u(e),g(!1)}},e.ts)})}),children:(0,o.jsx)("div",(0,ev._)((0,ej._)({},S),{children:(0,o.jsx)(K.zx,{style:{flex:1},rightIcon:(0,o.jsx)(eN.JO,{name:"arrow_drop_down"}),onClick:function(){return g(function(e){return!e})},"data-testid":(0,eZ.N)("tick-selection"),children:null===(e=j.current)||void 0===e?void 0:e.label})}))})]})},[l,S,d,f,i,t,n,_,m,y.width]),P=c.useMemo(function(){return _?(0,o.jsx)(K.zx,{onClick:r,children:"Close"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(K.zx,{onClick:r,children:"Cancel"}),(0,o.jsx)(K.zx,{"data-testid":(0,eZ.N)("evaluate"),intent:"primary",onClick:function(){O(!0)},children:"Evaluate"})]})},[r,_]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(H.a7,{children:(0,o.jsx)("div",{style:{minHeight:"300px"},children:R})}),P?(0,o.jsx)(H.cN,{topBorder:!0,children:P}):null]})},nz=(0,p.Ps)(EvaluateScheduleDialog_templateObject()),EvaluateScheduleContent=function(e){var n,t,r,i,l=e.repoAddress,u=e.name,d=e.timestamp,p=e.jobName,h=c.useContext(nT.JB),m=(0,T._)(h.timezone,1)[0],x=(0,T._)((0,eD.D)(nL,c.useMemo(function(){var e=(0,eP.$)(l);return{variables:{selectorData:(0,ev._)((0,ej._)({},e),{scheduleName:u}),timestamp:d}}},[u,l,d])),1)[0],g=(0,T._)(c.useState(null),2),v=g[0],y=g[1];if(c.useEffect(function(){x().then(function(e){y(function(){return e})})},[x]),!v||!v.data)return(0,o.jsx)(s.x,{padding:32,flex:{justifyContent:"center",alignItems:"center"},children:(0,o.jsx)(eE.$,{purpose:"page"})});var S=(null==v?void 0:null===(t=v.data)||void 0===t?void 0:t.scheduleDryRun.__typename)==="DryRunInstigationTick"?null==v?void 0:null===(r=v.data)||void 0===r?void 0:r.scheduleDryRun.evaluationResult:null,b=null==S?void 0:null===(i=S.runRequests)||void 0===i?void 0:i.length,_=null==S?void 0:S.error;return(0,o.jsxs)(s.x,{flex:{direction:"column",gap:8},children:[(0,o.jsx)(s.x,{children:(0,o.jsxs)(nU,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(f.pm,{children:"Result"}),(0,o.jsx)(s.x,{flex:{grow:1,alignItems:"center"},children:(0,o.jsx)("div",{children:_?(0,o.jsx)(j.V,{intent:"danger",children:"Failed"}):b?(0,o.jsxs)(j.V,{intent:"success",children:[b," run requests"]}):(0,o.jsx)(j.V,{intent:"warning",children:"Skipped"})})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(f.pm,{children:"Tick"}),(0,o.jsx)(s.x,{flex:{grow:1,alignItems:"center"},children:(0,o.jsx)(f.fv,{children:(0,nF.j)({timestamp:{unix:d},locale:n$,timezone:m,timeFormat:{showTimezone:!0}})})})]})]})}),v.data&&S?S.error?(0,o.jsx)(eT.T9,{error:S.error}):(null===(n=S.runRequests)||void 0===n?void 0:n.length)?(0,o.jsx)(nI.k,{runRequests:S.runRequests,repoAddress:l,isJob:!0,jobName:p,name:u}):(0,o.jsxs)("div",{children:[(0,o.jsx)(f.pm,{children:"Skip Reason"}),(0,o.jsx)("div",{children:(null==S?void 0:S.skipReason)||"No skip reason was output"})]}):(0,o.jsx)(a.t,{title:"An unknown error occurred",description:(0,o.jsxs)("span",{children:["File an issue on"," ",(0,o.jsx)("a",{href:"https://github.com/dagster-io/dagster",target:"_blank",rel:"noreferrer",children:"Github"})," ","if you think this is a bug"]}),icon:"error"})]})},nL=(0,p.Ps)(EvaluateScheduleDialog_templateObject1(),D.B,nD.s),nG=e0.ZP.div.withConfig({componentId:"sc-14a50da3-0"})(EvaluateScheduleDialog_templateObject2()),nU=e0.ZP.div.withConfig({componentId:"sc-14a50da3-1"})(_templateObject3(),M.w.KeylineGray,f.pm),nV=e0.ZP.div.withConfig({componentId:"sc-14a50da3-2"})(_templateObject4()),nJ=t(83601);function SchedulePartitionStatus_templateObject(){var e=(0,d._)(["\n  query SchedulePartitionStatusQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...SchedulePartitionStatusFragment\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusFragment on Schedule {\n    id\n    mode\n    pipelineName\n    partitionSet {\n      id\n      name\n      partitionStatusesOrError {\n        ... on PartitionStatuses {\n          results {\n            id\n            ...SchedulePartitionStatusResult\n          }\n        }\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusResult on PartitionStatus {\n    id\n    partitionName\n    runStatus\n  }\n"]);return SchedulePartitionStatus_templateObject=function(){return e},e}var nq=["Succeeded","Failed","Missing","Pending"],calculateDisplayStatus=function(e){switch(e.runStatus){case null:return"Missing";case el.VOA.SUCCESS:return"Succeeded";case el.VOA.FAILURE:case el.VOA.CANCELED:case el.VOA.CANCELING:return"Failed";case el.VOA.MANAGED:case el.VOA.QUEUED:case el.VOA.NOT_STARTED:case el.VOA.STARTED:case el.VOA.STARTING:return"Pending";default:return(0,e1.UT)(e.runStatus)}},nW=c.memo(function(e){var n=e.repoAddress,t=e.schedule,r=(0,z.Ux)(n),i=t.name,s=t.partitionSet,a=t.pipelineName,l=null==s?void 0:s.name,u=(0,z.E8)(r,a),d=c.useMemo(function(){var e=l?J().stringify({partitionSet:l},{addQueryPrefix:!0}):"";return"/".concat(u?"jobs":"pipelines","/").concat(a,"/partitions").concat(e)},[l,u,a]),p=(0,P.$U)(n,d),h=(0,T._)((0,nJ.t)(nB,{variables:{scheduleSelector:{scheduleName:i,repositoryName:n.name,repositoryLocationName:n.location}}}),2),m=h[0],x=h[1],g=x.data,j=x.loading,v=c.useCallback(function(){return m()},[m]);return(0,o.jsxs)(nC.Z,{direction:"column",spacing:4,children:[(0,o.jsx)(X.rU,{to:p,children:l}),function(){if(j)return(0,o.jsx)(f.YS,{style:{color:M.w.Gray400},children:"Loading…"});if(!g)return(0,o.jsx)(B.Z,{onClick:v,children:(0,o.jsx)(f.YS,{children:"Show coverage"})});var e=g.scheduleOrError;return"Schedule"===e.__typename?(0,o.jsx)(RetrievedSchedulePartitionStatus,{schedule:e,partitionURL:p}):(0,o.jsx)(f.YS,{style:{color:M.w.Red700},children:"Partition set not found!"})}()]})}),RetrievedSchedulePartitionStatus=function(e){var n=e.schedule,t=e.partitionURL,r=n.partitionSet;if(!r||"PartitionStatuses"!==r.partitionStatusesOrError.__typename)return(0,o.jsx)("span",{style:{color:M.w.Gray300},children:"None"});var i=r.partitionStatusesOrError.results,s={};return i.forEach(function(e){var n=calculateDisplayStatus(e);s[n]=(0,ek._)(s[n]||[]).concat([e])}),(0,o.jsx)(nv.Jy,{children:(0,o.jsx)("tbody",{children:nq.map(function(e){return e in s?(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{width:"100px"},children:e}),(0,o.jsx)("td",{children:"Failed"===e||"Missing"===e?(0,o.jsx)(X.rU,{to:"".concat(t,"?showFailuresAndGapsOnly=true"),style:{color:M.w.Gray900},children:s[e].length}):s[e].length})]},e):null})})})},nB=(0,p.Ps)(SchedulePartitionStatus_templateObject()),nM=t(54483),nH={showSeconds:!1,showTimezone:!0},ScheduleDetails=function(e){var n=e.repoAddress,t=e.schedule,r=e.refreshState,i=t.cronSchedule,a=t.executionTimezone,l=t.futureTicks,u=t.name,d=t.partitionSet,p=t.pipelineName,h=(0,nu.m)(),m=(0,z.Ux)(n),g=(0,z.E8)(m,p),v=(0,T._)(c.useState("Click to copy"),2),y=v[0],S=v[1];c.useEffect(function(){var e;return"Copied!"===y&&(e=setTimeout(function(){S("Click to copy")},2e3)),function(){e&&clearTimeout(e)}},[y]);var _=t.scheduleState,O=_.status,R=_.id,P=_.ticks,k=P.length>0?P[0]:null,w=O===el.ynu.RUNNING,C=(0,T._)(c.useState(!1),2),A=C[0],E=C[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x.m,{title:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,o.jsx)(f.X6,{children:u}),(0,o.jsx)(et.M,{repoAddress:n,schedule:t})]}),tags:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(j.V,{icon:"schedule",children:["Schedule in ",(0,o.jsx)(b.b,{repoAddress:n})]}),l.results[0]&&w?(0,o.jsxs)(j.V,{icon:"timer",children:["Next tick:"," ",(0,o.jsx)(ed.v,{timestamp:l.results[0].timestamp,timezone:a,timeFormat:nH})]}):null,(0,o.jsx)(s.x,{flex:{display:"inline-flex"},margin:{top:2},children:(0,o.jsx)(eo.u,{content:y,children:(0,o.jsx)(B.Z,{color:{link:M.w.Gray400,hover:M.w.Gray600},onClick:function(){h(R),S("Copied!")},children:(0,o.jsx)(f.fv,{children:"id: ".concat(R.slice(0,8))})})})})]}),right:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,o.jsx)(ea.xi,{refreshState:r}),(0,o.jsx)(K.zx,{onClick:function(){E(!0)},children:"Test Schedule"})]})}),(0,o.jsx)(EvaluateScheduleDialog,{isOpen:A,onClose:function(){E(!1)},name:t.name,repoAddress:n,jobName:p},A?"1":"0"),(0,o.jsx)(es.fJ,{children:(0,o.jsxs)("tbody",{children:[t.description?(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Description"}),(0,o.jsx)("td",{children:t.description})]}):null,(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Latest tick"}),(0,o.jsx)("td",{children:k?(0,o.jsxs)(nC.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,o.jsx)(ed.v,{timestamp:k.timestamp,timezone:a,timeFormat:nH}),(0,o.jsx)(ng.a,{tick:k})]}):"Schedule has never run"})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:g?"Job":"Pipeline"}),(0,o.jsx)("td",{children:(0,o.jsx)(nA.h,{pipelineName:p,pipelineHrefContext:n,isJob:g})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Partition set"}),(0,o.jsx)("td",{children:d?(0,o.jsx)(nW,{schedule:t,repoAddress:n}):"None"})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Schedule"}),(0,o.jsx)("td",{children:i?(0,o.jsxs)(nC.Z,{direction:"row",spacing:8,children:[(0,o.jsx)("span",{children:(0,nM.A)(i,a||"UTC")}),(0,o.jsxs)(f.EK,{children:["(",i,")"]})]}):(0,o.jsx)("div",{children:"—"})})]}),a?(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Execution timezone"}),(0,o.jsx)("td",{children:a})]}):null]})})]})};function ScheduleUtils_templateObject(){var e=(0,d._)(["\n  fragment ScheduleFragment on Schedule {\n    id\n    name\n    cronSchedule\n    executionTimezone\n    pipelineName\n    solidSelection\n    mode\n    description\n    partitionSet {\n      id\n      name\n    }\n    scheduleState {\n      id\n      ...InstigationStateFragment\n    }\n    futureTicks(limit: 5) {\n      results {\n        timestamp\n      }\n    }\n  }\n\n  ","\n"]);return ScheduleUtils_templateObject=function(){return e},e}var nK=(0,p.Ps)(ScheduleUtils_templateObject(),nv.ai),nQ=t(84826);function ScheduleRoot_templateObject(){var e=(0,d._)(['\n  query ScheduleRootQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...ScheduleFragment\n      }\n      ... on ScheduleNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SCHEDULER") {\n          id\n          healthy\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return ScheduleRoot_templateObject=function(){return e},e}function ScheduleRoot_templateObject1(){var e=(0,d._)(["\n  query PreviousRunsForScheduleQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n\n  ","\n"]);return ScheduleRoot_templateObject1=function(){return e},e}var ScheduleRoot=function(e){(0,v.Px)();var n=e.repoAddress,t=(0,u.UO)().scheduleName;(0,S.j)("Schedule: ".concat(t));var r=(0,ev._)((0,ej._)({},(0,eP.$)(n)),{scheduleName:t}),i=(0,T._)(c.useState("ticks"),2),s=i[0],a=i[1],l=(0,h.a)(nZ,{variables:{scheduleSelector:r},notifyOnNetworkStatusChange:!0}),d=(0,ea.C4)(l,ea.dT),p=(0,o.jsxs)(g.mQ,{selectedTabId:s,onChange:a,children:[(0,o.jsx)(g.OK,{id:"ticks",title:"Tick history"}),(0,o.jsx)(g.OK,{id:"runs",title:"Run history"})]});return(0,o.jsx)(eg.g,{queryResult:l,allowStaleData:!0,children:function(e){var t=e.scheduleOrError,r=e.instance;if("Schedule"!==t.__typename)return null;var i=!r.daemonHealth.daemonStatus.healthy;return(0,o.jsxs)(m.T,{children:[(0,o.jsx)(ScheduleDetails,{repoAddress:n,schedule:t,refreshState:d}),i?(0,o.jsx)(nQ.K,{daemonHealth:r.daemonHealth,padding:{vertical:16,horizontal:24}}):null,"ticks"===s?(0,o.jsx)(TicksTable,{tabs:p,repoAddress:n,name:t.name}):(0,o.jsx)(SchedulePreviousRuns,{repoAddress:n,schedule:t,tabs:p})]})}})},SchedulePreviousRuns=function(e){var n=e.schedule,t=e.highlightedIds,r=e.tabs,i=(0,h.a)(nX,{variables:{limit:20,filter:{pipelineName:n.pipelineName,tags:[{key:ee.H.ScheduleName,value:n.name}]}},notifyOnNetworkStatusChange:!0});(0,ea.C4)(i,ea.dT);var s=i.data;if(!s)return null;if("Runs"!==s.pipelineRunsOrError.__typename)return(0,o.jsx)(a.t,{icon:"error",title:"Query Error",description:s.pipelineRunsOrError.message});var l=null==s?void 0:s.pipelineRunsOrError.results;return(0,o.jsx)(nw.AL,{actionBarComponents:r,runs:l,highlightedIds:t,hideCreatedBy:!0})},nZ=(0,p.Ps)(ScheduleRoot_templateObject(),nK,D.B,nt.O),nX=(0,p.Ps)(ScheduleRoot_templateObject1(),nw.ZZ),nY=t(99596),n0=t(82439);function SensorFragment_templateObject(){var e=(0,d._)(["\n  fragment SensorFragment on Sensor {\n    id\n    jobOriginId\n    name\n    description\n    minIntervalSeconds\n    sensorType\n    nextTick {\n      timestamp\n    }\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n  }\n\n  ","\n"]);return SensorFragment_templateObject=function(){return e},e}var n1=(0,p.Ps)(SensorFragment_templateObject(),nv.ai),n2=t(56692);function SensorPreviousRuns_templateObject(){var e=(0,d._)(["\n  query PreviousRunsForSensorQuery($filter: RunsFilter, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit, cursor: $cursor) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"]);return SensorPreviousRuns_templateObject=function(){return e},e}var SensorPreviousRuns=function(e){var n,t=e.sensor,r=e.highlightedIds,i=e.tabs,s=(0,nh.l)({query:n4,variables:{filter:{pipelineName:(null===(n=t.targets)||void 0===n?void 0:n.length)===1?t.targets[0].pipelineName:void 0,tags:[{key:ee.H.SensorName,value:t.name}]}},nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[19])||void 0===n?void 0:n.id},getResultArray:function(e){return(null==e?void 0:e.pipelineRunsOrError.__typename)!=="Runs"?[]:e.pipelineRunsOrError.results},pageSize:20}),a=s.queryResult,l=s.paginationProps;(0,ea.C4)(a,l.hasPrevCursor?36e5:1e4);var c=a.data;if(c&&(null==c?void 0:c.pipelineRunsOrError.__typename)==="Runs"||(c=a.previousData),!c||(null==c?void 0:c.pipelineRunsOrError.__typename)!=="Runs")return null;var u=c.pipelineRunsOrError.results;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nw.AL,{actionBarComponents:i,runs:u,highlightedIds:r,hideCreatedBy:!0}),(0,o.jsx)("div",{style:{paddingBottom:"16px"},children:(0,o.jsx)(ew.pI,(0,ej._)({},l))})]})},n4=(0,p.Ps)(SensorPreviousRuns_templateObject(),nw.ZZ);function SensorRoot_templateObject(){var e=(0,d._)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return SensorRoot_templateObject=function(){return e},e}var SensorRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,u.UO)().sensorName;(0,S.j)("Sensor: ".concat(t));var r=(0,ev._)((0,ej._)({},(0,eP.$)(n)),{sensorName:t}),i=(0,T._)(c.useState(void 0),2),l=i[0],d=i[1],p=(0,T._)(c.useState(void 0),2),x=p[0],f=p[1],g=c.useMemo(function(){return x||l?{afterTimestamp:null==x?void 0:x[0],beforeTimestamp:null==x?void 0:x[1],statuses:l}:{}},[l,x]),j=(0,T._)((0,nd.q)(c.useMemo(function(){return{queryKey:"view",decode:function(e){return"runs"===e.view?"runs":"evaluations"},encode:function(e){return{view:e,cursor:void 0,statuses:void 0}}}},[])),2),y=j[0],b=j[1],_=(0,h.a)(n8,{variables:{sensorSelector:r},notifyOnNetworkStatusChange:!0}),O=(0,ea.C4)(_,ea.dT),R=(0,o.jsx)(nY.h,{activeItems:new Set([y]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:function(e){b(e)}});return(0,o.jsx)(eg.g,{queryResult:_,allowStaleData:!0,children:function(e){var r=e.sensorOrError,i=e.instance;if("SensorNotFoundError"===r.__typename)return(0,o.jsx)(s.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(a.t,{icon:"error",title:"Could not find sensor `".concat(t,"` in definitions for `").concat(n.name,"`")})});if("PythonError"===r.__typename)return(0,o.jsx)(eT.T9,{error:r});if("Sensor"!==r.__typename)return null;var l=!i.daemonHealth.daemonStatus.healthy;return(0,o.jsxs)(m.T,{children:[(0,o.jsx)(n0.e,{repoAddress:n,sensor:r,daemonHealth:i.daemonHealth.daemonStatus.healthy,refreshState:O}),l?(0,o.jsx)(n2.F,{daemonHealth:i.daemonHealth,padding:{vertical:16,horizontal:24}}):null,(0,o.jsx)(TickHistoryTimeline,(0,ej._)({repoAddress:n,name:r.name},g)),(0,o.jsx)(s.x,{margin:{top:32},border:"top",children:"evaluations"===y?(0,o.jsx)(TicksTable,{tabs:R,repoAddress:n,name:r.name,setParentStatuses:d,setTimerange:f}):(0,o.jsx)(SensorPreviousRuns,{repoAddress:n,sensor:r,tabs:R})})]})}})},n8=(0,p.Ps)(SensorRoot_templateObject(),n1,D.B,nt.O);function GraphRoot_templateObject(){var e=(0,d._)(["\n  query GraphExplorerRootQuery(\n    $graphSelector: GraphSelector\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    graphOrError(selector: $graphSelector) {\n      ... on Graph {\n        id\n        name\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n        ...GraphExplorerFragment\n      }\n      ... on GraphNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return GraphRoot_templateObject=function(){return e},e}var GraphRoot=function(e){(0,v.Px)();var n=e.repoAddress,t=(0,u.UO)(),r=(0,_.p3)(t[0]),i=r.opNames.length>1?r.opNames[r.opNames.length-2]:r.pipelineName;return(0,S.j)("Graph: ".concat(i)),(0,o.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,o.jsx)(x.m,{title:(0,o.jsx)(f.X6,{children:i}),tags:(0,o.jsxs)(j.V,{icon:"schema",children:["Graph in ",(0,o.jsx)(b.b,{repoAddress:n})]})}),(0,o.jsx)(s.x,{border:"top",style:{minHeight:0,flex:1,display:"flex"},children:(0,o.jsx)(GraphExplorerRoot,{repoAddress:n})})]})},GraphExplorerRoot=function(e){var n=e.repoAddress,t=(0,u.UO)(),r=(0,_.p3)(t["0"]),i=(0,u.k6)(),s=(0,T._)(c.useState({explodeComposites:!1,preferAssetRendering:!0}),2),l=s[0],d=s[1],p=r.opNames.slice(0,r.opNames.length-1),m=(0,h.a)(n6,{variables:{graphSelector:{repositoryName:(null==n?void 0:n.name)||"",repositoryLocationName:(null==n?void 0:n.location)||"",graphName:r.pipelineName},rootHandleID:p.join("."),requestScopeHandleID:l.explodeComposites?void 0:p.join(".")}});return(0,o.jsx)(eg.g,{queryResult:m,children:function(t){var s=t.graphOrError;if("GraphNotFoundError"===s.__typename)return(0,o.jsx)(a.t,{icon:"error",title:"Graph not found",description:s.message});if("PythonError"===s.__typename)return(0,o.jsx)(a.t,{icon:"error",title:"Query Error",description:s.message});var c=s.solidHandle,u=l.explodeComposites?(0,eq.i)(s.solidHandles):s.solidHandles;return(0,o.jsx)(eW.m0,{options:l,setOptions:d,explorerPath:r,onChangeExplorerPath:function(n,t){var r=(0,P.$U)(e.repoAddress,"/graphs/".concat((0,_.gY)(n)));"push"===t?i.push(r):i.replace(r)},container:s,repoAddress:n,handles:u,parentHandle:c||void 0,isGraph:!0,getInvocations:function(e){return u.filter(function(n){return n.solid.definition.name===e}).map(function(e){return{handleID:e.handleID}})}})}})},n6=(0,p.Ps)(GraphRoot_templateObject(),eW.Q,eW.Sm,D.B),n3=t(34822),n5=t(88983),n7=t(68577),n9=t(34263),te=t(62175),tn=t(15282),tt=t(55658),tr=t(90537);function VirtualizedRepoAssetTable_templateObject(){var e=(0,d._)(["\n  cursor: pointer;\n\n  :focus,\n  :active {\n    outline: none;\n  }\n\n  ",'[aria-label="arrow_drop_down"] {\n    transition: transform 100ms linear;\n    ',"\n  }\n"]);return VirtualizedRepoAssetTable_templateObject=function(){return e},e}function VirtualizedRepoAssetTable_templateObject1(){var e=(0,d._)(["\n  fragment RepoAssetTableFragment on AssetNode {\n    id\n    assetKey {\n      path\n    }\n    groupName\n    ...AssetTableDefinitionFragment\n  }\n\n  ","\n"]);return VirtualizedRepoAssetTable_templateObject1=function(){return e},e}var ti="UNGROUPED",VirtualizedRepoAssetTable=function(e){var n=e.repoAddress,t=e.assets,r=c.useRef(null),i=(0,ei.Uz)(n),s=useAssetGroupExpansionState("".concat(i,"-").concat("assets-virtualized-expansion-state")),a=s.expandedKeys,l=s.onToggle,u=c.useMemo(function(){var e={},n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,l=a.groupName||ti,c=e[l]||[];e[l]=(0,ek._)(c).concat([a])}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e},[t]),d=c.useMemo(function(){var e=[];return Object.entries(u).forEach(function(n){var t=(0,T._)(n,2),r=t[0],i=t[1];e.push({type:"group",name:r,assetCount:i.length}),a.includes(r)&&i.forEach(function(n){e.push({type:"asset",id:n.id,definition:n})})}),e},[u,a]),p=(0,n7.useVirtualizer)({count:d.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=d[e];return(null==n?void 0:n.type)==="group"?48:64},overscan:5}),h=p.getTotalSize(),m=p.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tr.XC,{nameLabel:"Asset name"}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(tt.W2,{ref:r,children:(0,o.jsx)(tt.Nh,{$totalHeight:h,children:m.map(function(e){var t=e.index,r=e.key,i=e.size,s=e.start,c=d[t];return"group"===c.type?(0,o.jsx)(GroupNameRow,{repoAddress:n,groupName:c.name,assetCount:c.assetCount,expanded:a.includes(c.name),height:i,start:s,onToggle:l},r):(0,o.jsx)(tr.pN,{showCheckboxColumn:!1,definition:c.definition,path:c.definition.assetKey.path,type:"asset",repoAddress:n,showRepoColumn:!1,height:i,start:s,checked:!1,onToggleChecked:function(){},onWipe:function(){}},r)})})})})]})},GroupNameRow=function(e){var n=e.repoAddress,t=e.groupName,r=e.assetCount,i=e.expanded,a=e.height,l=e.start,c=e.onToggle;return(0,o.jsx)(to,{$height:a,$start:l,onClick:function(){return c(t)},$open:i,tabIndex:0,onKeyDown:function(e){("Space"===e.code||"Enter"===e.code)&&(e.preventDefault(),c(t))},children:(0,o.jsxs)(s.x,{background:M.w.Gray50,flex:{direction:"row",alignItems:"center",gap:8,justifyContent:"space-between"},padding:{horizontal:24},border:"bottom",style:{height:"100%"},children:[(0,o.jsxs)(s.x,{flex:{alignItems:"center",gap:8},children:[(0,o.jsx)(eN.JO,{name:"asset_group"}),t===ti?(0,o.jsx)("div",{children:"Ungrouped assets"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("strong",{children:t}),t!==ti?(0,o.jsx)(s.x,{margin:{left:12},children:(0,o.jsx)(X.rU,{to:(0,P.$U)(n,"/asset-groups/".concat(t)),children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,o.jsx)("span",{children:"View lineage"}),(0,o.jsx)(eN.JO,{name:"open_in_new",size:16,color:M.w.Link})]})})}):null]})]}),(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,o.jsx)(j.V,{children:1===r?"1 asset":"".concat(r," assets")}),(0,o.jsx)(eN.JO,{name:"arrow_drop_down",size:20})]})]})})},to=(0,e0.ZP)(tt.X2).withConfig({componentId:"sc-68722d7a-0"})(VirtualizedRepoAssetTable_templateObject(),eN.a1,function(e){return e.$open?null:"transform: rotate(-90deg);"}),validateExpandedKeys=function(e){return Array.isArray(e)?e:[]},useAssetGroupExpansionState=function(e){var n=c.useContext(n9.I).basePath,t=(0,T._)((0,tn.U)("".concat(n,":dagster.").concat(e),validateExpandedKeys),2),r=t[0],i=t[1],o=c.useCallback(function(e){i(function(n){var t=new Set(n||[]);return t.has(e)?t.delete(e):t.add(e),Array.from(t)})},[i]);return c.useMemo(function(){return{expandedKeys:r,onToggle:o}},[r,o])},ts=(0,p.Ps)(VirtualizedRepoAssetTable_templateObject1(),te.s),ta=t(20763);function WorkspaceAssetsRoot_templateObject(){var e=(0,d._)(["\n  query WorkspaceAssetsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        assetNodes {\n          id\n          ...RepoAssetTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return WorkspaceAssetsRoot_templateObject=function(){return e},e}var WorkspaceAssetsRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,ei.Uz)(n);(0,S.j)("Assets: ".concat(t));var r=(0,eP.$)(n),i=(0,T._)((0,nd.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],d=(0,h.a)(tl,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),p=d.data,m=d.loading,x=(0,ea.C4)(d,ea.dT),f=l.trim().toLocaleLowerCase().length>0,g=c.useMemo(function(){return(null==p?void 0:p.repositoryOrError.__typename)==="Repository"?p.repositoryOrError.assetNodes:[]},[p]),j=(0,n5.h)(l,g);return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(ta.h,{repoAddress:n,tab:"assets",refreshState:x,queryData:d}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,o.jsx)(n3.oi,{icon:"search",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Filter by asset name…",style:{width:"340px"}})}),m&&!p?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(eE.$,{purpose:"page"})}):m&&!p?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(eE.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:M.w.Gray600},children:"Loading assets…"})]})}):j.length?(0,o.jsx)(VirtualizedRepoAssetTable,{repoAddress:n,assets:j}):f?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching assets",description:(0,o.jsxs)("div",{children:["No assets matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No assets",description:"No assets were found in ".concat(t)})})]})},tl=(0,p.Ps)(WorkspaceAssetsRoot_templateObject(),ts,D.B),tc=t(86839);function VirtualizedGraphTable_templateObject(){var e=(0,d._)(["\n  display: grid;\n  grid-template-columns: 100%;\n  height: 100%;\n"]);return VirtualizedGraphTable_templateObject=function(){return e},e}function VirtualizedGraphTable_templateObject1(){var e=(0,d._)(["\n  query SingleGraphQuery($selector: GraphSelector!) {\n    graphOrError(selector: $selector) {\n      ... on Graph {\n        id\n        name\n        description\n      }\n    }\n  }\n"]);return VirtualizedGraphTable_templateObject1=function(){return e},e}var VirtualizedGraphTable=function(e){var n=e.repoAddress,t=e.graphs,r=c.useRef(null),i=(0,n7.useVirtualizer)({count:t.length,getScrollElement:function(){return r.current},estimateSize:function(){return 64},overscan:10}),a=i.getTotalSize(),l=i.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:"100%",height:"32px",fontSize:"12px",color:M.w.Gray600},children:(0,o.jsx)(tt.qN,{children:"Graph"})}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(tt.W2,{ref:r,children:(0,o.jsx)(tt.Nh,{$totalHeight:a,children:l.map(function(e){var r=e.index,i=e.key,s=e.size,a=e.start,l=t[r];return(0,o.jsx)(GraphRow,{name:l.name,description:l.description,path:l.path,repoAddress:n,height:s,start:a},i)})})})})]})},GraphRow=function(e){var n=e.name,t=e.path,r=e.description,i=e.repoAddress,a=e.start,l=e.height,u=(0,T._)((0,nJ.t)(td,{variables:{selector:{repositoryName:i.name,repositoryLocationName:i.location,graphName:n}}}),2),d=u[0],p=u[1];(0,tc.v5)(d);var h=p.data,m=c.useMemo(function(){return r||((null==h?void 0:h.graphOrError.__typename)==="Graph"?h.graphOrError.description:null)},[h,r]);return(0,o.jsx)(tt.X2,{$height:l,$start:a,children:(0,o.jsx)(tu,{border:"bottom",children:(0,o.jsx)(tt.E5,{children:(0,o.jsxs)(s.x,{flex:{direction:"column"},children:[(0,o.jsx)("div",{style:{whiteSpace:"nowrap",fontWeight:500},children:(0,o.jsx)(X.rU,{to:(0,P.$U)(i,t),children:n})}),m?(0,o.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,o.jsx)(f.YS,{style:{color:M.w.Gray500,whiteSpace:"nowrap"},children:m})}):null]})})})})},tu=(0,e0.ZP)(s.x).withConfig({componentId:"sc-36d1f01a-0"})(VirtualizedGraphTable_templateObject()),td=(0,p.Ps)(VirtualizedGraphTable_templateObject1());function WorkspaceGraphsRoot_templateObject(){var e=(0,d._)(["\n  query WorkspaceGraphsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        usedSolids {\n          definition {\n            ... on CompositeSolidDefinition {\n              id\n              name\n              description\n            }\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n        pipelines {\n          id\n          name\n          isJob\n          graphName\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return WorkspaceGraphsRoot_templateObject=function(){return e},e}var WorkspaceGraphsRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,ei.Uz)(n);(0,S.j)("Graphs: ".concat(t));var r=(0,eP.$)(n),i=(0,T._)((0,nd.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],d=(0,h.a)(tp,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),p=d.data,m=d.loading,x=(0,ea.C4)(d,ea.dT),f=l.trim().toLocaleLowerCase(),g=f.length>0,j=c.useMemo(function(){var e=null==p?void 0:p.repositoryOrError;if(!e||"Repository"!==e.__typename)return[];var n=Array.from(new Set(e.pipelines.filter(function(e){return e.isJob&&!(0,Y.pv)(e.name)}).map(function(e){return e.graphName}))).map(function(e){return{name:e,path:"/graphs/".concat(e),description:null}});return e.usedSolids.forEach(function(e){if("CompositeSolidDefinition"===e.definition.__typename){var t=e.invocations[0];t&&n.push({name:e.definition.name,path:"/graphs/".concat(t.pipeline.name,"/").concat(t.solidHandle.handleID,"/"),description:e.definition.description})}}),n.sort(function(e,n){return e.name.localeCompare(n.name)})},[p]),y=c.useMemo(function(){var e=f.toLocaleLowerCase();return j.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[j,f]);return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(ta.h,{repoAddress:n,tab:"graphs",refreshState:x,queryData:d}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,o.jsx)(n3.oi,{icon:"search",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Filter by graph name…",style:{width:"340px"}})}),m&&!p?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(eE.$,{purpose:"page"})}):m&&!p?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(eE.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:M.w.Gray600},children:"Loading graphs…"})]})}):y.length?(0,o.jsx)(VirtualizedGraphTable,{repoAddress:n,graphs:y}):g?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching graphs",description:(0,o.jsxs)("div",{children:["No graphs matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No graphs",description:"No graphs were found in ".concat(t)})})]})},tp=(0,p.Ps)(WorkspaceGraphsRoot_templateObject(),D.B),th=t(9901),VirtualizedJobTable=function(e){var n=e.repoAddress,t=e.jobs,r=c.useRef(null),i=(0,n7.useVirtualizer)({count:t.length,getScrollElement:function(){return r.current},estimateSize:function(){return 64},overscan:10}),s=i.getTotalSize(),a=i.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(th.I,{}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(tt.W2,{ref:r,children:(0,o.jsx)(tt.Nh,{$totalHeight:s,children:a.map(function(e){var r=e.index,i=e.key,s=e.size,a=e.start,l=t[r];return(0,o.jsx)(th.b,{name:l.name,isJob:l.isJob,repoAddress:n,height:s,start:a},i)})})})})]})};function WorkspaceJobsRoot_templateObject(){var e=(0,d._)(["\n  query WorkspaceJobsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        pipelines {\n          id\n          name\n          isJob\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return WorkspaceJobsRoot_templateObject=function(){return e},e}var WorkspaceJobsRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,ei.Uz)(n);(0,S.j)("Jobs: ".concat(t));var r=(0,eP.$)(n),i=(0,T._)((0,nd.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],d=(0,h.a)(tm,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),p=d.data,m=d.loading,x=(0,ea.C4)(d,ea.dT),f=l.trim().toLocaleLowerCase(),g=f.length>0,j=c.useMemo(function(){return(null==p?void 0:p.repositoryOrError.__typename)==="Repository"?p.repositoryOrError.pipelines:[]},[p]),y=c.useMemo(function(){var e=f.toLocaleLowerCase();return j.filter(function(n){var t=n.name;return!(0,Y.pv)(t)&&t.toLocaleLowerCase().includes(e)})},[j,f]);return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(ta.h,{repoAddress:n,tab:"jobs",refreshState:x,queryData:d}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,o.jsx)(n3.oi,{icon:"search",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})}),m&&!p?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(eE.$,{purpose:"page"})}):m&&!p?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(eE.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:M.w.Gray600},children:"Loading jobs…"})]})}):y.length?(0,o.jsx)(VirtualizedJobTable,{repoAddress:n,jobs:y}):g?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching jobs",description:(0,o.jsxs)("div",{children:["No jobs matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No jobs",description:"No jobs were found in ".concat(t)})})]})},tm=(0,p.Ps)(WorkspaceJobsRoot_templateObject(),D.B),tx=t(82361),tf=t(21221),tg=t(10735),tj=t(41061),tv=t(65139),ty=t(87763),tS=t(33161);function OpCard_templateObject(){var e=(0,d._)(["\n  fragment OpCardSolidDefinitionFragment on ISolidDefinition {\n    name\n    description\n    metadata {\n      key\n      value\n    }\n    inputDefinitions {\n      name\n    }\n    outputDefinitions {\n      name\n    }\n    ...OpNodeDefinitionFragment\n  }\n\n  ","\n"]);return OpCard_templateObject=function(){return e},e}function OpCard_templateObject1(){var e=(0,d._)(["\n  flex: 1;\n  max-width: 450px;\n  position: relative;\n"]);return OpCard_templateObject1=function(){return e},e}var OpCard=function(e){var n=e.definition,t=n.name,r=n.inputDefinitions,i=n.outputDefinitions,a=(0,tS.og)({name:t,inputs:r.map(function(e){return{definition:e,dependsOn:[]}}),outputs:i.map(function(e){return{definition:e,dependedBy:[]}}),definition:{description:null,assetNodes:[]}},{x:0,y:0});return(0,o.jsx)(s.x,{padding:24,children:(0,o.jsx)(t_,{style:{height:a.bounds.height},children:(0,o.jsx)(ty.Un,{invocation:void 0,definition:e.definition,minified:!1,onClick:function(){},onDoubleClick:function(){},onEnterComposite:function(){},onHighlightEdges:function(){},layout:a,selected:!1,focused:!1,highlightedEdges:[],dim:!1})})})},tb=(0,p.Ps)(OpCard_templateObject(),ty.WH),t_=e0.ZP.div.withConfig({componentId:"sc-a7fc6ba0-0"})(OpCard_templateObject1());function OpDetailsRoot_templateObject(){var e=(0,d._)(["\n  query UsedSolidDetailsQuery($name: String!, $repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolid(name: $name) {\n          definition {\n            ...OpCardSolidDefinitionFragment\n            ...SidebarOpDefinitionFragment\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return OpDetailsRoot_templateObject=function(){return e},e}function OpDetailsRoot_templateObject1(){var e=(0,d._)(["\n  overflow-y: scroll;\n  flex: 1;\n"]);return OpDetailsRoot_templateObject1=function(){return e},e}var UsedSolidDetails=function(e){var n=e.name,t=e.onClickInvocation,r=e.repoAddress,i=(0,eP.$)(r),s=(0,h.a)(tO,{variables:{name:n,repositorySelector:i}});return(0,o.jsx)(eg.g,{queryResult:s,children:function(e){var n=e.repositoryOrError;if(!((null==n?void 0:n.__typename)==="Repository"&&n.usedSolid))return null;var r=n.usedSolid;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(OpCard,{definition:r.definition}),(0,o.jsx)(tv.I,{definition:r.definition,showingSubgraph:!1,onClickInvocation:t,getInvocations:function(){return r.invocations.map(function(e){return{handleID:e.solidHandle.handleID,pipelineName:e.pipeline.name}})}})]})}})},tO=(0,p.Ps)(OpDetailsRoot_templateObject(),tb,tv.u),tR=e0.ZP.div.withConfig({componentId:"sc-cd7f59a3-0"})(OpDetailsRoot_templateObject1()),tP=t(89481);function OpsRoot_templateObject(){var e=(0,d._)(["\n  .solids-list:focus {\n    outline: none;\n  }\n"]);return OpsRoot_templateObject=function(){return e},e}function OpsRoot_templateObject1(){var e=(0,d._)(["\n  query OpsRootQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolids {\n          ...OpsRootUsedSolid\n        }\n      }\n    }\n  }\n\n  fragment OpsRootUsedSolid on UsedSolid {\n    definition {\n      name\n      ...OpTypeSignatureFragment\n    }\n    invocations {\n      pipeline {\n        id\n        isJob\n        name\n      }\n    }\n  }\n\n  ","\n"]);return OpsRoot_templateObject1=function(){return e},e}function OpsRoot_templateObject2(){var e=(0,d._)(["\n  background: ",";\n  box-shadow:\n    "," 4px 0 0 inset,\n    "," 0 -1px 0 inset;\n  color: ",";\n  cursor: pointer;\n  font-size: 14px;\n  display: flex;\n  flex-direction: column;\n  padding: 12px 24px;\n  user-select: none;\n\n  & > code.bp4-code {\n    color: ",";\n    background: transparent;\n    font-family: ",";\n    padding: 5px 0 0 0;\n  }\n"]);return OpsRoot_templateObject2=function(){return e},e}function OpsRoot_templateObject3(){var e=(0,d._)(["\n  flex: 1;\n  font-weight: 600;\n"]);return OpsRoot_templateObject3=function(){return e},e}function OpsRoot_templateObject4(){var e=(0,d._)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]);return OpsRoot_templateObject4=function(){return e},e}var tk=tj.qj,tw=tj.Z8,tC=tj.aV;function flatUniq(e){var n={},t=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var a=o.value,l=!0,c=!1,u=void 0;try{for(var d,p=a[Symbol.iterator]();!(l=(d=p.next()).done);l=!0)n[d.value]=!0}catch(e){c=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}return Object.keys(n).sort(function(e,n){return e.localeCompare(n)})}var OpsRoot=function(e){(0,v.Px)(),(0,S.j)("Ops");var n=(0,u.UO)().name,t=e.repoAddress,r=(0,eP.$)(t),i=(0,h.a)(tE,{variables:{repositorySelector:r}});return(0,o.jsx)("div",{style:{flex:1,minHeight:0},children:(0,o.jsx)(eg.g,{queryResult:i,children:function(r){var i=r.repositoryOrError;return(null==i?void 0:i.__typename)==="Repository"&&i.usedSolids?(0,o.jsx)(OpsRootWithData,(0,ev._)((0,ej._)({},e),{name:n,repoAddress:t,usedSolids:i.usedSolids})):null}})})},OpsRootWithData=function(e){var n=e.name,t=e.repoAddress,r=e.usedSolids,i=(0,u.k6)(),l=(0,u.TH)(),d=J().parse(l.search,{ignoreQueryPrefix:!0}),p=d.q,h=d.typeExplorer,m=[{token:"name",values:function(){return r.map(function(e){return e.definition.name})}},{token:"job",values:function(){return flatUniq(r.map(function(e){return e.invocations.filter(function(e){return!e.pipeline.isJob}).map(function(e){return e.pipeline.name})}))}},{token:"pipeline",values:function(){return flatUniq(r.map(function(e){return e.invocations.filter(function(e){return e.pipeline.isJob}).map(function(e){return e.pipeline.name})}))}},{token:"input",values:function(){return flatUniq(r.map(function(e){return e.definition.inputDefinitions.map(function(e){return e.type.displayName})}))}},{token:"output",values:function(){return flatUniq(r.map(function(e){return e.definition.outputDefinitions.map(function(e){return e.type.displayName})}))}}],x=(0,tf.HE)(p||"",m),f=r.filter(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=x[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=function(){var n=i.value;if(("name"===n.token||void 0===n.token)&&!e.definition.name.startsWith(n.value)||("pipeline"===n.token||"job"===n.token)&&!e.invocations.some(function(e){return e.pipeline.name===n.value})||"input"===n.token&&!e.definition.inputDefinitions.some(function(e){return e.type.displayName.startsWith(n.value)})||"output"===n.token&&!e.definition.outputDefinitions.some(function(e){return e.type.displayName.startsWith(n.value)}))return{v:!1}}();if("object"===(0,tx._)(s))return s.v}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!0}),g=r.find(function(e){return e.definition.name===n}),onSearch=function(e){i.replace({search:"?".concat(J().stringify({q:(0,tf.jP)(e)}))})},onClickOp=function(e){i.replace((0,P.$U)(t,"/ops/".concat(e,"?").concat(J().stringify({q:p}))))};c.useEffect(function(){1!==f.length||g&&f[0]===g||onClickOp(f[0].definition.name),"string"==typeof h&&onSearch((0,ek._)(x).concat([{token:"input",value:h}]))});var j=c.useCallback(function(e){var n=e.pipelineName,r=e.handleID;i.push((0,P.$U)(t,"/pipeline_or_job/".concat(n,"/").concat(r.split(".").join("/"))))},[i,t]);return(0,o.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,o.jsx)(tg.O,{identifier:"ops",firstInitialPercent:40,firstMinSize:420,first:(0,o.jsxs)(tF,{children:[(0,o.jsx)(s.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,o.jsx)(tf.Gf,{values:x,onChange:function(e){return onSearch(e)},suggestionProviders:m,placeholder:"Filter by name or input/output type..."})}),(0,o.jsx)("div",{style:{flex:1},children:(0,o.jsx)(tk,{nonce:window.__webpack_nonce__,children:function(e){var n=e.height,t=e.width;return(0,o.jsx)(OpList,{height:n,width:t,selected:g,onClickOp:onClickOp,items:f.sort(function(e,n){return e.definition.name.localeCompare(n.definition.name)})})}})})]}),second:g?(0,o.jsx)(tR,{children:(0,o.jsx)(UsedSolidDetails,{name:g.definition.name,onClickInvocation:j,repoAddress:t})}):(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"no-results",title:"No op selected",description:"Select an op to see its definition and invocations"})})})})},OpList=function(e){var n=e.items,t=e.selected,r=c.useRef(new tj.t1({defaultHeight:60,fixedWidth:!0})),i=c.useRef(e.width);e.width!==i.current&&(r.current.clearAll(),i.current=e.width);var s=t?n.findIndex(function(e){return e===t}):void 0;return(0,o.jsx)(tA,{children:(0,o.jsx)(tC,{width:e.width,height:e.height,rowCount:e.items.length,rowHeight:r.current.rowHeight,scrollToIndex:s,className:"solids-list",rowRenderer:function(n){var t=n.parent,i=n.index,s=n.key,a=n.style,l=e.items[i];return(0,o.jsx)(tw,{cache:r.current,index:i,parent:t,children:(0,o.jsxs)(tN,{style:a,selected:l===e.selected,onClick:function(){return e.onClickOp(l.definition.name)},children:[(0,o.jsx)(tT,{children:l.definition.name}),(0,o.jsx)(tP.z,{definition:l.definition})]})},s)},overscanRowCount:10})})},tA=e0.ZP.div.withConfig({componentId:"sc-f3b4ec14-0"})(OpsRoot_templateObject()),tE=(0,p.Ps)(OpsRoot_templateObject1(),tP.C),tN=e0.ZP.div.withConfig({componentId:"sc-f3b4ec14-1"})(OpsRoot_templateObject2(),function(e){return e.selected?M.w.Gray100:M.w.White},function(e){return e.selected?M.w.HighlightGreen:"transparent"},M.w.KeylineGray,M.w.Gray800,M.w.Gray800,nr.b.monospace),tT=e0.ZP.div.withConfig({componentId:"sc-f3b4ec14-2"})(OpsRoot_templateObject3()),tF=e0.ZP.div.withConfig({componentId:"sc-f3b4ec14-3"})(OpsRoot_templateObject4()),WorkspaceOpsRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,ei.Uz)(n);return(0,S.j)("Ops: ".concat(t)),(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(ta.h,{repoAddress:n,tab:"ops"}),(0,o.jsx)(OpsRoot,{repoAddress:n})]})},tI=t(73689),tD=t(30894),t$=t(72855),tz=t(24808),tL=t(157),tG=t(30682),tU=t(77376),tV=t(8223),tJ=t(72349),VirtualizedScheduleTable=function(e){var n=e.repoAddress,t=e.schedules,r=e.headerCheckbox,i=e.checkedKeys,s=e.onToggleCheckFactory,a=c.useRef(null),l=(0,n7.useVirtualizer)({count:t.length,getScrollElement:function(){return a.current},estimateSize:function(){return 64},overscan:10}),u=l.getTotalSize(),d=l.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tJ.o,{checkbox:r}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(tt.W2,{ref:a,children:(0,o.jsx)(tt.Nh,{$totalHeight:u,children:d.map(function(e){var a=e.index,l=e.key,c=e.size,u=e.start,d=t[a],p=(0,tL.g)(n,d.name);return(0,o.jsx)(tJ.i,{name:d.name,repoAddress:n,scheduleState:d.scheduleState,checked:i.has(p),showCheckboxColumn:!!r,onToggleChecked:s(p),height:c,start:u},l)})})})})]})};function WorkspaceSchedulesRoot_templateObject(){var e=(0,d._)(["\n  query WorkspaceSchedulesQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        schedules {\n          id\n          name\n          description\n          scheduleState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return WorkspaceSchedulesRoot_templateObject=function(){return e},e}var WorkspaceSchedulesRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,ei.Uz)(n);(0,S.j)("Schedules: ".concat(t));var r=(0,eP.$)(n),i=(0,T._)((0,nd.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],d=(0,tV.g)(),p=c.useMemo(function(){return[d]},[d]),m=(0,tU.m)({filters:p}),x=m.button,f=m.activeFiltersJsx,g=(0,h.a)(tq,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),j=g.data,y=g.loading,b=(0,ea.C4)(g,ea.dT),_=l.trim().toLocaleLowerCase(),O=_.length>0,R=c.useMemo(function(){return(null==j?void 0:j.repositoryOrError.__typename)==="Repository"?j.repositoryOrError.schedules:[]},[j]),P=d.state,k=c.useMemo(function(){return P.size?R.filter(function(e){var n=e.scheduleState;return P.has(n.status)}):R},[R,P]),w=c.useMemo(function(){var e=_.toLocaleLowerCase();return k.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[k,_]),C=w.length>0,A=c.useMemo(function(){return w.filter(function(e){var n=e.scheduleState;return(0,tD.i)(n)})},[w]),E=c.useMemo(function(){return A.map(function(e){var t=e.name;return(0,tL.g)(n,t)})},[A,n]),N=(0,T._)((0,tI.a)(E),2),F=N[0].checkedIds,I=N[1],D=I.onToggleFactory,$=I.onToggleAll,z=c.useMemo(function(){return A.filter(function(e){var t=e.name;return F.has((0,tL.g)(n,t))}).map(function(e){return{repoAddress:n,scheduleName:e.name,scheduleState:e.scheduleState}})},[A,F,n]),L=E.length,G=F.size,U=E.length>0;return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(ta.h,{repoAddress:n,tab:"schedules",refreshState:b,queryData:g}),(0,o.jsxs)(s.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,o.jsxs)(s.x,{flex:{direction:"row",gap:12},children:[x,(0,o.jsx)(n3.oi,{icon:"search",value:l,onChange:function(e){u(e.target.value),$(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"}})]}),(0,o.jsx)(eo.u,{content:"You do not have permission to start or stop these schedules",canShow:C&&!U,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,o.jsx)(tz._,{schedules:z,onDone:function(){return b.refetch()}})})]}),f.length?(0,o.jsx)(s.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:f}):null,y&&!j?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(eE.$,{purpose:"page"})}):y&&!j?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(eE.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:M.w.Gray600},children:"Loading schedules…"})]})}):w.length?(0,o.jsx)(VirtualizedScheduleTable,{repoAddress:n,schedules:w,headerCheckbox:U?(0,o.jsx)(tG.W,{checkedCount:G,totalCount:L,onToggleAll:$}):void 0,checkedKeys:F,onToggleCheckFactory:D}):O?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching schedules",description:(0,o.jsxs)("div",{children:["No schedules matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No schedules",description:"No schedules were found in ".concat(t)})})]})},tq=(0,p.Ps)(WorkspaceSchedulesRoot_templateObject(),t$.i,D.B),tW=t(67802),tB=t(22478),tM=t(16592),VirtualizedSensorTable=function(e){var n=e.repoAddress,t=e.sensors,r=e.headerCheckbox,i=e.checkedKeys,s=e.onToggleCheckFactory,a=c.useRef(null),l=(0,n7.useVirtualizer)({count:t.length,getScrollElement:function(){return a.current},estimateSize:function(){return 64},overscan:10}),u=l.getTotalSize(),d=l.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tM.K,{checkbox:r}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(tt.W2,{ref:a,children:(0,o.jsx)(tt.Nh,{$totalHeight:u,children:d.map(function(e){var a=e.index,l=e.key,c=e.size,u=e.start,d=t[a],p=(0,tB.x)(n,d.name);return(0,o.jsx)(tM.R,{name:d.name,repoAddress:n,sensorState:d.sensorState,checked:i.has(p),showCheckboxColumn:!!r,onToggleChecked:s(p),height:c,start:u},l)})})})})]})};function WorkspaceSensorsRoot_templateObject(){var e=(0,d._)(["\n  query WorkspaceSensorsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        sensors {\n          id\n          name\n          description\n          sensorState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return WorkspaceSensorsRoot_templateObject=function(){return e},e}var WorkspaceSensorsRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,ei.Uz)(n);(0,S.j)("Sensors: ".concat(t));var r=(0,eP.$)(n),i=(0,T._)((0,nd.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],d=(0,tV.g)(),p=c.useMemo(function(){return[d]},[d]),m=(0,tU.m)({filters:p}),x=m.button,f=m.activeFiltersJsx,g=(0,h.a)(tH,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),j=g.data,y=g.loading,b=(0,ea.C4)(g,ea.dT),_=l.trim().toLocaleLowerCase(),O=_.length>0,R=c.useMemo(function(){return(null==j?void 0:j.repositoryOrError.__typename)==="Repository"?j.repositoryOrError.sensors:[]},[j]),P=d.state,k=c.useMemo(function(){return P.size?R.filter(function(e){var n=e.sensorState;return P.has(n.status)}):R},[R,P]),w=c.useMemo(function(){var e=_.toLocaleLowerCase();return k.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[k,_]),C=w.length>0,A=c.useMemo(function(){return w.filter(function(e){var n=e.sensorState;return(0,tD.i)(n)})},[w]),E=c.useMemo(function(){return A.map(function(e){var t=e.name;return(0,tB.x)(n,t)})},[A,n]),N=(0,T._)((0,tI.a)(E),2),F=N[0].checkedIds,I=N[1],D=I.onToggleFactory,$=I.onToggleAll,z=c.useMemo(function(){return A.filter(function(e){var t=e.name;return F.has((0,tB.x)(n,t))}).map(function(e){return{repoAddress:n,sensorName:e.name,sensorState:e.sensorState}})},[A,F,n]),L=E.length,G=F.size,U=E.length>0;return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(ta.h,{repoAddress:n,tab:"sensors",refreshState:b,queryData:g}),(0,o.jsxs)(s.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,o.jsxs)(s.x,{flex:{direction:"row",gap:12},children:[x,(0,o.jsx)(n3.oi,{icon:"search",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Filter by sensor name…",style:{width:"340px"}})]}),(0,o.jsx)(eo.u,{content:"You do not have permission to start or stop these sensors",canShow:C&&!U,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,o.jsx)(tW.b,{sensors:z,onDone:function(){return b.refetch()}})})]}),f.length?(0,o.jsx)(s.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:f}):null,y&&!j?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(eE.$,{purpose:"page"})}):y&&!j?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(eE.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:M.w.Gray600},children:"Loading sensors…"})]})}):w.length?(0,o.jsx)(VirtualizedSensorTable,{repoAddress:n,sensors:w,headerCheckbox:U?(0,o.jsx)(tG.W,{checkedCount:G,totalCount:L,onToggleAll:$}):void 0,checkedKeys:F,onToggleCheckFactory:D}):O?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching sensors",description:(0,o.jsxs)("div",{children:["No sensors matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No sensors",description:"No sensors were found in ".concat(t)})})]})},tH=(0,p.Ps)(WorkspaceSensorsRoot_templateObject(),t$.i,D.B),tK=t(31197),RepoRouteContainer=function(){var e=(0,u.UO)().repoPath,n=c.useContext(z.C5),t=(0,tK.g)(e);return t?n.loading?(0,o.jsx)("div",{}):n.allRepos.find(function(e){return e.repository.name===t.name&&e.repositoryLocation.name===t.location})?(0,o.jsxs)(u.rs,{children:[(0,o.jsx)(u.AW,{path:"/locations/:repoPath/resources",exact:!0,children:(0,o.jsx)(nn.g,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/assets",exact:!0,children:(0,o.jsx)(WorkspaceAssetsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/jobs",exact:!0,children:(0,o.jsx)(WorkspaceJobsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/schedules",exact:!0,children:(0,o.jsx)(WorkspaceSchedulesRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/sensors",exact:!0,children:(0,o.jsx)(WorkspaceSensorsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/graphs",exact:!0,children:(0,o.jsx)(WorkspaceGraphsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/ops/:name?",exact:!0,children:(0,o.jsx)(WorkspaceOpsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/graphs/(/?.*)",children:(0,o.jsx)(GraphRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)","/locations/:repoPath/pipeline_or_job/(/?.*)"],children:(0,o.jsx)(PipelineRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/schedules/:scheduleName/:runTab?",children:(0,o.jsx)(ScheduleRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/sensors/:sensorName",children:(0,o.jsx)(SensorRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/resources/:resourceName",children:(0,o.jsx)(ne.r,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/asset-groups/:groupName/list(/?.*)"],children:(0,o.jsx)(AssetGroupRoot,{repoAddress:t,tab:"list"})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/asset-groups/:groupName/(/?.*)","/locations/:repoPath/asset-groups/:groupName"],children:(0,o.jsx)(AssetGroupRoot,{repoAddress:t,tab:"lineage"})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/*",children:(0,o.jsx)(u.l_,{to:(0,P.$U)(t,"/assets")})})]}):(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"error",title:"Unknown code location",description:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsx)("strong",{children:(0,ei.Uz)(t)})}),"  is not loaded in the current workspace."]})})}):(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"error",title:"Invalid code location path",description:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsx)("strong",{children:e})}),"  is not a valid code location path."]})})})},WorkspaceRoot=function(){return(0,o.jsx)(l.M,{children:(0,o.jsx)(u.rs,{children:(0,o.jsx)(u.AW,{path:"/locations/:repoPath",children:(0,o.jsx)(RepoRouteContainer,{})})})})},tQ=WorkspaceRoot}}]);
//# sourceMappingURL=206.ddb7d598ccaffc67.js.map