"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{17131:function(n,e,t){t.d(e,{m:function(){return PageHeader}});var o=t(73235),r=t(52322);t(2784);var i=t(35505),a=t(18399),s=t(86412);function _templateObject(){var n=(0,o._)(["\n  width: 100%;\n\n  /**\n   * Blueprint breadcrumbs annoyingly have a built-in height.\n   */\n  .bp4-breadcrumbs {\n    height: auto;\n  }\n"]);return _templateObject=function(){return n},n}var PageHeader=function(n){var e=n.title,t=n.tags,o=n.right,i=n.tabs;return(0,r.jsxs)(c,{background:s.w.Gray50,padding:{top:16,left:24,right:12},border:"bottom",children:[(0,r.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between"},padding:{bottom:16},children:[(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[e,t]}),o]}),i]})},c=(0,i.ZP)(a.x).withConfig({componentId:"sc-a1bb63a9-0"})(_templateObject())},88577:function(n,e,t){t.r(e),t.d(e,{CodeLocationsPage:function(){return CodeLocationsPage},default:function(){return Y}});var o=t(52322),r=t(17131),i=t(81308),a=t(18399),s=t(2784),c=t(68028),l=t(28252),d=t(39852),u=t(63832),x=t(92364),h=t(54266),p=t(81862),j=t(58467),f=t(73235),m=t(82550),g=t(22970),y=t(86412),b=t(16861),v=t(9001),C=t(43180),w=t(57830),O=t(12084),L=t(71897),_=t(47933),k=t(35505),I=t(19211),R=t(47544),E=t(33308),S=t(40092),N=t(33869),V=t(87612),z=t(85333),D=t(6692),P=t(44678),T=t(37783),M=t(10952),B=t(94092),F=t(29316),CodeLocationMenu=function(n){var e,t=n.locationNode,r=(0,j._)(s.useState(!1),2),i=r[0],a=r[1],c=(0,j._)(s.useState(!1),2),l=c[0],d=c[1],u=null,x=null;return(null===(e=t.locationOrLoadError)||void 0===e?void 0:e.__typename)==="RepositoryLocation"&&null!==t.locationOrLoadError.dagsterLibraryVersions&&(u=(0,o.jsx)(P.sN,{icon:"info",text:"View Dagster libraries",onClick:function(){return d(!0)}}),x=(0,o.jsx)(DagsterLibrariesDialog,{libraries:t.locationOrLoadError.dagsterLibraryVersions,isOpen:l,setIsOpen:d})),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.J,{position:"bottom-left",content:(0,o.jsxs)(P.v2,{children:[(0,o.jsx)(P.sN,{icon:"info",text:"View configuration",onClick:function(){return a(!0)}}),u]}),children:(0,o.jsx)(v.zx,{icon:(0,o.jsx)(L.JO,{name:"expand_more"})})}),(0,o.jsx)(CodeLocationConfigDialog,{metadata:t.displayMetadata,isOpen:i,setIsOpen:a}),x]})},CodeLocationConfigDialog=function(n){var e=n.isOpen,t=n.setIsOpen,r=n.metadata;return(0,o.jsxs)(M.Vq,{title:"Code location configuration",icon:"info",isOpen:e,onClose:function(){return t(!1)},style:{width:"600px"},children:[(0,o.jsx)(CodeLocationConfig,{displayMetadata:r}),(0,o.jsx)(M.cN,{topBorder:!0,children:(0,o.jsx)(v.zx,{onClick:function(){return t(!1)},intent:"primary",children:"Done"})})]})},DagsterLibrariesDialog=function(n){var e=n.isOpen,t=n.setIsOpen,r=n.libraries;return(0,o.jsxs)(M.Vq,{title:"Dagster library versions",icon:"info",isOpen:e,onClose:function(){return t(!1)},style:{width:"600px"},children:[(0,o.jsxs)(h.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Libray"}),(0,o.jsx)("th",{children:"Version"})]})}),(0,o.jsx)("tbody",{children:r.map(function(n){return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:n.name}),(0,o.jsx)("td",{children:n.version})]},n.name)})})]}),(0,o.jsx)(M.cN,{topBorder:!0,children:(0,o.jsx)(v.zx,{onClick:function(){return t(!1)},intent:"primary",children:"Done"})})]})},CodeLocationConfig=function(n){var e=n.displayMetadata,t=s.useMemo(function(){var n=e.reduce(function(n,e){return(0,D._)((0,z._)({},n),(0,V._)({},e.key,e.value))},{});return F.Pz(n)},[e]);return(0,o.jsx)(B.u,{value:t,options:{readOnly:!0,lineNumbers:!0,mode:"yaml"},theme:["config-editor"]})},U=t(35157),W=t(38153);function _templateObject(){var n=(0,f._)(["\n  :hover,\n  :active {\n    outline: none;\n    text-decoration: none;\n  }\n"]);return _templateObject=function(){return n},n}var RepositoryCountTags=function(n){var e=n.repo,t=n.repoAddress,r=e.assetGroups.length,i=e.pipelines.filter(function(n){var e=n.name;return!(0,U.pv)(e)}).length,s=e.schedules.length,c=e.sensors.length;return(0,o.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,o.jsx)(C.u,{content:1===r?"1 asset group":"".concat(r," asset groups"),placement:"top",children:(0,o.jsx)(G,{to:(0,W.$U)(t,"/assets"),children:(0,o.jsx)(w.V,{interactive:!0,icon:"asset_group",children:r})})}),(0,o.jsx)(C.u,{content:1===i?"1 job":"".concat(i," jobs"),placement:"top",children:(0,o.jsx)(G,{to:(0,W.$U)(t,"/jobs"),children:(0,o.jsx)(w.V,{interactive:!0,icon:"job",children:i})})}),(0,o.jsx)(C.u,{content:1===s?"1 schedule":"".concat(s," schedules"),placement:"top",children:(0,o.jsx)(G,{to:(0,W.$U)(t,"/schedules"),children:(0,o.jsx)(w.V,{interactive:!0,icon:"schedule",children:s})})}),(0,o.jsx)(C.u,{content:1===c?"1 sensor":"".concat(c," sensors"),placement:"top",children:(0,o.jsx)(G,{to:(0,W.$U)(t,"/sensors"),children:(0,o.jsx)(w.V,{interactive:!0,icon:"sensors",children:c})})})]})},G=(0,k.ZP)(_.rU).withConfig({componentId:"sc-44c0a391-0"})(_templateObject()),J=t(70958),Z=t(37160),$=t(44254);function CodeLocationRowSet_templateObject(){var n=(0,f._)(["\n  width: 100%;\n  color: ",";\n  font-size: 12px;\n\n  .bp4-popover2-target {\n    overflow: hidden;\n  }\n\n  button {\n    background: transparent;\n    border: none;\n    color: ",";\n    cursor: pointer;\n    font-size: 12px;\n    overflow: hidden;\n    padding: 0;\n    margin: 0;\n    width: 100%;\n\n    :focus {\n      outline: none;\n    }\n  }\n"]);return CodeLocationRowSet_templateObject=function(){return n},n}var CodeLocationRowSet=function(n){var e=n.locationNode,t=e.name,r=e.locationOrLoadError;if(!r||(null==r?void 0:r.__typename)==="PythonError")return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{maxWidth:"400px",color:y.w.Gray500},children:(0,o.jsx)(b.g,{text:t})}),(0,o.jsx)("td",{children:(0,o.jsx)(LocationStatus,{location:t,locationOrError:e})}),(0,o.jsx)("td",{style:{whiteSpace:"nowrap"},children:(0,o.jsx)(N.C,{unixTimestamp:e.updatedTimestamp})}),(0,o.jsx)("td",{children:"â€“"}),(0,o.jsx)("td",{style:{width:"180px"},children:(0,o.jsxs)(v.zH,{children:[(0,o.jsx)(ReloadButton,{location:t}),(0,o.jsx)(CodeLocationMenu,{locationNode:e})]})})]});var i=(0,m._)(r.repositories).sort(function(n,e){return n.name.localeCompare(e.name)});return(0,o.jsx)(o.Fragment,{children:i.map(function(n){var r=(0,Z.kQ)(n.name,t),i=(0,m._)(e.displayMetadata).concat((0,m._)(n.displayMetadata));return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{maxWidth:"400px"},children:(0,o.jsxs)(a.x,{flex:{direction:"column",gap:4},children:[(0,o.jsx)("div",{style:{fontWeight:500},children:(0,o.jsx)(_.rU,{to:(0,W.$U)(r),children:(0,o.jsx)(b.g,{text:(0,$.Uz)(r)})})}),(0,o.jsx)(ImageName,{metadata:i}),(0,o.jsx)(ModuleOrPackageOrFile,{metadata:i})]})}),(0,o.jsx)("td",{children:(0,o.jsx)(LocationStatus,{location:n.name,locationOrError:e})}),(0,o.jsx)("td",{style:{whiteSpace:"nowrap"},children:(0,o.jsx)(N.C,{unixTimestamp:e.updatedTimestamp})}),(0,o.jsx)("td",{children:(0,o.jsx)(RepositoryCountTags,{repo:n,repoAddress:r})}),(0,o.jsx)("td",{style:{width:"180px"},children:(0,o.jsxs)(v.zH,{children:[(0,o.jsx)(ReloadButton,{location:t}),(0,o.jsx)(CodeLocationMenu,{locationNode:e})]})})]},(0,$.Uz)(r))})})},ImageName=function(n){var e=n.metadata,t=(0,R.m)(),r=e.find(function(n){return"image"===n.key}),i=(null==r?void 0:r.value)||"",a=s.useCallback((0,p._)(function(){return(0,g.Jh)(this,function(n){switch(n.label){case 0:return t(i),[4,(0,I.B7)({intent:"success",icon:"done",message:"Image string copied!"})];case 1:return n.sent(),[2]}})}),[t,i]);return r?(0,o.jsxs)(A,{flex:{direction:"row",gap:4},children:[(0,o.jsx)("span",{style:{fontWeight:500},children:"image:"}),(0,o.jsx)(C.u,{content:"Click to copy",placement:"top",display:"block",children:(0,o.jsx)("button",{onClick:a,children:(0,o.jsx)(b.g,{text:r.value})})})]}):null},A=(0,k.ZP)(a.x).withConfig({componentId:"sc-baa8191-0"})(CodeLocationRowSet_templateObject(),y.w.Gray700,y.w.Gray700),ModuleOrPackageOrFile=function(n){var e=n.metadata.find(function(n){var e=n.key;return"module_name"===e||"package_name"===e||"python_file"===e});return e?(0,o.jsxs)(a.x,{flex:{direction:"row",gap:4},style:{width:"100%",color:y.w.Gray700,fontSize:12},children:[(0,o.jsxs)("span",{style:{fontWeight:500},children:[e.key,":"]}),(0,o.jsx)(b.g,{text:e.value})]}):null},LocationStatus=function(n){var e,t=n.location,r=n.locationOrError,i=(0,j._)(s.useState(!1),2),c=i[0],l=i[1],d=s.useMemo(function(){return(0,S.je)(t)},[t]),u=(0,S.Dc)({scope:"location",reloadFn:d}),x=u.reloading,h=u.tryReload;return"LOADING"===r.loadStatus?r.locationOrLoadError?(0,o.jsx)(w.V,{minimal:!0,intent:"primary",children:"Updating..."}):(0,o.jsx)(w.V,{minimal:!0,intent:"primary",children:"Loading..."}):(null===(e=r.locationOrLoadError)||void 0===e?void 0:e.__typename)==="PythonError"?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.x,{flex:{alignItems:"center",gap:12},children:[(0,o.jsx)(w.V,{minimal:!0,intent:"danger",children:"Failed"}),(0,o.jsx)(O.Z,{onClick:function(){return l(!0)},children:(0,o.jsx)("span",{style:{fontSize:"14px"},children:"View error"})})]}),(0,o.jsx)(J.p,{location:t,isOpen:c,error:r.locationOrLoadError,reloading:x,onDismiss:function(){return l(!1)},onTryReload:function(){return h()}})]}):(0,o.jsx)(w.V,{minimal:!0,intent:"success",children:"Loaded"})},ReloadButton=function(n){var e=n.location;return(0,o.jsx)(E.s,{location:e,ChildComponent:function(n){var e=n.reloading,t=n.tryReload,r=n.hasReloadPermission;return(0,o.jsx)(a.x,{flex:{direction:"row",alignItems:"center",gap:4},children:(0,o.jsx)(C.u,{content:r?"":E.H,canShow:!r,useDisabledButtonTooltipFix:!0,children:(0,o.jsx)(v.zx,{icon:(0,o.jsx)(L.JO,{name:"refresh"}),disabled:!r,loading:e,onClick:function(){return t()},children:"Reload"})})})}})},H=t(51969),RepositoryLocationsList=function(){var n=s.useContext(H.C5),e=n.locationEntries;return n.loading&&!e.length?(0,o.jsxs)(a.x,{flex:{gap:8,alignItems:"center"},padding:{horizontal:24},children:[(0,o.jsx)(u.$,{purpose:"body-text"}),(0,o.jsx)("div",{children:"Loading..."})]}):e.length?(0,o.jsxs)(h.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Name"}),(0,o.jsx)("th",{children:"Status"}),(0,o.jsx)("th",{children:"Updated"}),(0,o.jsx)("th",{children:"Definitions"}),(0,o.jsx)("th",{children:"Actions"})]})}),(0,o.jsx)("tbody",{children:e.map(function(n){return(0,o.jsx)(CodeLocationRowSet,{locationNode:n},n.name)})})]}):(0,o.jsx)(a.x,{padding:{vertical:32},children:(0,o.jsx)(x.t,{icon:"folder",title:"No code locations",description:"When you add a code location, your definitions will appear here."})})},q=t(74897),Q=t(4120),CodeLocationsPage=function(){(0,c.Px)(),(0,l.j)("Code locations");var n=s.useContext(q.N).pageTitle,e=s.useContext(H.C5),t=e.locationEntries,u=e.loading,x=s.useMemo(function(){var n=0;return t.forEach(function(e){var t;e.locationOrLoadError&&(null===(t=e.locationOrLoadError)||void 0===t?void 0:t.__typename)!=="PythonError"?n+=e.locationOrLoadError.repositories.length:n+=1}),n},[t]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.m,{title:(0,o.jsx)(i.X6,{children:n}),tabs:(0,o.jsx)(Q.Z,{tab:"locations"})}),(0,o.jsxs)(a.x,{padding:{vertical:16,horizontal:24},flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},style:{height:"64px"},children:[(0,o.jsx)(i.pm,{id:"repository-locations",children:u||!x?"Code locations":1===x?"1 code location":"".concat(x," code locations")}),(0,o.jsx)(d.i,{})]}),(0,o.jsx)(RepositoryLocationsList,{})]})},Y=CodeLocationsPage},4120:function(n,e,t){t.d(e,{Z:function(){return InstanceTabs}});var o=t(52322),r=t(18399),i=t(56024),a=t(2784),s=t(20775),c=t(55237),l=t(71897),d=t(86412),u=t(29255),x=t(77334),h=a.memo(function(){var n=a.useContext(u.Z).daemons;return n?(0,o.jsx)(x.a,{content:n.content,position:"bottom",modifiers:{offset:{enabled:!0,options:{offset:[0,28]}}},children:(0,o.jsx)(l.JO,{name:"warning",color:d.w.Yellow500})}):null}),p=t(43180),j=t(63832),f=a.memo(function(n){var e=n.placeholder,t=a.useContext(u.Z).codeLocations;return t?"spinner"===t.type?(0,o.jsx)(p.u,{content:t.content,placement:"bottom",children:(0,o.jsx)(j.$,{purpose:"body-text",fillColor:d.w.Gray300})}):(0,o.jsx)(x.a,{content:t.content,position:"bottom",modifiers:{offset:{enabled:!0,options:{offset:[0,28]}}},children:(0,o.jsx)(l.JO,{name:"warning",color:d.w.Yellow500})}):e?(0,o.jsx)("div",{style:{width:"16px"}}):null}),m=t(40049),g=t(74897),y=t(78945),InstanceTabs=function(n){var e=n.refreshState,t=n.tab,l=a.useContext(g.N).healthTitle,d=(0,y._)(),u=(0,s.gV)().flagInstanceConcurrencyLimits;return(0,o.jsxs)(r.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,o.jsxs)(i.mQ,{selectedTabId:t,children:[(0,o.jsx)(m.f,{id:"locations",title:"Code locations",to:"/locations",icon:(0,o.jsx)(f,{placeholder:!1})}),(0,o.jsx)(m.f,{id:"health",title:l,to:"/health",icon:(0,o.jsx)(h,{})}),d&&u?(0,o.jsx)(m.f,{id:"concurrency",title:"Concurrency limits",to:"/concurrency"}):null,d?(0,o.jsx)(m.f,{id:"config",title:"Configuration",to:"/config"}):null]}),e?(0,o.jsx)(r.x,{padding:{bottom:8},children:(0,o.jsx)(c.xi,{refreshState:e})}):null]})}},78945:function(n,e,t){t.d(e,{_:function(){return useCanSeeConfig}});var o=t(73235),r=t(40794),i=t(60138);function _templateObject(){var n=(0,o._)(["\n  query InstanceConfigHasInfo {\n    instance {\n      id\n      hasInfo\n    }\n  }\n"]);return _templateObject=function(){return n},n}var useCanSeeConfig=function(){var n=(0,r.a)(a).data;return!!(null==n?void 0:n.instance.hasInfo)},a=(0,i.Ps)(_templateObject())},39852:function(n,e,t){t.d(e,{i:function(){return ReloadAllButton}});var o=t(58467),r=t(52322),i=t(43180),a=t(9001),s=t(71897),c=t(10952),l=t(2784),d=t(54949),u=t(56266),x=t(40092),h=t(70958),ReloadAllButton=function(n){var e=n.label,t=void 0===e?"Reload all":e,p=(0,d.WB)(),j=p.permissions.canReloadWorkspace,f=p.disabledReasons,m=(0,x.Dc)({scope:"workspace",reloadFn:x.rL}),g=m.reloading,y=m.tryReload,b=m.error,v=m.errorLocationId,C=(0,o._)(l.useState(!!b),2),w=C[0],O=C[1];return(l.useEffect(function(){return O(!!b)},[b]),j)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.zx,{onClick:y,icon:(0,r.jsx)(s.JO,{name:"refresh"}),loading:g,intent:"none",children:t}),v?(0,r.jsx)(h.V,{error:b,location:v,reloading:g,onTryReload:y,onDismiss:function(){return O(!1)},isOpen:w}):(0,r.jsxs)(c.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:w,children:[(0,r.jsx)(c.a7,{children:b&&(0,r.jsx)(u.T9,{error:b})}),(0,r.jsx)(c.cN,{children:(0,r.jsx)(a.zx,{onClick:function(){return O(!1)},children:"Dismiss"})})]})]}):(0,r.jsx)(i.u,{content:f.canReloadWorkspace,children:(0,r.jsx)(a.zx,{icon:(0,r.jsx)(s.JO,{name:"refresh"}),disabled:!0,intent:"none",children:t})})}}}]);
//# sourceMappingURL=577.326b097bd78ac0ea.js.map