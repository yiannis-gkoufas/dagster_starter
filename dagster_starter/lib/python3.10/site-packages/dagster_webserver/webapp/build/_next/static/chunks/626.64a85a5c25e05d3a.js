"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{99046:function(e,n,t){t.d(n,{I:function(){return ifPlural}});function ifPlural(e,n,t){return 1===e?n:t}},17212:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(52322),i=t(57830),s=t(18399),o=t(37783),a=t(2784),l=t(61935),c=t(21485),u=t(98349),d=t(6315),p=t(38917),h=t(16148),f=t(87812),m=a.memo(function(e){var n,t=e.name,m=e.run,x=e.showHover,j=e.showButton,g=e.showSummary,v=void 0===g||g,b=m.status,y=a.useMemo(function(){switch(b){case l.VOA.SUCCESS:return"success";case l.VOA.CANCELED:case l.VOA.CANCELING:case l.VOA.FAILURE:return"danger";default:return"none"}},[b]);return(0,r.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-start",gap:16},children:[(0,r.jsxs)(s.x,{flex:{direction:"column",alignItems:"flex-start",gap:4},children:[(0,r.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(n=(0,r.jsx)(i.V,{intent:y,children:(0,r.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)(c.K9,{status:m.status,size:10}),(0,r.jsx)(p.Zr,{run:m})]})}),void 0!==x&&x?(0,r.jsx)(o.J,{position:"top",interactionKind:"hover",content:(0,r.jsx)("div",{children:(0,r.jsx)(u.qL,{run:m,name:t})}),hoverOpenDelay:100,children:n}):n),v?(0,r.jsx)(p.Tw,{run:m}):null]}),v&&(d.hd.has(m.status)||d.Ys.has(m.status))?(0,r.jsx)(f.I,{runId:m.id}):void 0]}),void 0===j||j?(0,r.jsx)(h.A,{to:"/runs/".concat(m.id),children:"View run"}):null]})})},87812:function(e,n,t){t.d(n,{I:function(){return StepSummaryForRun}});var r=t(73235),i=t(52322),s=t(40794),o=t(60138),a=t(81308),l=t(86412),c=t(19126),u=t.n(c),d=t(2784),p=t(47933),h=t(61935),f=t(6315);function _templateObject(){var e=(0,r._)(["\n  query StepSummaryForRunQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        stepStats {\n          endTime\n          stepKey\n          status\n        }\n      }\n    }\n  }\n"]);return _templateObject=function(){return e},e}var StepSummaryForRun=function(e){var n=e.runId,t=(0,s.a)(m,{variables:{runId:n}}).data,r=null==t?void 0:t.pipelineRunOrError,o=(null==r?void 0:r.__typename)==="Run"?r.status:null,c=d.useMemo(function(){if((null==r?void 0:r.__typename)!=="Run")return[];var e=r.status;return f.hd.has(e)?r.stepStats.filter(function(e){return e.status===h.SGm.FAILURE}):f.Ys.has(e)?r.stepStats.filter(function(e){return e.status===h.SGm.IN_PROGRESS}):[]},[r]),x=c.length;if(!x||!o)return null;if(f.hd.has(o)){if(1===x){var j=c[0],g=j.endTime?u().stringify({focusedTime:Math.floor(1e3*j.endTime)},{addQueryPrefix:!0}):"";return(0,i.jsxs)(a.YS,{color:l.w.Gray500,children:["Failed at ",(0,i.jsx)(p.rU,{to:"/runs/".concat(n).concat(g),children:j.stepKey})]})}return(0,i.jsxs)(a.YS,{color:l.w.Gray500,children:["Failed at ",(0,i.jsxs)(p.rU,{to:"/runs/".concat(n),children:[x," steps"]})]})}if(f.Ys.has(o)){if(1===x){var v=c[0],b=v.endTime?u().stringify({focusedTime:Math.floor(1e3*v.endTime)},{addQueryPrefix:!0}):"";return(0,i.jsxs)(a.YS,{color:l.w.Gray500,children:["In progress at ",(0,i.jsx)(p.rU,{to:"/runs/".concat(n).concat(b),children:v.stepKey})]})}return(0,i.jsxs)(a.YS,{color:l.w.Gray500,children:["In progress at ",(0,i.jsxs)(p.rU,{to:"/runs/".concat(n),children:[x," steps"]})]})}return null},m=(0,o.Ps)(_templateObject())},1813:function(e,n,t){t.d(n,{V2:function(){return q},WH:function(){return BackfillActionsMenu},qG:function(){return backfillCanCancelRuns}});var r=t(81862),i=t(58467),s=t(73235),o=t(22970),a=t(52322),l=t(33379),c=t(60138),u=t(59692),d=t(37783),p=t(44678),h=t(9001),f=t(71897),m=t(2784),x=t(7267),j=t(66904),g=t(19211),v=t(56266),b=t(61935),y=t(49313),S=t(10952),w=t(79321),_=t(6871),k=t(84495),O=t(37160),R=t(56121);function _templateObject(){var e=(0,s._)(["\n  fragment BackfillStepStatusDialogBackfillFragment on PartitionBackfill {\n    id\n    partitionNames\n    partitionSet {\n      name\n      pipelineName\n      repositoryOrigin {\n        repositoryName\n        repositoryLocationName\n      }\n    }\n  }\n"]);return _templateObject=function(){return e},e}function backfillCanShowStepStatus(e){return!!e&&null!==e.partitionSet&&null!==e.partitionNames}var BackfillStepStatusDialog=function(e){var n=e.backfill,t=e.onClose;return(0,a.jsxs)(S.Vq,{isOpen:!!(null==n?void 0:n.partitionSet),title:"Step status for backfill: ".concat(null==n?void 0:n.id),onClose:t,style:{width:"80vw"},children:[function(){if(!backfillCanShowStepStatus(n))return null;var e=(0,O.kQ)(n.partitionSet.repositoryOrigin.repositoryName,n.partitionSet.repositoryOrigin.repositoryLocationName);return(0,a.jsx)(BackfillStepStatusDialogContent,{backfill:n,partitionSet:n.partitionSet,partitionNames:n.partitionNames,repoAddress:e,onClose:t})}(),(0,a.jsx)(S.cN,{topBorder:!0,children:(0,a.jsx)(h.zx,{onClick:t,children:"Done"})})]})},C=(0,c.Ps)(_templateObject()),BackfillStepStatusDialogContent=function(e){var n=e.backfill,t=e.partitionSet,r=e.partitionNames,s=e.repoAddress,o=(0,i._)(m.useState(60),2),l=o[0],c=o[1],u=(0,i._)(m.useState(0),2),d=u[0],p=u[1],h=m.useMemo(function(){return[{token:"tag",value:"dagster/backfill=".concat(n.id)}]},[n.id]),f=(0,_.T)({partitionSetName:t.name,partitionTagName:k.H.Partition,partitionNames:r,pageSize:l,runsFilter:h,repositorySelector:(0,R.$)(s),jobName:t.pipelineName,offset:d,skipQuery:!n});return(0,a.jsx)(w.ux,{partitionNames:r,partitions:f,pipelineName:null==t?void 0:t.pipelineName,repoAddress:s,setPageSize:c,offset:d,setOffset:p})},P=t(87612),T=t(85333),I=t(6692),E=t(40794),N=t(91195),D=t(6315),A=t(16322),F=t(36691);function BackfillTerminationDialog_templateObject(){var e=(0,s._)(["\n  fragment BackfillTerminationDialogBackfillFragment on PartitionBackfill {\n    id\n    status\n    isAssetBackfill\n    numCancelable\n  }\n"]);return BackfillTerminationDialog_templateObject=function(){return e},e}function _templateObject1(){var e=(0,s._)(["\n  mutation CancelBackfill($backfillId: String!) {\n    cancelPartitionBackfill(backfillId: $backfillId) {\n      ... on CancelBackfillSuccess {\n        backfillId\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _templateObject1=function(){return e},e}var BackfillTerminationDialog=function(e){var n,t=e.backfill,s=e.onClose,c=e.onComplete,u=(0,i._)((0,l.D)(L),1)[0],d=(0,E.a)(F.cv,{variables:{backfillId:(null==t?void 0:t.id)||""},notifyOnNetworkStatusChange:!0,skip:!t}).data,p=(0,i._)(m.useState(!1),2),f=p[0],x=p[1],j=m.useMemo(function(){if(!t||!d||"PartitionBackfill"!==d.partitionBackfillOrError.__typename)return{};var e,n=null===(e=d.partitionBackfillOrError.partitionStatuses)||void 0===e?void 0:e.results.filter(function(e){return e.runStatus&&e.runId&&D.oV.has(e.runStatus)});return(null==n?void 0:n.reduce(function(e,n){return n&&n.runId?(0,I._)((0,T._)({},e),(0,P._)({},n.runId,!0)):e},{}))||{}},[t,d]);if(!t||!d)return null;var g=t.numCancelable,v=(n=(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return x(!0),[4,u({variables:{backfillId:t.id}})];case 1:return e.sent(),c(),x(!1),s(),[2]}})}),function(){return n.apply(this,arguments)});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(S.Vq,{isOpen:!!t&&t.status!==b.Jv3.CANCELED&&(t.isAssetBackfill||!!g),title:"Cancel backfill",onClose:s,children:[t.isAssetBackfill?(0,a.jsx)(S.a7,{children:"Confirm cancellation of asset backfill? This will mark unfinished runs as canceled."}):(0,a.jsxs)(S.a7,{children:["There ",1===g?"is 1 partition ":"are ".concat(g," partitions "),"yet to be queued or launched."]}),(0,a.jsxs)(S.cN,{children:[(0,a.jsx)(h.zx,{intent:"none",onClick:s,children:"Close"}),f?(0,a.jsx)(h.zx,{intent:"danger",disabled:!0,children:"Canceling..."}):(0,a.jsx)(h.zx,{intent:"danger",onClick:v,children:"Cancel backfill"})]})]}),j&&(0,a.jsx)(A.A,{isOpen:!!t&&(!g||"REQUESTED"!==t.status)&&!!Object.keys(j).length,onClose:s,onComplete:c,selectedRuns:j})]})},z=(0,c.Ps)(BackfillTerminationDialog_templateObject()),L=(0,c.Ps)(_templateObject1(),N.B),U=t(56101);function BackfillActionsMenu_templateObject(){var e=(0,s._)(["\n  fragment BackfillActionsBackfillFragment on PartitionBackfill {\n    id\n    hasCancelPermission\n    hasResumePermission\n    isAssetBackfill\n    status\n    numCancelable\n\n    ...BackfillStepStatusDialogBackfillFragment\n    ...BackfillTerminationDialogBackfillFragment\n  }\n\n  ","\n  ","\n"]);return BackfillActionsMenu_templateObject=function(){return e},e}function backfillCanCancelRuns(e,n){if(!e.hasCancelPermission||!n)return!1;var t=n[b.VOA.QUEUED]||0,r=n[b.VOA.STARTED]||0;return t>0||r>0}var BackfillActionsMenu=function(e){var n,t=e.backfill,s=e.canCancelRuns,c=e.refetch,S=(0,x.k6)(),w=(0,y.it)([{token:"tag",value:"dagster/backfill=".concat(t.id)}]),_=(0,i._)(m.useState(!1),2),k=_[0],O=_[1],R=(0,i._)(m.useState(!1),2),C=R[0],P=R[1],T=(0,i._)((0,l.D)(U.g),1)[0],I=(n=(0,r._)(function(){var e,n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,T({variables:{backfillId:t.id}})];case 1:if(!((e=r.sent().data)&&"ResumeBackfillSuccess"===e.resumePartitionBackfill.__typename))return[3,2];return c(),[3,6];case 2:if(!(e&&"UnauthorizedError"===e.resumePartitionBackfill.__typename))return[3,4];return[4,(0,g.B7)({message:(0,a.jsx)(u.Z,{direction:"column",spacing:4,children:(0,a.jsx)("div",{children:"Attempted to retry the backfill in read-only mode. This backfill was not retried."})}),icon:"error",intent:"danger"})];case 3:return r.sent(),[3,6];case 4:if(!(e&&"PythonError"===e.resumePartitionBackfill.__typename))return[3,6];return n=e.resumePartitionBackfill,[4,(0,g.B7)({message:(0,a.jsx)("div",{children:"An unexpected error occurred. This backfill was not retried."}),icon:"error",intent:"danger",action:{text:"View error",onClick:function(){return(0,j._)({body:(0,a.jsx)(v.T9,{error:n})})}}})];case 5:r.sent(),r.label=6;case 6:return[2]}})}),function(){return n.apply(this,arguments)}),E=t.hasCancelPermission&&(t.isAssetBackfill&&t.status===b.Jv3.REQUESTED||t.numCancelable>0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.J,{position:"bottom-right",content:(0,a.jsxs)(p.v2,{children:[(0,a.jsx)(p.sN,{text:"View backfill runs",icon:"settings_backup_restore",onClick:function(){return S.push(w)}}),(0,a.jsx)(p.sN,{disabled:!backfillCanShowStepStatus(t),text:"View step status",icon:"view_list",onClick:function(){P(!0)}}),(0,a.jsx)(p.sN,{disabled:!(t.hasResumePermission&&t.status===b.Jv3.FAILED&&t.partitionSet),text:"Resume failed backfill",title:"Submits runs for all partitions in the backfill that do not have a corresponding run. Does not retry failed runs.",icon:"refresh",onClick:function(){return I()}}),(0,a.jsx)(p.sN,{text:E?"Cancel backfill submission":"Terminate unfinished runs",icon:"cancel",intent:"danger",disabled:!(E||s),onClick:function(){return O(!0)}})]}),children:(0,a.jsx)(h.zx,{icon:(0,a.jsx)(f.JO,{name:"expand_more"})})}),(0,a.jsx)(BackfillStepStatusDialog,{backfill:C?t:void 0,onClose:function(){return P(!1)}}),(0,a.jsx)(BackfillTerminationDialog,{backfill:k?t:void 0,onClose:function(){return O(!1)},onComplete:function(){return c()}})]})},q=(0,c.Ps)(BackfillActionsMenu_templateObject(),C,z)},36691:function(e,n,t){t.d(n,{FW:function(){return BackfillRow},cv:function(){return V}});var r=t(85333),i=t(6692),s=t(58467),o=t(73235),a=t(52322),l=t(83601),c=t(60138),u=t(86412),d=t(81308),p=t(18399),h=t(71897),f=t(57830),m=t(24471),x=t.n(m),j=t(2784),g=t(47933),v=t(7267),b=t(35505),y=t(66904),S=t(56266),w=t(55237),_=t(35157),k=t(61935),O=t(52246),R=t(90818),C=t(51892),P=t(39222),T=t(6315),I=t(65435),E=t(49313),N=t(30301),D=t(86839),A=t(51969),F=t(37160),z=t(44254),L=t(38153),U=t(1813),q=t(68651);function _templateObject(){var e=(0,o._)(["\n  border: none;\n  background: none;\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n\n  :focus {\n    outline: none;\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,o._)(["\n  query SingleBackfillCountsQuery($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionStatusCounts {\n          runStatus\n          count\n        }\n      }\n    }\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,o._)(["\n  query SingleBackfillQuery($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionStatuses {\n          ...PartitionStatusesForBackfill\n        }\n      }\n    }\n  }\n\n  fragment PartitionStatusesForBackfill on PartitionStatuses {\n    results {\n      id\n      partitionName\n      runId\n      runStatus\n    }\n  }\n"]);return _templateObject2=function(){return e},e}var BackfillRow=function(e){return null===e.backfill.numPartitions||null===e.backfill.partitionNames||e.backfill.isAssetBackfill?(0,a.jsx)(BackfillRowContent,(0,i._)((0,r._)({},e),{counts:null,statuses:null,statusQueryResult:null})):(0,a.jsx)(BackfillRowLoader,{backfillId:e.backfill.id,numPartitions:e.backfill.numPartitions,children:function(n){return(0,a.jsx)(BackfillRowContent,(0,r._)({},e,n))}})},BackfillRowLoader=function(e){var n=e.backfillId,t=e.numPartitions,r=(0,l.t)(V,{variables:{backfillId:n},notifyOnNetworkStatusChange:!0}),i=(0,l.t)($,{variables:{backfillId:n},notifyOnNetworkStatusChange:!0}),o=(0,s._)((t||0)>B?i:r,2),a=o[0],c=o[1];(0,D.v5)(a),(0,w.C4)(c,w.dT);var u=c.data,d=j.useMemo(function(){if((null==u?void 0:u.partitionBackfillOrError.__typename)!=="PartitionBackfill")return{counts:null,statuses:null};if("partitionStatusCounts"in u.partitionBackfillOrError){var e;return{counts:Object.fromEntries(u.partitionBackfillOrError.partitionStatusCounts.map(function(e){return[e.runStatus,e.count]})),statuses:null}}var n=(null===(e=u.partitionBackfillOrError.partitionStatuses)||void 0===e?void 0:e.results)||null;return{counts:x()(n,function(e){return e.runStatus}),statuses:n}},[u]),p=d.counts,h=d.statuses;return e.children({counts:p,statuses:h,statusQueryResult:c})},BackfillRowContent=function(e){var n=e.backfill,t=e.allPartitions,r=e.showBackfillTarget,i=e.onShowPartitionsRequested,s=e.refetch,o=e.counts,l=e.statuses,c=e.statusQueryResult,p=n.partitionSet?(0,F.kQ)(n.partitionSet.repositoryOrigin.repositoryName,n.partitionSet.repositoryOrigin.repositoryLocationName):null;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{style:{width:120},children:(0,a.jsx)(d.fv,{style:{fontSize:"16px",lineHeight:"18px"},children:(0,a.jsx)(g.rU,{to:n.isAssetBackfill?"/overview/backfills/".concat(n.id):(0,E.it)([{token:"tag",value:"dagster/backfill=".concat(n.id)}]),children:n.id})})}),(0,a.jsx)("td",{style:{width:220},children:n.timestamp?(0,a.jsx)(N.v,{timestamp:n.timestamp}):"-"}),r?(0,a.jsx)("td",{style:{width:"20%"},children:(0,a.jsx)(BackfillTarget,{backfill:n,repoAddress:p})}):null,(0,a.jsx)("td",{style:{width:t?300:140},children:(0,a.jsx)(BackfillRequestedRange,{backfill:n,allPartitions:t,onExpand:function(){return i(n)}})}),(0,a.jsx)("td",{style:{width:160},children:(0,a.jsx)(P.f,{tags:n.tags,repoAddress:p})}),(0,a.jsx)("td",{style:{width:140},children:(null==c?void 0:c.loading)?(0,a.jsx)("div",{style:{color:u.w.Gray500},children:"Loading"}):(0,a.jsx)(BackfillStatusTag,{backfill:n,counts:o})}),(0,a.jsx)("td",{children:n.isValidSerialization?(null==c?void 0:c.loading)?(0,a.jsx)("div",{style:{color:u.w.Gray500},children:"Loading"}):o?(0,a.jsx)(BackfillRunStatus,{backfill:n,counts:o,statuses:l}):(0,a.jsx)("div",{style:{color:u.w.Gray500},children:"–"}):(0,a.jsx)("p",{children:"A partitions definition has changed since this backfill ran."})}),(0,a.jsx)("td",{children:(0,a.jsx)(U.WH,{backfill:n,canCancelRuns:(0,U.qG)(n,o),refetch:s})})]})},B=1e3,BackfillRunStatus=function(e){var n=e.backfill,t=e.statuses,r=e.counts,i=(0,v.k6)(),o=Object.entries(r).reduce(function(e,n){var t=(0,s._)(n,2),r=t[0],i=t[1];return e[r]=(e[r]||0)+i,e},{}),l=j.useMemo(function(){return{runStatusForPartitionKey:function(e){var n;return(null==t?void 0:null===(n=t.filter(function(n){return n.partitionName===e})[0])||void 0===n?void 0:n.runStatus)||k.VOA.NOT_STARTED}}},[t]);return t&&n.partitionNames?(0,a.jsx)(O.b,{partitionNames:n.partitionNames,health:l,splitPartitions:!0,onClick:function(e){var n=t.find(function(n){return n.partitionName===e});(null==n?void 0:n.runId)&&i.push("/runs/".concat(n.runId))}}):(0,a.jsx)(I.Y,{succeededCount:o[k.VOA.SUCCESS]||0,inProgressCount:o[k.VOA.STARTED]||0,failedCount:o[k.VOA.FAILURE]||0})},BackfillTarget=function(e){var n=e.backfill,t=e.repoAddress,r=(0,A.Ux)(t),i=n.assetSelection,s=n.partitionSet,o=n.partitionSetName,l=(0,_.pv)(o||"");return(0,a.jsxs)(p.x,{flex:{direction:"column",gap:8},children:[l?null:s&&r?(0,a.jsx)(g.rU,{style:{fontWeight:500},to:(0,L.jT)({repoName:s.repositoryOrigin.repositoryName,repoLocation:s.repositoryOrigin.repositoryLocationName,pipelineName:s.pipelineName,isJob:(0,A.E8)(r,s.pipelineName),path:"/partitions?partitionSet=".concat(encodeURIComponent(s.name))}),children:s.name}):o?(0,a.jsx)("span",{style:{fontWeight:500},children:o}):null,(0,a.jsxs)(p.x,{flex:{direction:"column",gap:4},style:{fontSize:"12px"},children:[t?(0,a.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},style:{fontSize:"12px"},children:[(0,a.jsx)(h.JO,{name:"repo",color:u.w.Gray400}),(0,a.jsx)(g.rU,{to:(0,L.$U)(t),children:(0,z.Uz)(t)})]}):void 0,(null==i?void 0:i.length)?(0,a.jsx)(C.h,{assetKeys:i,dialogTitle:"Assets in backfill"}):s&&r?(0,a.jsx)(R.h,{showIcon:!0,size:"small",pipelineName:s.pipelineName,pipelineHrefContext:{name:s.repositoryOrigin.repositoryName,location:s.repositoryOrigin.repositoryLocationName},isJob:(0,A.E8)(r,s.pipelineName)}):null]})]})},BackfillRequestedRange=function(e){var n=e.allPartitions,t=e.backfill,r=e.onExpand,i=t.partitionNames,s=t.numPartitions;if(null===s)return(0,a.jsx)("span",{});var o="".concat(s.toLocaleString()," ").concat(1===s?"partition":"partitions");return(0,a.jsxs)(p.x,{flex:{direction:"column",gap:8},children:[(0,a.jsx)("div",{children:i?(0,a.jsx)(M,{onClick:r,children:(0,a.jsx)(f.V,{intent:"primary",interactive:!0,children:o})}):(0,a.jsx)(f.V,{intent:"primary",children:o})}),n&&i&&(0,a.jsx)(RequestedPartitionStatusBar,{all:n,requested:i})]})},RequestedPartitionStatusBar=function(e){var n=e.all,t=e.requested,r=j.useMemo(function(){return{runStatusForPartitionKey:function(e){return t&&t.includes(e)?k.VOA.QUEUED:k.VOA.NOT_STARTED}}},[t]);return(0,a.jsx)(O.b,{small:!0,hideStatusTooltip:!0,partitionNames:n,health:r})},BackfillStatusTag=function(e){var n=e.backfill,t=e.counts;if(n.isAssetBackfill)return(0,a.jsx)(q.w,{backfill:n});switch(n.status){case k.Jv3.REQUESTED:return(0,a.jsx)(f.V,{children:"In progress"});case k.Jv3.FAILED:return(0,a.jsx)(p.x,{margin:{bottom:12},children:(0,a.jsx)(M,{onClick:function(){return n.error&&(0,y._)({title:"Error",body:(0,a.jsx)(S.T9,{error:n.error})})},children:(0,a.jsx)(f.V,{intent:"danger",children:"Failed"})})});case k.Jv3.COMPLETED:if(null===n.partitionNames)return(0,a.jsx)(f.V,{intent:"success",children:"Completed"});if(!t)return(0,a.jsx)("div",{style:{color:u.w.Gray500},children:"None"});if(t[k.VOA.SUCCESS]===n.partitionNames.length)return(0,a.jsx)(f.V,{intent:"success",children:"Completed"});if(Array.from(T.Ys).some(function(e){return t[e]}))return(0,a.jsx)(f.V,{intent:"primary",children:"In progress"});return(0,a.jsx)(f.V,{intent:"warning",children:"Incomplete"});case k.Jv3.CANCELING:return(0,a.jsx)(f.V,{children:"Canceling"});case k.Jv3.CANCELED:return(0,a.jsx)(f.V,{children:"Canceled"})}return(0,a.jsx)("span",{})},M=b.ZP.button.withConfig({componentId:"sc-6f0fc2e0-0"})(_templateObject()),$=(0,c.Ps)(_templateObject1()),V=(0,c.Ps)(_templateObject2())},68651:function(e,n,t){t.d(n,{w:function(){return BackfillStatusTagForPage}});var r=t(73235),i=t(52322),s=t(18399),o=t(57830);t(2784);var a=t(35505),l=t(66904),c=t(56266),u=t(61935);function _templateObject(){var e=(0,r._)(["\n  border: none;\n  background: none;\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n\n  :focus {\n    outline: none;\n  }\n"]);return _templateObject=function(){return e},e}var BackfillStatusTagForPage=function(e){var n=e.backfill,errorState=function(e){return(0,i.jsx)(s.x,{margin:{bottom:12},children:(0,i.jsx)(d,{onClick:function(){return r&&(0,l._)({title:"Error",body:(0,i.jsx)(c.T9,{error:r})})},children:(0,i.jsx)(o.V,{intent:"danger",children:e})})})},t=n.status,r=n.error;switch(t){case u.Jv3.REQUESTED:return(0,i.jsx)(o.V,{children:"In progress"});case u.Jv3.CANCELING:return errorState("Canceling");case u.Jv3.CANCELED:return errorState("Canceled");case u.Jv3.FAILED:return errorState("Failed");case u.Jv3.COMPLETED:return(0,i.jsx)(o.V,{intent:"success",children:"Completed"});default:return(0,i.jsx)(o.V,{children:t})}},d=a.ZP.button.withConfig({componentId:"sc-310a0de5-0"})(_templateObject())},94611:function(e,n,t){t.d(n,{b:function(){return v},G:function(){return BackfillTable}});var r=t(58467),i=t(73235),s=t(52322),o=t(60138),a=t(54266),l=t(2784),c=t(91195),u=t(1813),d=t(82550),p=t(10952),h=t(3842),f=t(9001),m=t(10397),x=t(75375),j=new Intl.Collator(navigator.language,{sensitivity:"base",numeric:!0}),BackfillPartitionsRequestedDialog=function(e){var n=e.backfill,t=e.onClose;return(0,s.jsxs)(p.Vq,{isOpen:!!n,title:(0,s.jsxs)("span",{children:["Partitions requested for backfill:"," ",(0,s.jsx)("span",{style:{fontSize:"18px",fontFamily:h.b.monospace},children:null==n?void 0:n.id})]}),onClose:t,children:[(0,s.jsx)(DialogContent,{partitionNames:(null==n?void 0:n.partitionNames)||[]}),(0,s.jsx)(p.cN,{topBorder:!0,children:(0,s.jsx)(f.zx,{onClick:t,children:"Done"})})]})},DialogContent=function(e){var n=e.partitionNames,t=l.useMemo(function(){return(0,d._)(n||[]).sort(function(e,n){return j.compare(e,n)})},[n]);return(0,s.jsx)("div",{style:{height:"340px",overflow:"hidden"},children:(0,s.jsx)(x.Y,{items:t,renderItem:function(e){return(0,s.jsx)("div",{children:(0,s.jsx)(m.rd,{text:e})},e)}})})},g=t(36691);function _templateObject(){var e=(0,i._)(["\n  fragment BackfillTableFragment on PartitionBackfill {\n    id\n    status\n    isAssetBackfill\n    isValidSerialization\n    partitionNames\n    numPartitions\n    timestamp\n    partitionSetName\n    partitionSet {\n      id\n      ...PartitionSetForBackfillTable\n    }\n    assetSelection {\n      path\n    }\n    tags {\n      key\n      value\n    }\n    error {\n      ...PythonErrorFragment\n    }\n    ...BackfillActionsBackfillFragment\n  }\n\n  fragment PartitionSetForBackfillTable on PartitionSet {\n    id\n    name\n    mode\n    pipelineName\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var BackfillTable=function(e){var n=e.showBackfillTarget,t=void 0===n||n,i=e.allPartitions,o=e.backfills,c=e.refetch,u=(0,r._)(l.useState(),2),d=u[0],p=u[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.i,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Backfill ID"}),(0,s.jsx)("th",{children:"Created"}),t?(0,s.jsx)("th",{children:"Backfill target"}):null,(0,s.jsx)("th",{children:"Requested"}),(0,s.jsx)("th",{children:"Launched by"}),(0,s.jsx)("th",{children:"Backfill status"}),(0,s.jsx)("th",{children:"Run status"}),(0,s.jsx)("th",{style:{width:80}})]})}),(0,s.jsx)("tbody",{children:o.map(function(e){return(0,s.jsx)(g.FW,{showBackfillTarget:t,backfill:e,allPartitions:i,onShowPartitionsRequested:p,refetch:c},e.id)})})]}),(0,s.jsx)(BackfillPartitionsRequestedDialog,{backfill:d,onClose:function(){return p(void 0)}})]})},v=(0,o.Ps)(_templateObject(),c.B,u.V2)},91230:function(e,n,t){t.d(n,{dY:function(){return j},i0:function(){return RunList},lB:function(){return FailedRunList}});var r=t(73235),i=t(52322),s=t(40794),o=t(60138),a=t(18399),l=t(63832),c=t(92364),u=t(59692),d=t(86412),p=t(81308),h=t(43180),f=t(71897);t(2784);var m=t(91195),x=t(46253);function _templateObject(){var e=(0,r._)(["\n  fragment TickTagFragment on InstigationTick {\n    id\n    status\n    timestamp\n    skipReason\n    runIds\n    runKeys\n    error {\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,r._)(["\n  query LaunchedRunListQuery($filter: RunsFilter!) {\n    pipelineRunsOrError(filter: $filter, limit: 500) {\n      ... on PipelineRuns {\n        results {\n          ...RunTableRunFragment\n          id\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject1=function(){return e},e}var RunList=function(e){var n=e.runIds,t=(0,s.a)(g,{variables:{filter:{runIds:n}}}),r=t.data;return t.loading||!r?(0,i.jsx)(a.x,{padding:32,children:(0,i.jsx)(l.$,{purpose:"section"})}):"Runs"!==r.pipelineRunsOrError.__typename?(0,i.jsx)(a.x,{padding:32,children:(0,i.jsx)(c.t,{icon:"error",title:"An error occurred",description:r.pipelineRunsOrError.message})}):(0,i.jsx)(a.x,{padding:{bottom:8},children:(0,i.jsx)(x.AL,{runs:r.pipelineRunsOrError.results})})},FailedRunList=function(e){var n=e.originRunIds;return n&&n.length?(0,i.jsxs)(u.Z,{direction:"column",spacing:16,children:[(0,i.jsxs)(a.x,{padding:12,border:{side:"bottom",color:d.w.Gray200},children:[(0,i.jsxs)(p.uT,{children:["Failed Runs",(0,i.jsx)(h.u,{content:"Failed runs this tick reacted on and reported back to.",children:(0,i.jsx)(f.JO,{name:"info",color:d.w.Gray500})})]}),(0,i.jsx)(RunList,{runIds:n})]}),(0,i.jsxs)(a.x,{padding:12,margin:{bottom:8},children:[(0,i.jsxs)(p.uT,{children:["Requested Runs",(0,i.jsx)(h.u,{content:"Runs launched by the run requests in this tick.",children:(0,i.jsx)(f.JO,{name:"info",color:d.w.Gray500})})]}),(0,i.jsx)(c.t,{icon:"sensors",title:"No runs to display",description:"This sensor does not target a pipeline or job."})]})]}):null},j=(0,o.Ps)(_templateObject(),m.B),g=(0,o.Ps)(_templateObject1(),x.ZZ,m.B)},49280:function(e,n,t){t.d(n,{Jy:function(){return v},RX:function(){return RunStatusLink},S9:function(){return j},UD:function(){return InstigatedRunStatus},ai:function(){return g},vw:function(){return y}});var r=t(58467),i=t(73235),s=t(52322),o=t(60138),a=t(86412),l=t(59692),c=t(81308);t(2784);var u=t(47933),d=t(35505),p=t(91195),h=t(17212),f=t(21485),m=t(38917),x=t(91230);function _templateObject(){var e=(0,i._)(["\n  fragment RunStatusFragment on Run {\n    id\n    status\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,i._)(["\n  fragment InstigationStateFragment on InstigationState {\n    id\n    selectorId\n    name\n    instigationType\n    status\n    hasStartPermission\n    hasStopPermission\n    repositoryName\n    repositoryLocationName\n    typeSpecificData {\n      ... on SensorData {\n        lastRunKey\n        lastCursor\n      }\n      ... on ScheduleData {\n        cronSchedule\n      }\n    }\n    runs(limit: 1) {\n      id\n      ...RunStatusFragment\n      ...RunTimeFragment\n    }\n    status\n    ticks(limit: 1) {\n      id\n      cursor\n      ...TickTagFragment\n    }\n    runningCount\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,i._)(["\n  font-size: 13px;\n  border-spacing: 0;\n\n  &&&&& tr {\n    box-shadow: none;\n  }\n\n  &&&&& tbody > tr > td {\n    background: transparent;\n    box-shadow: none !important;\n    padding: 1px 0;\n  }\n\n  &&&&& tbody > tr > td:first-child {\n    color: ",";\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,i._)(["\n  fragment DynamicPartitionsRequestResultFragment on DynamicPartitionsRequestResult {\n    partitionsDefName\n    partitionKeys\n    skippedPartitionKeys\n    type\n  }\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,i._)(["\n  fragment HistoryTick on InstigationTick {\n    id\n    status\n    timestamp\n    endTimestamp\n    cursor\n    instigationType\n    skipReason\n    runIds\n    runs {\n      id\n      status\n      ...RunStatusFragment\n    }\n    originRunIds\n    error {\n      ...PythonErrorFragment\n    }\n    logKey\n    ...TickTagFragment\n    dynamicPartitionsRequestResults {\n      ...DynamicPartitionsRequestResultFragment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return _templateObject4=function(){return e},e}var InstigatedRunStatus=function(e){var n=e.instigationState,t=(0,r._)(n.runs,1)[0];return t?(0,s.jsx)(h.Z,{run:t,name:n.name}):(0,s.jsx)("span",{style:{color:a.w.Gray300},children:"None"})},RunStatusLink=function(e){var n=e.run;return(0,s.jsxs)(l.Z,{direction:"row",spacing:4,alignItems:"center",children:[(0,s.jsx)(f.K9,{status:n.status}),(0,s.jsx)(u.rU,{to:"/runs/".concat(n.id),target:"_blank",rel:"noreferrer",children:(0,s.jsx)(c.fv,{children:(0,m.EI)({id:n.id})})})]})},j=(0,o.Ps)(_templateObject()),g=(0,o.Ps)(_templateObject1(),j,m.$X,x.dY),v=d.ZP.table.withConfig({componentId:"sc-f08ac912-0"})(_templateObject2(),a.w.Gray500),b=(0,o.Ps)(_templateObject3()),y=(0,o.Ps)(_templateObject4(),j,p.B,x.dY,b)},90437:function(e,n,t){t.d(n,{p:function(){return LiveTickTimeline}});var r,i,s=t(87612),o=t(85333),a=t(6692),l=t(58467),c=t(73235),u=t(52322),d=t(86412),p=t(21106),h=t(81308),f=t(43180),m=t(99046),x=t(28879),j=t.n(x),g=t(77491),v=t.n(g),b=t(30733),y=t.n(b),S=t(2784),w=t(35505),_=t(59686),k=t(94392),O=t(61935),R=t(85888);function _templateObject(){var e=(0,c._)(["\n  position: relative;\n  height: 100px;\n  padding: 10px 2px;\n  border-bottom: 1px solid ",";\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,c._)(["\n  height: 24px;\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,c._)(["\n  cursor: pointer;\n  position: absolute;\n  top: 10px;\n  height: 80px;\n  will-change: transform, width;\n  border-radius: 2px;\n  div {\n    place-content: center;\n    display: grid;\n  }\n  color: ",";\n  ","\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,c._)(["\n  position: absolute;\n  top: 0;\n  height: 124px;\n  will-change: transform;\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,c._)(["\n  position: absolute;\n  top: 0;\n  height: 108px;\n  width: 1px;\n  background: ",";\n"]);return _templateObject4=function(){return e},e}function _templateObject5(){var e=(0,c._)(["\n  height: 16px;\n  position: absolute;\n  bottom: 0;\n  width: 100px;\n  margin-left: -24px;\n"]);return _templateObject5=function(){return e},e}function _templateObject6(){var e=(0,c._)(["\n  position: absolute;\n  top: 0;\n  height: 126px;\n  width: 2px;\n  background: ",";\n  &:after {\n    content: 'Now';\n    position: absolute;\n    left: 0;\n    background: ",";\n    color: white;\n    bottom: 0;\n    font-size: 12px;\n    padding: 3px 4px;\n  }\n"]);return _templateObject6=function(){return e},e}j().extend(v());var C=(r={},(0,s._)(r,O.izS.SUCCESS,d.w.Green500),(0,s._)(r,O.izS.FAILURE,d.w.Red500),(0,s._)(r,O.izS.STARTED,d.w.LightPurple),(0,s._)(r,O.izS.SKIPPED,d.w.Olive200),r),P=(i={},(0,s._)(i,O.izS.SUCCESS,d.w.Green700),(0,s._)(i,O.izS.FAILURE,d.w.Red700),(0,s._)(i,O.izS.STARTED,d.w.Blue500),(0,s._)(i,O.izS.SKIPPED,d.w.Olive500),i),T=y()(function(e){return new Intl.DateTimeFormat(navigator.language,{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23",timeZone:"Automatic"===e?(0,k.cw)():e,timeZoneName:"short"})}),LiveTickTimeline=function(e){var n=e.ticks,t=e.onHoverTick,r=e.onSelectTick,i=e.exactRange,s=e.timeRange,c=e.tickGrid,d=e.timeAfter,m=(0,l._)(S.useState(Date.now()),2),x=m[0],j=m[1],g=(0,l._)(S.useState(!1),2),v=g[0],b=g[1];S.useEffect(function(){if(!v&&!i){var e=setInterval(function(){j(Date.now())},100);return function(){return clearInterval(e)}}return function(){}},[i,v]);var y=(null==i?void 0:i[1])?1e3*i[1]:x+(void 0===d?6e4:d),w=(null==i?void 0:i[0])?1e3*i[0]:x-(void 0===s?3e5:s),k=y-w,O=(0,p.S)(),C=O.viewport,P=O.containerProps,U=S.useMemo(function(){return n.filter(function(e){return!e.endTimestamp||1e3*e.endTimestamp>w}).reverse()},[n,w]),q=S.useMemo(function(){return U.map(function(e){var n,t,r=(n=1e3*e.timestamp,C.width*(n-w)/k),i=(t=(0,R.S)(e)?e.timestamp:e.endTimestamp?1e3*e.endTimestamp:x,C.width*(t-w)/k);return(0,a._)((0,o._)({},e),{width:Math.max(i-r,8),startX:r})})},[w,x,U,k,C.width]),B=Math.max((y-w)/25,void 0===c?6e4:c),M=Math.ceil(w/B)*B,$=S.useMemo(function(){for(var e,n=[],t=M;t<=y;t+=B)n.push({time:t,x:(e=t,C.width*(e-w)/k),showLabel:t%B==0});return n},[M,y,B,C.width,w,k]),V=S.useContext(_.JB),J=(0,l._)(V.timezone,1)[0];return(0,u.jsx)("div",{style:{marginRight:"8px"},children:(0,u.jsxs)("div",(0,a._)((0,o._)({},P),{children:[(0,u.jsxs)(E,{children:[$.map(function(e){return(0,u.jsxs)(A,{style:{transform:"translateX(".concat(e.x,"px)")},children:[(0,u.jsx)(F,{}),e.showLabel?(0,u.jsx)(z,{children:(0,u.jsx)(h.YS,{children:T(J).format(new Date(e.time))})}):null]},e.time)}),q.map(function(e){var n,i,s=null!==(i="requestedAssetMaterializationCount"in e?e.requestedAssetMaterializationCount:null===(n=e.runIds)||void 0===n?void 0:n.length)&&void 0!==i?i:0;return(0,u.jsx)(D,{style:{transform:"translateX(".concat(e.startX,"px)"),width:"".concat(e.width,"px")},status:e.status,onMouseEnter:function(){t(e),b(!0)},onMouseLeave:function(){t(),b(!1)},onClick:function(){r(e)},children:(0,u.jsx)(f.u,{content:(0,u.jsx)(I,{tick:e}),children:(0,u.jsx)("div",{style:{width:e.width+"px",height:"80px"},children:s>0?s:null})})},e.id)}),(0,u.jsx)(L,{style:{transform:"translateX(".concat(C.width*(x-w)/k,"px)")}})]}),(0,u.jsx)(N,{})]}))})},I=S.memo(function(e){var n=e.tick,t=S.useMemo(function(){var e,t;return n.status===O.izS.FAILURE?"Evaluation failed":n.status===O.izS.STARTED?"Evaluating…":"requestedAssetMaterializationCount"in n?"".concat(n.requestedAssetMaterializationCount," materialization").concat((0,m.I)(n.requestedAssetMaterializationCount,"","s")," requested"):"".concat((null===(e=n.runs)||void 0===e?void 0:e.length)||0," run").concat((0,m.I)(null===(t=n.runs)||void 0===t?void 0:t.length,"","s")," requested")},[n]),r=j()(1e3*n.timestamp),i=j()(n.endTimestamp?1e3*n.endTimestamp:Date.now()),s=r.to(i,!0);return(0,u.jsxs)("div",{children:[(0,u.jsxs)(h.YS,{as:"div",children:[t," (",s,")"]}),n.status===O.izS.STARTED?null:(0,u.jsx)(h.YS,{color:d.w.Gray300,children:"Click for details"})]})}),E=w.ZP.div.withConfig({componentId:"sc-f48f1841-0"})(_templateObject(),d.w.KeylineGray),N=w.ZP.div.withConfig({componentId:"sc-f48f1841-1"})(_templateObject1()),D=w.ZP.div.withConfig({componentId:"sc-f48f1841-2"})(_templateObject2(),d.w.White,function(e){var n=e.status;return"\n    background: ".concat(C[n],";\n    &:hover {\n      background: ").concat(P[n],";\n    }\n  ")}),A=w.ZP.div.withConfig({componentId:"sc-f48f1841-3"})(_templateObject3()),F=w.ZP.div.withConfig({componentId:"sc-f48f1841-4"})(_templateObject4(),d.w.KeylineGray),z=w.ZP.div.withConfig({componentId:"sc-f48f1841-5"})(_templateObject5()),L=w.ZP.div.withConfig({componentId:"sc-f48f1841-6"})(_templateObject6(),d.w.Dark,d.w.Dark)},32911:function(e,n,t){t.d(n,{X:function(){return TickDetailsDialog},c:function(){return TickDetailSummary}});var r=t(58467),i=t(73235),s=t(52322),o=t(40794),a=t(60138);t(33521);var l=t(10952),c=t(9001),u=t(18399),d=t(63832),p=t(81308),h=t(57830),f=t(12084),m=t(54266),x=t(16861),j=t(2784),g=t(66904),v=t(91195),b=t(56266),y=t(20059),S=t(58701),w=t(61935),_=t(30301),k=t(91230),O=t(49280);function _templateObject(){var e=(0,i._)(["\n  query SelectedTickQuery($instigationSelector: InstigationSelector!, $timestamp: Float!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        tick(timestamp: $timestamp) {\n          id\n          ...HistoryTick\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var TickDetailsDialog=function(e){var n=e.timestamp,t=e.isOpen,r=e.instigationSelector,i=e.onClose;return(0,s.jsxs)(l.Vq,{isOpen:t,onClose:i,style:{width:"90vw"},children:[(0,s.jsx)(TickDetailsDialogImpl,{timestamp:n,instigationSelector:r}),(0,s.jsx)(l.cN,{children:(0,s.jsx)(c.zx,{onClick:i,children:"Close"})})]})},TickDetailsDialogImpl=function(e){var n=e.timestamp,t=e.instigationSelector,i=(0,o.a)(R,{variables:{instigationSelector:t,timestamp:n||0},skip:!n}).data,a=(null==i?void 0:i.instigationStateOrError.__typename)==="InstigationState"?null==i?void 0:i.instigationStateOrError.tick:void 0,c=(0,r._)(j.useMemo(function(){return[null==a?void 0:a.dynamicPartitionsRequestResults.filter(function(e){var n;return e.type===w.Dq2.ADD_PARTITIONS&&(null===(n=e.partitionKeys)||void 0===n?void 0:n.length)}),null==a?void 0:a.dynamicPartitionsRequestResults.filter(function(e){var n;return e.type===w.Dq2.DELETE_PARTITIONS&&(null===(n=e.partitionKeys)||void 0===n?void 0:n.length)})]},[null==a?void 0:a.dynamicPartitionsRequestResults]),2),h=c[0],f=c[1];return a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.fK,{label:(0,s.jsx)(_.v,{timestamp:a.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,s.jsx)(u.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,s.jsx)(TickDetailSummary,{tick:a})}),a.runIds.length||a.originRunIds.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,s.jsx)(p.Tj,{children:"Runs requested"})}),a.runIds.length?(0,s.jsx)(k.i0,{runIds:a.runIds}):(0,s.jsx)(k.lB,{originRunIds:a.originRunIds})]}):null,(null==h?void 0:h.length)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,s.jsx)(p.Tj,{children:"Added partitions"})}),(0,s.jsx)(PartitionsTable,{partitions:h})]}):null,(null==f?void 0:f.length)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,s.jsx)(p.Tj,{children:"Deleted partitions"})}),(0,s.jsx)(PartitionsTable,{partitions:f})]}):null]}):(0,s.jsx)(u.x,{style:{padding:32},flex:{alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(d.$,{purpose:"section"})})};function TickDetailSummary(e){var n,t=e.tick,r=j.useMemo(function(){switch(null==t?void 0:t.status){case w.izS.FAILURE:return"danger";case w.izS.STARTED:return"primary";case w.izS.SUCCESS:return"success"}},[t]),i="requestedAssetMaterializationCount"in t;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:12},children:[(0,s.jsxs)(u.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(p.Tj,{children:"Status"}),(0,s.jsxs)(u.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,s.jsx)(h.V,{intent:r,children:t.status===w.izS.STARTED?"Evaluating…":(0,s.jsxs)(s.Fragment,{children:[null!==(n=i?t.requestedAssetMaterializationCount:t.runIds.length)&&void 0!==n?n:0," ","requested"]})}),t.error?(0,s.jsx)(f.Z,{onClick:function(){(0,g._)({title:"Tick error",body:(0,s.jsx)(b.T9,{error:t.error})})},children:"View error"}):null]})]}),(0,s.jsxs)(u.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(p.Tj,{children:"Timestamp"}),(0,s.jsx)("div",{children:t?(0,s.jsx)(S.E,{timestamp:{unix:t.timestamp},timeFormat:{showTimezone:!0}}):"–"})]}),(0,s.jsxs)(u.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(p.Tj,{children:"Duration"}),(0,s.jsx)("div",{children:(null==t?void 0:t.endTimestamp)?(0,y.fv)(1e3*t.endTimestamp-1e3*t.timestamp):"–"})]})]})})}function PartitionsTable(e){var n=e.partitions;return(0,s.jsxs)(m.i,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Partition Definition"}),(0,s.jsx)("th",{children:"Partition"})]})}),(0,s.jsx)("tbody",{children:n.flatMap(function(e){var n;return null===(n=e.partitionKeys)||void 0===n?void 0:n.map(function(n){return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(x.g,{text:e.partitionsDefName})}),(0,s.jsx)("td",{children:(0,s.jsx)(x.g,{text:n})})]},n)})})})]})}var R=(0,a.Ps)(_templateObject(),v.B,O.vw)},30894:function(e,n,t){t.d(n,{i:function(){return filterPermissionedInstigationState}});var r=t(61935),filterPermissionedInstigationState=function(e){return e.hasStartPermission&&e.status===r.ynu.STOPPED||e.hasStopPermission&&e.status===r.ynu.RUNNING}},25729:function(e,n,t){t.d(n,{H:function(){return instigationStateSummary}});var r=t(61935),instigationStateSummary=function(e){var n=!1,t=!1,i=!0,s=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value.status;if(c===r.ynu.RUNNING?t=!0:c===r.ynu.STOPPED&&(n=!0),t&&n)break}}catch(e){s=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(s)throw o}}return{anyOff:n,anyOn:t}}},56744:function(e,n,t){t.d(n,{s:function(){return useInstigationStateReducer}});var r=t(87612),i=t(85333),s=t(6692),o=t(2784),a={step:"initial",completion:{completed:0,errors:{}}},reducer=function(e,n){switch(n.type){case"reset":return a;case"start":return(0,s._)((0,i._)({},e),{step:"updating"});case"update-success":var t=e.completion;return{step:"updating",completion:(0,s._)((0,i._)({},t),{completed:t.completed+1})};case"update-error":var o=e.completion;return{step:"updating",completion:(0,s._)((0,i._)({},o),{completed:o.completed+1,errors:(0,s._)((0,i._)({},o.errors),(0,r._)({},n.name,n.error))})};case"complete":return(0,s._)((0,i._)({},e),{step:"completed"})}},useInstigationStateReducer=function(){return o.useReducer(reducer,a)}},85888:function(e,n,t){t.d(n,{$:function(){return truncate},S:function(){return isOldTickWithoutEndtimestamp}});var r=t(61935),truncate=function(e){return e.length>100?"".concat(e.slice(0,95),"…"):e};function isOldTickWithoutEndtimestamp(e){return e.status!==r.izS.STARTED&&!e.endTimestamp}},72855:function(e,n,t){t.d(n,{i:function(){return i}});var r=t(73235);function _templateObject(){var e=(0,r._)(["\n  fragment BasicInstigationStateFragment on InstigationState {\n    id\n    selectorId\n    status\n    hasStartPermission\n    hasStopPermission\n  }\n"]);return _templateObject=function(){return e},e}var i=(0,t(60138).Ps)(_templateObject())},68884:function(e,n,t){t.d(n,{y:function(){return r}});var r="overview-collapsed-state"},79321:function(e,n,t){t.d(n,{ac:function(){return PartitionPerAssetStatus},ux:function(){return PartitionPerOpStatus},Rc:function(){return getVisibleItemCount}});var r=t(85333),i=t(6692),s=t(2281),o=t(58467),a=t(73235),l=t(82550),c=t(52322),u=t(40794),d=t(60138),p=t(21106),h=t(10952),f=t(18399),m=t(9001),x=t(71897),j=t(86412),g=t(37783),v=t(44678),b=t(2784),y=t(35505),S=t(35157),w=t(7872),_=t(54877),k=t(20306),O=t(18190),R=t(61935),C=t(38917),P=t(5035),T=t(56121),I=t(63832),E=t(92364),N=t(91195),D=t(46253),A=t(84495);function _templateObject(){var e=(0,a._)(["\n  query PartitionRunListQuery($filter: RunsFilter!) {\n    pipelineRunsOrError(filter: $filter, limit: 500) {\n      ... on PipelineRuns {\n        results {\n          ...RunTableRunFragment\n          id\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var PartitionRunList=function(e){var n=(0,u.a)(F,{variables:{filter:{pipelineName:e.pipelineName,tags:[{key:A.H.Partition,value:e.partitionName}]}}}),t=n.data;return n.loading||!t?(0,c.jsx)(I.$,{purpose:"section"}):"Runs"!==t.pipelineRunsOrError.__typename?(0,c.jsx)(E.t,{icon:"error",title:"Query Error",description:t.pipelineRunsOrError.message}):(0,c.jsx)("div",{children:(0,c.jsx)(D.AL,{runs:t.pipelineRunsOrError.results})})},F=(0,d.Ps)(_templateObject(),D.ZZ,N.B),z=t(6749),L=t(93325);function PartitionStepStatus_templateObject(){var e=(0,a._)(["\n  width: 30px;\n  position: absolute;\n  border: 1px solid ",";\n  border-radius: 3px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  top: calc(50% - 15px);\n  bottom: calc(50% - 15px);\n  ","\n  background: white;\n  z-index: 10;\n\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  display: flex;\n  &:hover {\n    background: #ececec;\n  }\n"]);return PartitionStepStatus_templateObject=function(){return e},e}function _templateObject1(){var e=(0,a._)(["\n  display: block;\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,a._)(["\n  height: 1px;\n  width: 100%;\n  margin-top: 5px;\n  border-top: 1px solid ",";\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,a._)(["\n  query PartitionStepStatusPipelineQuery($pipelineSelector: PipelineSelector) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          ...PartitionMatrixSolidHandleFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return _templateObject3=function(){return e},e}var getVisibleItemCount=function(e){return Math.ceil(e/z.Bj)-3},timeboundsOfPartitions=function(e){var n=[Date.now()/1e3,1],t=n[0],r=n[1],i=!0,s=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value,u=!0,d=!1,p=void 0;try{for(var h,f=c.steps[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var m,x=h.value;0!==x.unix&&(t=(m=[Math.min(t,x.unix),Math.max(r,x.unix)])[0],r=m[1])}}catch(e){d=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(d)throw p}}}}catch(e){s=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(s)throw o}}return[t,r]},PartitionPerAssetStatus=function(e){var n=e.assetHealth,t=e.rangeDimension,o=e.rangeDimensionIdx,a=e.assetQueryItems,l=(0,s._)(e,["assetHealth","rangeDimension","rangeDimensionIdx","assetQueryItems"]),u={},d=!0,p=!1,h=void 0;try{for(var f,m=n[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var x,j=f.value;if((null===(x=j.dimensions[o])||void 0===x?void 0:x.name)===t.name){var g=j.rangesForSingleDimension(o);u[(0,S.Je)(j.assetKey)]=g}}}catch(e){p=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw h}}var v=(0,O.tc)({nodes:a,mode:k.hS.FLAT}).boxes.filter(function(e){return!!u[e.node.name]}),b={stepRows:v.map(function(e){return{x:e.x,name:e.node.name,totalFailurePercent:0,finalFailurePercent:0}}),partitions:[],partitionColumns:t.partitionKeys.map(function(e,n){return{idx:n,name:e,runsLoaded:!0,runs:[],steps:v.map(function(e){return{name:e.node.name,unix:0,color:assetPartitionStatusToSquareColor((0,_.h1)(u[e.node.name],n))}})}})};return(0,c.jsx)(PartitionStepStatus,(0,i._)((0,r._)({},l),{partitionNames:t.partitionKeys,data:b,showLatestRun:!1}))},assetPartitionStatusToSquareColor=function(e){return e.includes(w.yo.MATERIALIZED)&&e.includes(w.yo.MISSING)?"SUCCESS-MISSING":e.includes(w.yo.MATERIALIZED)?"SUCCESS":e.includes(w.yo.FAILED)&&e.includes(w.yo.MISSING)?"FAILURE-MISSING":e.includes(w.yo.FAILED)?"FAILURE":"MISSING"},PartitionPerOpStatus=function(e){var n,t=e.repoAddress,o=e.pipelineName,a=e.partitions,l=e.partitionNames,d=(0,s._)(e,["repoAddress","pipelineName","partitions","partitionNames"]),p=(0,T.$)(t),h=(0,i._)((0,r._)({},p),{pipelineName:o}),f=(0,u.a)(M,{variables:{pipelineSelector:h}}),m=(null===(n=f.data)||void 0===n?void 0:n.pipelineSnapshotOrError.__typename)==="PipelineSnapshot"&&f.data.pipelineSnapshotOrError.solidHandles,x=(0,L.J2)({partitionNames:l,partitions:a,stepQuery:"",solidHandles:m});return x?(0,c.jsx)(PartitionStepStatus,(0,i._)((0,r._)({},d),{showLatestRun:!0,pipelineName:o,partitionNames:l,data:x})):(0,c.jsx)("span",{})},PartitionStepStatus=function(e){var n=(0,p.S)(),t=n.viewport,s=n.containerProps,a=(0,o._)(b.useState(null),2),l=a[0],u=a[1],d=(0,o._)(b.useState(null),2),j=d[0],g=d[1],v=e.setPageSize,y=e.data;b.useEffect(function(){t.width&&v(getVisibleItemCount(t.width))},[t.width,v]);var S=y.stepRows,w=y.partitionColumns,sortPartitionSteps=function(e){var n={};return e.forEach(function(e){return n[e.name]=e}),S.map(function(e){return n[e.name]})},_=getVisibleItemCount(t.width),k=Math.max(0,w.length-e.offset-_),O=Math.max(_,w.length-e.offset),R=w.slice(k,O),C=(0,o._)(timeboundsOfPartitions(w),2),P=C[0],T=C[1],I=(0,z.G3)(w.map(function(e){return e.name}));return(0,c.jsxs)(q,{children:[(0,c.jsxs)(h.Vq,{isOpen:!!j,onClose:function(){return g(null)},style:{width:"90vw"},title:j?"".concat(j.partitionName," runs"):"",children:[(0,c.jsx)(f.x,{padding:{bottom:12},children:j&&(0,c.jsx)(PartitionRunList,{pipelineName:e.pipelineName,partitionName:j.partitionName})}),(0,c.jsx)(h.cN,{children:(0,c.jsx)(m.zx,{intent:"primary",autoFocus:!0,onClick:function(){return g(null)},children:"OK"})})]}),(0,c.jsxs)("div",{style:{position:"relative",display:"flex"},children:[(0,c.jsx)(z.NF,{floating:e.offset+_<e.partitionNames.length,children:(0,c.jsxs)(z.C4,{disabled:!0,style:{flex:1,flexShrink:1,overflow:"hidden"},children:[(0,c.jsx)(z.eh,{style:{height:I}}),e.showLatestRun&&(0,c.jsx)(z.p$,{style:{paddingLeft:24},children:"Last Run"}),(0,c.jsx)(B,{}),S.map(function(e){return(0,c.jsx)(z.p$,{style:{paddingLeft:8+e.x},"data-tooltip":e.name,hovered:e.name===(null==l?void 0:l.stepName),children:e.name},e.name)})]})}),e.offset+_<e.partitionNames.length?(0,c.jsx)(U,{$direction:"left",onClick:function(){return e.setOffset(Math.max(0,Math.min(e.offset+_-1,e.partitionNames.length-_)))},children:(0,c.jsx)(x.JO,{name:"chevron_left"})}):null,(0,c.jsx)("div",(0,i._)((0,r._)({style:{flex:1,overflow:"hidden",position:"relative"}},s),{children:(0,c.jsx)("div",{style:{width:w.length*z.Bj,position:"absolute",height:"100%",right:0,zIndex:1},children:R.map(function(n,t){return(0,c.jsxs)(z.C4,{style:{zIndex:R.length-t,width:z.Bj,position:"absolute",right:(_-t)*z.Bj+20},children:[(0,c.jsx)(z.kD,{$height:I,label:n.name}),e.showLatestRun&&(0,c.jsx)(z.p$,{style:{textAlign:"center"},children:(0,c.jsx)(PartitionSquare,{runs:n.runs,runsLoaded:n.runsLoaded,minUnix:P,maxUnix:T,hovered:l,setHovered:u,setFocused:g,partitionName:n.name},"".concat(n.name,":__full_status"))}),(0,c.jsx)(B,{}),sortPartitionSteps(n.steps).map(function(e){return(0,c.jsx)(PartitionSquare,{step:e,runs:n.runs,runsLoaded:n.runsLoaded,minUnix:P,maxUnix:T,hovered:l,setHovered:u,setFocused:g,partitionName:n.name},e.name)})]},n.name)})})})),e.offset>0?(0,c.jsx)(U,{$direction:"right",onClick:function(){return e.setOffset(Math.max(0,e.offset-_))},children:(0,c.jsx)(x.JO,{name:"chevron_right"})}):null]})]})},U=y.ZP.div.withConfig({componentId:"sc-e6052371-0"})(PartitionStepStatus_templateObject(),j.w.KeylineGray,function(e){return"left"===e.$direction?"left: 315px;":"right: 0;"}),q=y.ZP.div.withConfig({componentId:"sc-e6052371-1"})(_templateObject1()),B=y.ZP.div.withConfig({componentId:"sc-e6052371-2"})(_templateObject2(),j.w.KeylineGray),M=(0,d.Ps)(_templateObject3(),L.Tg),$=JSON.stringify({top:20,left:10}),PartitionSquare=function(e){var n=e.step,t=e.runs,r=e.runsLoaded,i=e.hovered,s=e.setHovered,a=e.setFocused,u=e.partitionName,d=(0,o._)(b.useState(!1),2),p=d[0],h=d[1];if(r){if(n)f=n.color.toLowerCase();else if(0===t.length)f="empty";else{var f,m,x=null===(m=(0,l._)(t).reverse().find(function(e){return e.status!==R.VOA.CANCELED}))||void 0===m?void 0:m.status;f=x?x.toLowerCase():"empty"}}else f="loading";var j=(0,c.jsx)("div",{className:"square ".concat(f),onMouseEnter:function(){return s({stepName:null==n?void 0:n.name,partitionName:u})},onMouseLeave:function(){return s(null)},"data-tooltip":r&&!n?1===t.length?"1 run":"".concat(t.length," runs"):void 0,"data-tooltip-style":$});return p||t.length&&(null==i?void 0:i.stepName)===(null==n?void 0:n.name)&&(null==i?void 0:i.partitionName)===u?(0,c.jsx)(g.J,{interactionKind:"click",placement:"bottom-start",onOpening:function(){return h(!0)},onClosed:function(){return h(!1)},content:(0,c.jsxs)(v.v2,{children:[(0,c.jsx)(P.U,{icon:"open_in_new",text:"Show logs from last run",to:(0,C.tA)(t[t.length-1],{stepKey:n?n.name:null})}),(0,c.jsx)(v.sN,{icon:"settings_backup_restore",text:"View runs (".concat(t.length,")"),onClick:function(){return a({stepName:null==n?void 0:n.name,partitionName:u})}})]}),children:j}):j}},6749:function(e,n,t){t.d(n,{AQ:function(){return f},Bj:function(){return l},C4:function(){return u},G3:function(){return topLabelHeightForLabels},NF:function(){return m},eh:function(){return p},kD:function(){return TopLabelTilted},p$:function(){return d}});var r=t(73235),i=t(82550),s=t(52322),o=t(86412);t(2784);var a=t(35505);function _templateObject(){var e=(0,r._)(["\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  line-height: 0;\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n\n  .cell {\n    height: ","px;\n    display: inline-block;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    font-size: 12px;\n    padding: 2px;\n    box-sizing: border-box;\n    line-height: initial;\n  }\n\n  .square {\n    width: 20px;\n    height: 20px;\n    margin: 6px;\n    display: inline-block;\n\n    &:hover:not(.empty):before {\n      box-shadow: "," 0 0 0 3px;\n    }\n    &:before {\n      content: ' ';\n      background: rgba(248, 247, 245, 1);\n      border-radius: 10px;\n      display: inline-block;\n      width: 20px;\n      height: 20px;\n    }\n    &.loading {\n      &:before {\n        background: radial-gradient(white 0%, white 45%, rgba(248, 247, 245, 1) 60%);\n      }\n    }\n    &.success {\n      &:before {\n        background: ",";\n      }\n    }\n    &.failure {\n      &:before {\n        background: ",";\n      }\n    }\n    &.success-missing {\n      &:before {\n        background: ",";\n      }\n    }\n    &.failure-missing {\n      &:before {\n        background: ",";\n      }\n    }\n    &.failure-blank {\n      &:before {\n        background: ",";\n      }\n    }\n    &.skipped {\n      &:before {\n        background: ",";\n      }\n    }\n    &.started,\n    &.starting,\n    &.canceling {\n      &:before {\n        background: ",";\n      }\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,r._)(["\n  height: ","px;\n  line-height: ","px;\n  font-size: 13px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  position: relative;\n  background: ",";\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,r._)(["\n  position: relative;\n  height: 70px;\n  padding: 4px;\n  padding-bottom: 0;\n  min-width: 15px;\n  align-items: flex-end;\n  display: flex;\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,r._)(["\n  position: relative;\n  height: unset; /* provide via style tag */\n  padding: 4px;\n  padding-bottom: 0;\n  min-width: 15px;\n  margin-bottom: ","px;\n  align-items: end;\n  display: flex;\n  line-height: normal;\n\n  & > div.tilted {\n    font-size: 12px;\n    white-space: nowrap;\n    position: absolute;\n    bottom: -20px;\n    left: 0;\n    padding: 2px;\n    padding-right: 4px;\n    padding-left: 0;\n    transform: rotate(-","deg);\n    transform-origin: top left;\n  }\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,r._)(["\n  display: flex;\n  border-right: 1px solid ",";\n  padding-bottom: 16px;\n  width: ","px;\n  z-index: 1;\n  ",";\n"]);return _templateObject4=function(){return e},e}var l=32,c={SUCCESS:o.w.Green500,SUCCESS_SKIPPED:o.w.Green200,FAILURE:o.w.Red500,FAILURE_SKIPPED:o.w.Red200,SKIPPED:o.w.Yellow500,IN_PROGRESS:o.w.Blue500},flatGradient=function(e){return"linear-gradient(to left, ".concat(e," 0%, ").concat(e," 100%)")},u=a.ZP.div.withConfig({componentId:"sc-e14db92d-0"})(_templateObject(),function(e){var n=e.disabled,t=e.focused,r=e.multiselectFocused,i=e.hovered;return!n&&!t&&!r&&"&".concat(i?"":":hover"," {\n      background: ").concat(o.w.Gray100,";\n      cursor: default;\n      ").concat(h," {\n        background: ").concat(o.w.White,";\n        .tilted {\n          background: ").concat(o.w.Gray100,";\n        }\n      }\n      .square {\n        filter: brightness(95%);\n      }\n    }")},function(e){return e.disabled&&"\n      ".concat(h," {\n        color: ").concat(o.w.Gray400,"\n      }\n    ")},function(e){return e.focused&&"background: ".concat(o.w.Blue500,";\n    ").concat(d," {\n      color: white;\n    }\n    ").concat(h," {\n      background: ").concat(o.w.White,";\n      color: white;\n      .tilted {\n        background: ").concat(o.w.Blue500,";\n      }\n    }\n  }")},function(e){return e.multiselectFocused&&"background: ".concat(o.w.Blue200,";\n    ").concat(d," {\n      color: white;\n    }\n    ").concat(h," {\n      background: ").concat(o.w.White,";\n      color: white;\n      .tilted {\n        background: ").concat(o.w.Blue200,";\n      }\n    }\n  }")},l,o.w.Blue500,c.SUCCESS,c.FAILURE,c.SUCCESS_SKIPPED,c.FAILURE_SKIPPED,c.FAILURE_SKIPPED,c.SKIPPED,c.IN_PROGRESS),d=a.ZP.div.withConfig({componentId:"sc-e14db92d-1"})(_templateObject1(),l,l,function(e){return[e.hovered?o.w.Gray100:"transparent"].map(flatGradient).join(",")}),p=a.ZP.div.withConfig({componentId:"sc-e14db92d-2"})(_templateObject2());function topLabelHeightForLabels(e){var n,t=(n=Math).max.apply(n,(0,i._)(e.map(function(e){return e.length})));return(t>10?4.9*t:55)+15}var TopLabelTilted=function(e){var n=e.label,t=e.$height;return(0,s.jsx)(h,{style:{height:t-15},children:(0,s.jsx)("div",{className:"tilted",children:n})})},h=a.ZP.div.withConfig({componentId:"sc-e14db92d-3"})(_templateObject3(),15,41),f=330,m=a.ZP.div.withConfig({componentId:"sc-e14db92d-4"})(_templateObject4(),o.w.Gray200,f,function(e){return e.floating?"box-shadow: 1px 0 4px rgba(0, 0, 0, 0.15)":""})},93325:function(e,n,t){t.d(n,{J2:function(){return useMatrixData},Tg:function(){return j},iv:function(){return x}});var r=t(85333),i=t(6692),s=t(73235),o=t(60138),a=t(37552),l=t(2784),c=t(82329),u=t(84692),d=t(18190),p=t(61935),h=t(42982),f=t(15848);function _templateObject(){var e=(0,s._)(["\n  fragment PartitionMatrixStepRunFragment on Run {\n    id\n    status\n    startTime\n    endTime\n    stepStats {\n      stepKey\n      startTime\n      endTime\n      status\n    }\n    tags {\n      key\n      value\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,s._)(["\n  fragment PartitionMatrixSolidHandleFragment on SolidHandle {\n    handleID\n    solid {\n      name\n      definition {\n        name\n      }\n      inputs {\n        dependsOn {\n          solid {\n            name\n          }\n        }\n      }\n      outputs {\n        dependedBy {\n          solid {\n            name\n          }\n        }\n      }\n    }\n    ...GraphExplorerSolidHandleFragment\n  }\n\n  ","\n"]);return _templateObject1=function(){return e},e}var m=new Set([p.SGm.IN_PROGRESS,p.SGm.SKIPPED]);function getStartTime(e){return e.startTime||0}function byStartTimeAsc(e,n){return getStartTime(e)-getStartTime(n)}function isStepKeyForNode(e,n){var t=RegExp(e+"\\[.*\\]");return n===e||n==="".concat(e,".compute")||n.match(t)}var useMatrixData=function(e){var n=l.useRef();if(!e.solidHandles)return null;if(n.current&&(0,a.shallowCompareKeys)(e,n.current.inputs))return n.current.result;var t=(0,h.i)(e.solidHandles).map(function(e){return e.solid}),s=(0,c.V)(t,e.stepQuery),o=function(e,n,t,s){var o={};t.forEach(function(e){e.runs.sort(byStartTimeAsc),o[e.name]=e});var a=n.map(function(n,t){var s=o[n]||{name:n,runsLoaded:!1,runs:[]},a=e.boxes.map(function(e){var n=e.node,t={name:n.name,color:"MISSING",unix:0};if(!s.runs.length)return t;var r=s.runs[s.runs.length-1],i=null===(a=r.stepStats.find(function(e){return isStepKeyForNode(n.name,e.stepKey)}))||void 0===a?void 0:a.status;if(s.runs.length>1&&(!i||m.has(i)))for(var o=s.runs.length-2;o>=0&&!l;){var a,l,c,u=null===(c=s.runs[o].stepStats.find(function(e){return isStepKeyForNode(n.name,e.stepKey)}))||void 0===c?void 0:c.status;if(u&&!m.has(u)){l=u;break}o--}if(!i&&!l)return t;var d=!i||m.has(i)?"".concat(l,"-MISSING"):i;return{name:n.name,unix:getStartTime(r),color:d}});return(0,i._)((0,r._)({},s),{steps:a,idx:t})}),l=a.filter(function(e){return e.runs.length>0}).length,c=e.boxes.map(function(e,n){var t=a.filter(function(e){return e.steps[n].color.includes("FAILURE")}),r=a.filter(function(e){return e.steps[n].color.endsWith("FAILURE")});return{x:e.x,name:e.node.name,totalFailurePercent:l?Math.round(t.length/l*100):0,finalFailurePercent:l?Math.round(r.length/l*100):0}});if(null==s?void 0:s.showFailuresAndGapsOnly){for(var _loop=function(e){0===c[e].finalFailurePercent&&(c.splice(e,1),a.forEach(function(n){return n.steps.splice(e,1)}))},u=c.length-1;u>=0;u--)_loop(u);for(var d=a.length-1;d>=0;d--)(0===a[d].runs.length||a[d].steps.every(function(e){return e.color.includes("SUCCESS")}))&&a.splice(d,1)}return{stepRows:c,partitions:t,partitionColumns:a}}((0,d.tc)({nodes:s.all,mode:u.hS.FLAT}),e.partitionNames,e.partitions,e.options);return n.current={result:o,inputs:e},o},x=(0,o.Ps)(_templateObject()),j=(0,o.Ps)(_templateObject1(),f.Q)},6871:function(e,n,t){t.d(n,{T:function(){return usePartitionStepQuery}});var r=t(81862),i=t(85333),s=t(6692),o=t(58467),a=t(73235),l=t(82550),c=t(82361),u=t(22970),d=t(56675),p=t(60138),h=t(2784),f=t(91195),m=t(61935),x=t(84495),j=t(93325);function _templateObject(){var e=(0,a._)(["\n  query PartitionStepLoaderQuery($filter: RunsFilter!, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, cursor: $cursor, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ...PartitionMatrixStepRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var g={runs:[],partitionNames:[],loading:!1,loadingCursorIdx:0};function usePartitionStepQuery(e){var n,t,a=e.partitionSetName,p=e.partitionTagName,f=e.partitionNames,j=e.pageSize,v=e.runsFilter,b=e.jobName,y=e.repositorySelector,S=e.offset,w=e.skipQuery,_=(0,d.x)(),k=h.useRef(0),O=(0,o._)(h.useState(g),2),R=O[0],C=O[1],P=JSON.stringify((0,l._)(v.map(function(e){var n=(0,o._)(e.value.split("="),2);return{key:n[0],value:n[1]}})).concat([{key:x.H.RepositoryLabelTag,value:"".concat(y.repositoryName,"@").concat(y.repositoryLocationName)}]));return h.useEffect(function(){var e,n=k.current+1;k.current=n;var t=JSON.parse(P);C(function(e){return(0,s._)((0,i._)({},e),{runs:[],loading:!0})});var o=(e=(0,r._)(function(){var e,o,d,h,g,v;return(0,u.Jh)(this,function(y){switch(y.label){case 0:if(e=function(){var e,r,c;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return r=Math.max(o-h,0),[4,Promise.all(f.slice(r,o).map(function(e){var n={key:x.H.PartitionSet,value:a},r={key:p,value:e};return fetchRunsForFilter(_,{limit:1e3,filter:b?{pipelineName:b,tags:(0,l._)(t).concat([r])}:{tags:(0,l._)(t).concat([r,n])}})}))];case 1:if(c=u.sent(),k.current!==n)return[2,{v:void 0}];return o=r,C(function(n){return(0,s._)((0,i._)({},n),{runs:(e=(0,l._)(n.runs)).concat.apply(e,(0,l._)(c)),loading:o>0,loadingCursorIdx:o})}),[2]}})},k.current!==n)return[2];d=Math.max(0,(o=f.length-(S||0))-j),C(function(e){return(0,s._)((0,i._)({},e),{partitionNames:f,loadingCursorIdx:o})}),h=5,y.label=1;case 1:if(!(o>d))return[3,3];return[5,(0,u.XA)(e())];case 2:if(g=y.sent(),"object"===(0,c._)(g))return[2,g.v];return[3,1];case 3:return v=setInterval((0,r._)(function(){var e,r,o;return(0,u.Jh)(this,function(c){switch(c.label){case 0:if(k.current!==n)return[2,clearInterval(v)];return C(function(e){return(0,s._)((0,i._)({},e),{loading:!0})}),[4,fetchRunsForFilter(_,{limit:10,filter:{tags:(0,l._)(t).concat([{key:x.H.PartitionSet,value:a}])}})];case 1:return e=c.sent(),[4,fetchRunsForFilter(_,{filter:{statuses:[m.VOA.STARTED],tags:(0,l._)(t).concat([{key:x.H.PartitionSet,value:a}])}})];case 2:if(r=c.sent(),k.current!==n)return[2,clearInterval(v)];return o=(0,l._)(r).concat((0,l._)(e)).filter(function(e){return e.tags.find(function(e){return e.key===p&&f.includes(e.value)})}),C(function(e){var n=e.runs.filter(function(e){return!o.some(function(n){return n.id===e.id})}).concat(o);return(0,s._)((0,i._)({},e),{loading:!1,runs:n})}),[2]}})}),1e4),[2]}})}),function(){return e.apply(this,arguments)});return w||o(),function(){k.current+=1}},[j,_,a,p,P,b,S,f,w]),n=[],t={},R.partitionNames.forEach(function(e,r){t[e]={name:e,runsLoaded:r>=R.loadingCursorIdx,runs:[]},n.push(t[e])}),R.runs.forEach(function(e){var n,r;null===(r=t[(null===(n=e.tags.find(function(e){return e.key===p}))||void 0===n?void 0:n.value)||""])||void 0===r||r.runs.push(e)}),n}function fetchRunsForFilter(e,n){return _fetchRunsForFilter.apply(this,arguments)}function _fetchRunsForFilter(){return(_fetchRunsForFilter=(0,r._)(function(e,n){var t;return(0,u.Jh)(this,function(r){switch(r.label){case 0:return[4,e.query({fetchPolicy:"network-only",query:v,variables:n})];case 1:return[2,"Runs"===(t=r.sent()).data.pipelineRunsOrError.__typename&&t.data.pipelineRunsOrError.results||[]]}})})).apply(this,arguments)}var v=(0,p.Ps)(_templateObject(),j.iv,f.B)},56043:function(e,n,t){t.d(n,{r:function(){return ResourceRoot},$:function(){return succinctType}});var r=t(85333),i=t(6692),s=t(73235),o=t(52322),a=t(40794),l=t(60138),c=t(18399),u=t(86412),d=t(28888),p=t(17131),h=t(81308),f=t(9676),m=t(59692),x=t(12084),j=t(10735),g=t(43180),v=t(57830),b=t(54266),y=t(92364),S=t(71897),w=t(16861);t(2784);var _=t(7267),k=t(47933),O=t(35505),R=t(66904),C=t(91195),P=t(68028),T=t(28090),I=t(28252),E=t(63386),N=t(48102),D=t(90894),A=t(56121),F=t(38153),z=t(56024),L=t(40049),U={configuration:"Configuration",uses:"Uses"},ResourceTabs=function(e){var n=e.repoAddress,t=e.resourceName,r=e.numUses,i=(0,_.$B)(["/locations/:repoPath/resources/:name/:tab?"]),s=(null==i?void 0:i.params.tab)&&U[null==i?void 0:i.params.tab]||"Configuration";return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(z.mQ,{size:"large",selectedTabId:s,children:[(0,o.jsx)(L.f,{id:"Configuration",title:"Configuration",to:(0,F.$U)(n,"/resources/".concat(t))},"configuration"),(0,o.jsx)(L.f,{id:"Uses",title:(0,o.jsxs)(c.x,{flex:{gap:4,alignItems:"center"},children:["Uses",(0,o.jsx)(v.V,{intent:"none",minimal:!0,children:r})]}),to:(0,F.$U)(n,"/resources/".concat(t,"/uses"))},"uses")]})})};function _templateObject(){var e=(0,s._)(["\n  position: relative;\n\n  height: 100%;\n  min-height: 0;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  background: ",";\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,s._)(["\n  flex: 1;\n  overflow-y: auto;\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,s._)(["\n  fragment ResourceDetailsFragment on ResourceDetails {\n    name\n    description\n    configFields {\n      name\n      description\n      configTypeKey\n      isRequired\n      defaultValueAsJson\n    }\n    configuredValues {\n      key\n      value\n      type\n    }\n    nestedResources {\n      name\n      type\n      resource {\n        name\n        resourceType\n        description\n      }\n    }\n    parentResources {\n      name\n      resource {\n        name\n        resourceType\n        description\n      }\n    }\n    assetKeysUsing {\n      path\n    }\n    schedulesUsing\n    sensorsUsing\n    jobsOpsUsing {\n      job {\n        id\n        name\n      }\n      opsUsing {\n        handleID\n        solid {\n          name\n        }\n      }\n    }\n    resourceType\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,s._)(["\n  query ResourceRootQuery($resourceSelector: ResourceSelector!) {\n    topLevelResourceDetailsOrError(resourceSelector: $resourceSelector) {\n      ...ResourceDetailsFragment\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n"]);return _templateObject3=function(){return e},e}var succinctType=function(e){return(null==e?void 0:e.split(".").pop())||null},resourceDisplayName=function(e){return e?e.name.startsWith("_nested_")?succinctType(null==e?void 0:e.resourceType):e.name:null},SectionHeader=function(e){return(0,o.jsx)(c.x,{padding:{left:24,vertical:16},background:u.w.Gray50,border:"all",children:e.children})},ResourceRoot=function(e){(0,P.Px)();var n,t,s,l,b=e.repoAddress,y=(0,_.UO)().resourceName;(0,I.j)("Resource: ".concat(y));var S=(0,i._)((0,r._)({},(0,A.$)(b)),{resourceName:y}),w=(0,a.a)($,{variables:{resourceSelector:S}}),k=(null===(n=w.data)||void 0===n?void 0:n.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"&&resourceDisplayName(null===(t=w.data)||void 0===t?void 0:t.topLevelResourceDetailsOrError)||y,O=(null===(s=w.data)||void 0===s?void 0:s.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"?w.data.topLevelResourceDetailsOrError.parentResources.length+w.data.topLevelResourceDetailsOrError.assetKeysUsing.length+w.data.topLevelResourceDetailsOrError.jobsOpsUsing.length+w.data.topLevelResourceDetailsOrError.schedulesUsing.length+w.data.topLevelResourceDetailsOrError.sensorsUsing.length:0,C=null===(l=(0,_.$B)(["/locations/:repoPath/resources/:name/:tab?"]))||void 0===l?void 0:l.params.tab;return(0,o.jsxs)(d.T,{style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(p.m,{title:(0,o.jsx)(h.X6,{children:k}),tabs:(0,o.jsx)(ResourceTabs,{repoAddress:b,resourceName:y,numUses:O})}),(0,o.jsx)(D.g,{queryResult:w,allowStaleData:!0,children:function(e){var n=e.topLevelResourceDetailsOrError;if("ResourceDetails"!==n.__typename){var t=null;return"PythonError"===n.__typename&&(t=n.message),(0,o.jsx)(f.b,{intent:"warning",title:(0,o.jsxs)(m.Z,{direction:"row",spacing:4,children:[(0,o.jsx)("div",{children:"Could not load resource."}),t&&(0,o.jsx)(x.Z,{color:u.w.Link,underline:"always",onClick:function(){(0,R._)({title:"Python error",body:t})},children:"View error"})]})})}var r=succinctType(n.resourceType);return(0,o.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,o.jsx)(j.O,{identifier:"resource-explorer",firstInitialPercent:50,firstMinSize:400,first:(0,o.jsx)(c.x,{padding:{bottom:48},style:{overflowY:"auto"},children:"uses"===C?(0,o.jsx)(ResourceUses,{resourceDetails:n,repoAddress:b,numUses:O}):(0,o.jsx)(ResourceConfig,{resourceDetails:n,repoAddress:b})}),second:(0,o.jsx)(q,{children:(0,o.jsxs)(B,{children:[(0,o.jsxs)(c.x,{flex:{gap:4,direction:"column"},margin:{left:24,right:12,vertical:16},children:[(0,o.jsx)(h.X6,{children:k}),(0,o.jsx)(g.u,{content:n.resourceType||"",children:(0,o.jsx)(h.fv,{children:r})})]}),(0,o.jsx)(N.pC,{title:"Definition",children:(0,o.jsx)(c.x,{padding:{vertical:16,horizontal:24},children:(0,o.jsxs)(v.V,{icon:"resource",children:["Resource in"," ",(0,o.jsx)(E.b,{repoAddress:b,showRefresh:!1})]})})}),n.description?(0,o.jsx)(N.pC,{title:"Description",children:(0,o.jsx)(c.x,{padding:{vertical:16,horizontal:24},children:n.description})}):null]})})})})}})]})},ResourceConfig=function(e){var n=e.resourceDetails,t=e.repoAddress,r=Object.fromEntries(n.configuredValues.map(function(e){return[e.key,{value:e.value,type:e.type}]})),i=n.nestedResources;return(0,o.jsxs)(o.Fragment,{children:[i.length>0&&(0,o.jsxs)(c.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(h.pm,{children:"Resource dependencies"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Key"}),(0,o.jsx)("th",{style:{width:180},children:"Resource"})]})}),(0,o.jsx)("tbody",{children:i.map(function(e){var n="TOP_LEVEL"===e.type&&e.resource?(0,o.jsx)(ResourceEntry,{url:(0,F.$U)(t,"/resources/".concat(e.name)),name:resourceDisplayName(e.resource)||"",description:e.resource.description||void 0},e.name):(0,o.jsx)(ResourceEntry,{name:e.name},e.name);return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.name})}),(0,o.jsx)("td",{colSpan:2,children:n})]},e.name)})})]})]}),(0,o.jsxs)(c.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(h.pm,{children:"Configuration"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Key"}),(0,o.jsx)("th",{style:{width:90},children:"Type"}),(0,o.jsx)("th",{style:{width:90},children:"Value"})]})}),(0,o.jsx)("tbody",{children:0===n.configFields.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:3,children:(0,o.jsx)(c.x,{padding:{vertical:8},children:(0,o.jsx)(y.t,{icon:"settings",title:"No configuration",description:"This resource has no configuration fields."})})})}):n.configFields.map(function(e){var n,t=e.defaultValueAsJson,i=r.hasOwnProperty(e.name)?r[e.name].type:null,s=r.hasOwnProperty(e.name)?r[e.name].value:t,a="VALUE"===i&&t===s;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsxs)(c.x,{flex:{direction:"column",gap:4,alignItems:"flex-start"},children:[(0,o.jsx)("strong",{children:e.name}),(0,o.jsx)("div",{style:{fontSize:12,color:u.w.Gray700},children:e.description})]})}),(0,o.jsx)("td",{children:"StringSourceType"===(n=e.configTypeKey)?"String":"IntSourceType"===n?"Int":"BoolSourceType"===n?"Bool":n}),(0,o.jsx)("td",{children:(0,o.jsxs)(c.x,{flex:{direction:"row",gap:16},children:[(0,o.jsx)(g.u,{content:(0,o.jsxs)(o.Fragment,{children:["Default: ",t]}),canShow:!a&&!!t,children:"ENV_VAR"===i?(0,o.jsx)(v.V,{children:s}):s}),a&&(0,o.jsx)(v.V,{children:"Default"}),"ENV_VAR"===i&&(0,o.jsx)(v.V,{intent:"success",children:"Env var"})]})})]},e.name)})})]})]})]})},ResourceUses=function(e){var n=e.resourceDetails,t=e.repoAddress;if(0===e.numUses)return(0,o.jsx)(c.x,{padding:{vertical:16},children:(0,o.jsx)(y.t,{icon:"list",title:"No uses",description:"This resource is not used by any assets or resources."})});var r=n.parentResources;return(0,o.jsxs)(o.Fragment,{children:[r.length>0&&(0,o.jsxs)(c.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(h.pm,{children:"Parent resources"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:"Resource"})})}),(0,o.jsx)("tbody",{children:r.map(function(e){return e.resource&&(0,o.jsx)("tr",{children:(0,o.jsx)("td",{children:(0,o.jsx)(ResourceEntry,{url:(0,F.$U)(t,"/resources/".concat(e.name)),name:resourceDisplayName(e.resource)||"",description:e.resource.description||void 0})})},e.name)})})]})]}),n.assetKeysUsing.length>0&&(0,o.jsxs)(c.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(h.pm,{children:"Assets"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:"Asset key"})})}),(0,o.jsx)("tbody",{children:n.assetKeysUsing.map(function(e){return(0,o.jsx)("tr",{children:(0,o.jsx)("td",{children:(0,o.jsx)(T.R,{path:e.path,icon:"asset"},e.path.join("/"))})},e.path.join("/"))})})]})]}),n.jobsOpsUsing.length>0&&(0,o.jsxs)(c.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(h.pm,{children:"Jobs"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Job name"}),(0,o.jsx)("th",{children:"Ops"})]})}),(0,o.jsx)("tbody",{children:n.jobsOpsUsing.map(function(e){return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,o.jsx)(S.JO,{name:"job",color:u.w.Gray400}),(0,o.jsx)(k.rU,{to:(0,F.$U)(t,"/jobs/".concat(e.job.name)),children:(0,o.jsx)(w.g,{text:e.job.name})})]})}),(0,o.jsx)("td",{children:(0,o.jsx)(c.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:e.opsUsing.map(function(n){return(0,o.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,o.jsx)(S.JO,{name:"op",color:u.w.Gray400}),(0,o.jsx)(k.rU,{to:(0,F.$U)(t,"/jobs/".concat(e.job.name,"/").concat(n.handleID.split(".").join("/"))),children:(0,o.jsx)(w.g,{text:n.solid.name})})]},n.handleID)})})})]},e.job.name)})})]})]}),[{name:"Schedules",objects:n.schedulesUsing,icon:(0,o.jsx)(S.JO,{name:"schedule",color:u.w.Gray400})},{name:"Sensors",objects:n.sensorsUsing,icon:(0,o.jsx)(S.JO,{name:"sensors",color:u.w.Gray400})}].filter(function(e){return e.objects.length>0}).map(function(e){var n=e.name,r=e.objects,i=e.icon;return(0,o.jsxs)("div",{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(h.pm,{children:n})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:"Name"})})}),(0,o.jsx)("tbody",{children:r.map(function(e){return(0,o.jsx)("tr",{children:(0,o.jsx)("td",{children:(0,o.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[i,(0,o.jsx)(k.rU,{to:(0,F.$U)(t,"/".concat(n.toLowerCase(),"/").concat(e)),children:(0,o.jsx)(w.g,{text:e})})]})})},n+":"+e)})})]})]},n)})]})},ResourceEntry=function(e){var n=e.url,t=e.name,r=e.description;return(0,o.jsxs)(c.x,{flex:{direction:"column"},children:[(0,o.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:4},style:{maxWidth:"100%"},children:[(0,o.jsx)(S.JO,{name:"resource",color:u.w.Blue700}),(0,o.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:n?(0,o.jsx)(k.rU,{to:n,style:{overflow:"hidden"},children:(0,o.jsx)(w.g,{text:t})}):(0,o.jsx)(w.g,{text:t})})]}),(0,o.jsx)(h.aU,{children:r})]})},q=O.ZP.div.withConfig({componentId:"sc-ea0a9a6e-0"})(_templateObject(),u.w.White),B=O.ZP.div.withConfig({componentId:"sc-ea0a9a6e-1"})(_templateObject1()),M=(0,l.Ps)(_templateObject2()),$=(0,l.Ps)(_templateObject3(),M,C.B)},98319:function(e,n,t){t.d(n,{K:function(){return VirtualizedResourceRow},f:function(){return VirtualizedResourceHeader}});var r=t(73235),i=t(52322),s=t(18399),o=t(71897),a=t(86412),l=t(16861),c=t(81308),u=t(43180);t(2784);var d=t(47933),p=t(35505),h=t(55658),f=t(38153),m=t(56043);function _templateObject(){var e=(0,r._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return _templateObject=function(){return e},e}var x="1.5fr 1fr 1fr",VirtualizedResourceRow=function(e){var n=e.name,t=e.description,r=e.repoAddress,p=e.start,x=e.height,g=e.resourceType,v=e.parentResources,b=e.jobsOpsUsing,y=e.assetKeysUsing,S=e.schedulesUsing,w=e.sensorsUsing,_=(0,m.$)(g),k=v.length+b.length+y.length+S.length+w.length;return(0,i.jsx)(h.X2,{$height:x,$start:p,children:(0,i.jsxs)(j,{border:"bottom",children:[(0,i.jsx)(h.E5,{children:(0,i.jsxs)(s.x,{flex:{direction:"column",gap:4},children:[(0,i.jsxs)(s.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,i.jsx)(o.JO,{name:"resource",color:a.w.Gray400}),(0,i.jsx)("span",{style:{fontWeight:500},children:(0,i.jsx)(d.rU,{to:(0,f.$U)(r,"/resources/".concat(n)),children:(0,i.jsx)(l.g,{text:n})})})]}),(0,i.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,i.jsx)(c.YS,{style:{color:a.w.Gray500,whiteSpace:"nowrap"},children:t})})]})}),(0,i.jsx)(h.E5,{children:(0,i.jsx)(u.u,{content:g,children:(0,i.jsx)(c.fv,{children:_})})}),(0,i.jsx)(h.E5,{children:(0,i.jsx)(d.rU,{to:(0,f.$U)(r,"/resources/".concat(n,"/uses")),children:k})})]})})},VirtualizedResourceHeader=function(){return(0,i.jsxs)(s.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:x,height:"32px",fontSize:"12px",color:a.w.Gray600},children:[(0,i.jsx)(h.qN,{children:"Name"}),(0,i.jsx)(h.qN,{children:"Type"}),(0,i.jsx)(h.qN,{children:"Uses"})]})},j=(0,p.ZP)(s.x).withConfig({componentId:"sc-c7396c09-0"})(_templateObject(),x)},76588:function(e,n,t){t.d(n,{L:function(){return k},g:function(){return WorkspaceResourcesRoot}});var r=t(58467),i=t(73235),s=t(52322),o=t(40794),a=t(60138),l=t(18399),c=t(63832),u=t(86412),d=t(92364),p=t(34822),h=t(2784),f=t(91195),m=t(55237),x=t(68028),j=t(28252),g=t(20763),v=t(44254),b=t(56121),y=t(85333),S=t(68577),w=t(55658),_=t(98319),VirtualizedResourceTable=function(e){var n=e.repoAddress,t=e.resources,r=h.useRef(null),i=(0,S.useVirtualizer)({count:t.length,getScrollElement:function(){return r.current},estimateSize:function(){return 64},overscan:10}),o=i.getTotalSize(),a=i.getVirtualItems();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.f,{}),(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsx)(w.W2,{ref:r,children:(0,s.jsx)(w.Nh,{$totalHeight:o,children:a.map(function(e){var r=e.index,i=e.key,o=e.size,a=e.start,l=t[r];return(0,s.jsx)(_.K,(0,y._)({repoAddress:n,height:o,start:a},l),i)})})})})]})};function _templateObject(){var e=(0,i._)(["\n  fragment ResourceEntryFragment on ResourceDetails {\n    name\n    description\n    resourceType\n    parentResources {\n      name\n    }\n    assetKeysUsing {\n      path\n    }\n    jobsOpsUsing {\n      job {\n        id\n      }\n    }\n    schedulesUsing\n    sensorsUsing\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,i._)(["\n  query WorkspaceResourcesQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        allTopLevelResourceDetails {\n          id\n          ...ResourceEntryFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject1=function(){return e},e}var WorkspaceResourcesRoot=function(e){var n=e.repoAddress;(0,x.Px)();var t=(0,v.Uz)(n);(0,j.j)("Resources: ".concat(t));var i=(0,r._)(h.useState(""),2),a=i[0],f=i[1],y=(0,b.$)(n),S=(0,o.a)(O,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:y}}),w=S.data,_=S.loading,k=(0,m.C4)(S,m.dT),R=a.trim().toLocaleLowerCase(),C=R.length>0,P=h.useMemo(function(){return(null==w?void 0:w.repositoryOrError.__typename)==="Repository"?w.repositoryOrError.allTopLevelResourceDetails:[]},[w]),T=h.useMemo(function(){var e=R.toLocaleLowerCase();return P.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[P,R]);return(0,s.jsxs)(l.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(g.h,{repoAddress:n,tab:"resources",refreshState:k,queryData:S}),(0,s.jsx)(l.x,{padding:{horizontal:24,vertical:16},children:(0,s.jsx)(p.oi,{icon:"search",value:a,onChange:function(e){return f(e.target.value)},placeholder:"Filter by resource name…",style:{width:"340px"}})}),_&&!w?(0,s.jsx)(l.x,{padding:64,children:(0,s.jsx)(c.$,{purpose:"page"})}):_&&!w?(0,s.jsx)(l.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(c.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:u.w.Gray600},children:"Loading resources…"})]})}):T.length?(0,s.jsx)(VirtualizedResourceTable,{repoAddress:n,resources:T}):C?(0,s.jsx)(l.x,{padding:{top:20},children:(0,s.jsx)(d.t,{icon:"search",title:"No matching resources",description:(0,s.jsxs)("div",{children:["No resources matching ",(0,s.jsx)("strong",{children:a})," were found in ",t]})})}):(0,s.jsx)(l.x,{padding:{top:20},children:(0,s.jsx)(d.t,{icon:"search",title:"No resources",description:"No resources were found in ".concat(t)})})]})},k=(0,a.Ps)(_templateObject()),O=(0,a.Ps)(_templateObject1(),f.B,k)},51339:function(e,n,t){t.d(n,{L:function(){return RepoSectionHeader},l:function(){return u}});var r=t(73235),i=t(52322),s=t(18399),o=t(71897),a=t(86412);t(2784);var l=t(35505),c=t(37160);function _templateObject(){var e=(0,r._)(["\n  background-color: ",";\n  border: 0;\n  box-shadow:\n    inset 0px -1px 0 ",",\n    inset 0px 1px 0 ",";\n  cursor: pointer;\n  display: block;\n  padding: 0;\n  width: 100%;\n  margin: 0;\n  height: ","px;\n  text-align: left;\n\n  :focus,\n  :active {\n    outline: none;\n  }\n\n  :hover {\n    background-color: ",";\n  }\n\n  ",'[aria-label="arrow_drop_down"] {\n    transition: transform 100ms linear;\n    ',"\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,r._)(["\n  font-weight: 600;\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,r._)(["\n  font-weight: 400;\n  color: ",";\n"]);return _templateObject2=function(){return e},e}var u=32,RepoSectionHeader=function(e){var n=e.expanded,t=e.onClick,r=e.repoName,l=e.repoLocation,u=e.showLocation,f=e.rightElement,m=r===c.Js;return(0,i.jsx)(d,{$open:n,onClick:t,children:(0,i.jsxs)(s.x,{flex:{alignItems:"center",justifyContent:"space-between"},padding:{horizontal:24},children:[(0,i.jsxs)(s.x,{flex:{alignItems:"center",gap:8},children:[(0,i.jsx)(o.JO,{name:"folder",color:a.w.Dark}),(0,i.jsxs)("div",{children:[(0,i.jsx)(p,{children:m?l:r}),u&&!m?(0,i.jsx)(h,{children:"@".concat(l)}):null]})]}),(0,i.jsxs)(s.x,{flex:{alignItems:"center",gap:8},children:[f,(0,i.jsx)(s.x,{margin:{top:2},children:(0,i.jsx)(o.JO,{name:"arrow_drop_down"})})]})]})})},d=l.ZP.button.withConfig({componentId:"sc-e47bf0de-0"})(_templateObject(),a.w.Gray50,a.w.KeylineGray,a.w.KeylineGray,u,a.w.Gray100,o.a1,function(e){return e.$open?null:"transform: rotate(-90deg);"}),p=l.ZP.span.withConfig({componentId:"sc-e47bf0de-1"})(_templateObject1()),h=l.ZP.span.withConfig({componentId:"sc-e47bf0de-2"})(_templateObject2(),a.w.Gray700)},98349:function(e,n,t){t.d(n,{JH:function(){return RunStatusPezList},qL:function(){return RunStatusOverlay}});var r=t(73235),i=t(52322),s=t(18399),o=t(37783),a=t(81308),l=t(86412),c=t(3842);t(2784);var u=t(47933),d=t(35505),p=t(87812),h=t(21485),f=t(87424),m=t(6315),x=t(38917);function _templateObject(){var e=(0,r._)(["\n  padding: 4px;\n  font-size: 12px;\n  width: 220px;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,r._)(["\n  padding: 8px;\n  box-shadow: inset 0 -1px ",";\n  font-family: ",";\n  font-size: 14px;\n  font-weight: 500;\n  color: ",";\n  max-width: 100%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  min-width: 0px;\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,r._)(["\n  padding: 8px;\n  font-size: 12px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,r._)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  padding: 4px 8px 8px;\n\n  :empty {\n    display: none;\n  }\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,r._)(["\n  background-color: ",";\n  border-radius: 2px;\n  height: 16px;\n  opacity: ",";\n  width: 8px;\n"]);return _templateObject4=function(){return e},e}var RunStatusPez=function(e){var n=e.status,t=e.opacity,r=f.YM[n];return(0,i.jsx)(y,{$color:r,$opacity:void 0===t?1:t})},RunStatusPezList=function(e){var n=e.fade,t=e.jobName,r=e.runs,a=r.length,l=.8/Math.max(3,a);return(0,i.jsx)(s.x,{flex:{direction:"row",alignItems:"center",gap:2},children:r.map(function(e,r){return(0,i.jsx)(o.J,{position:"top",interactionKind:"hover",content:(0,i.jsx)("div",{children:(0,i.jsx)(RunStatusOverlay,{run:e,name:t})}),hoverOpenDelay:100,children:(0,i.jsx)(RunStatusPez,{runId:e.id,status:e.status,opacity:n?1-(a-r-1)*l:1},e.id)},e.id)})})},RunStatusOverlay=function(e){var n=e.name,t=e.run;return(0,i.jsxs)(j,{children:[(0,i.jsx)(g,{children:n}),(0,i.jsxs)(v,{children:[(0,i.jsxs)(s.x,{flex:{alignItems:"center",direction:"row",gap:8},children:[(0,i.jsx)(h.K9,{status:t.status}),(0,i.jsx)(u.rU,{to:"/runs/".concat(t.id),children:(0,i.jsx)(a.fv,{style:{fontSize:"14px"},children:(0,x.EI)(t)})})]}),(0,i.jsxs)(s.x,{flex:{direction:"column",gap:4},padding:{top:2},children:[(0,i.jsx)(x.Zr,{run:t}),(0,i.jsx)(x.Tw,{run:t})]})]}),m.hd.has(t.status)||m.Ys.has(t.status)?(0,i.jsx)(b,{children:(0,i.jsx)(p.I,{runId:t.id})}):null]})},j=d.ZP.div.withConfig({componentId:"sc-9155d8b6-0"})(_templateObject()),g=d.ZP.div.withConfig({componentId:"sc-9155d8b6-1"})(_templateObject1(),l.w.KeylineGray,c.b.default,l.w.Dark),v=d.ZP.div.withConfig({componentId:"sc-9155d8b6-2"})(_templateObject2()),b=d.ZP.div.withConfig({componentId:"sc-9155d8b6-3"})(_templateObject3()),y=d.ZP.div.withConfig({componentId:"sc-9155d8b6-4"})(_templateObject4(),function(e){return e.$color},function(e){return e.$opacity})},65435:function(e,n,t){t.d(n,{Y:function(){return RunStatusTagsWithCounts},q:function(){return RunTimeline}});var r=t(87612),i=t(85333),s=t(6692),o=t(58467),a=t(73235),l=t(82550),c=t(52322),u=t(21106),d=t(18399),p=t(43180),h=t(57830),f=t(86412),m=t(3842),x=t(71897),j=t(16861),g=t(37783),v=t(63832),b=t(81308),y=t(68577),S=t(2784),w=t(47933),_=t(35505),k=t(68884),O=t(30301),R=t(16148),C=t(55658),P=t(77277),T=t(59686),I=t(94392),useFormatDateTime=function(){var e=S.useContext(T.JB),n=(0,o._)(e.timezone,1)[0],t=(0,o._)(e.hourCycle,1)[0],r="Automatic"===n?(0,I.cw)():n,s="Automatic"===t?void 0:t;return S.useCallback(function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:navigator.language;return Intl.DateTimeFormat(t,(0,i._)({timeZone:r,hourCycle:s},n)).format(e)},[r,s])},E=t(42885),N=t(86839),D=t(44254),A=t(31197),F=t(51339),z=t(21485),L=t(6315),U=t(88846),q=t(16413),statusToColor=function(e){switch(e){case"queued":case"scheduled":return f.w.Blue200;case"inProgress":return f.w.Blue500;case"failed":return f.w.Red500;case"succeeded":return f.w.Green500}},mergeStatusToBackground=function(e){var n={scheduled:0,queued:0,inProgress:0,failed:0,succeeded:0};e.forEach(function(e){var t=e.status;"SCHEDULED"===t?n.scheduled++:L.sy.has(t)?n.queued++:L.Ys.has(t)?n.inProgress++:L.hd.has(t)?n.failed++:L._m.has(t)&&n.succeeded++});var t=Object.keys(n).filter(function(e){return n[e]>0});if(1===t.length)return statusToColor((0,o._)(t,1)[0]);for(var r=e.length,i=[n.failed>0?{status:"failed",pct:100*n.failed/r}:null,n.succeeded>0?{status:"succeeded",pct:100*n.succeeded/r}:null,n.inProgress>0?{status:"inProgress",pct:100*n.inProgress/r}:null,n.queued>0?{status:"queued",pct:100*n.queued/r}:null,n.scheduled>0?{status:"scheduled",pct:100*n.scheduled/r}:null].filter(Boolean),s="",a=0,l=0,c=0;c<i.length;c++){var u=i[c];if(u){var d=u.status,p=u.pct;l=a,a+=p;var h=statusToColor(d);0===c?s+="".concat(h," ").concat(p.toFixed(1),"%, "):c===i.length-1?s+="".concat(h," ").concat(l.toFixed(1),"%"):s+="".concat(h," ").concat(l.toFixed(1),"% ").concat(a.toFixed(1),"%, ")}}return"linear-gradient(to right, ".concat(s,")")};function _templateObject(){var e=(0,a._)(["\n  white-space: nowrap;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,a._)(["\n  position: absolute;\n  top: 0;\n  left: ","px;\n  right: 0;\n  font-family: ",";\n  color: ",";\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,a._)(["\n  display: flex;\n  align-items: center;\n  box-shadow:\n    inset 1px 0 0 ",",\n    inset 0 1px 0 ",",\n    inset -1px 0 0 ",";\n  height: ","px;\n  position: relative;\n  user-select: none;\n  font-size: 12px;\n  width: 100%;\n  overflow: hidden;\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,a._)(["\n  position: absolute;\n  padding: 8px 0;\n  box-shadow: inset 1px 0 0 ",";\n  white-space: nowrap;\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,a._)(["\n  position: absolute;\n  padding: 8px;\n  box-shadow: inset 1px 0 0 ",";\n  white-space: nowrap;\n"]);return _templateObject4=function(){return e},e}function _templateObject5(){var e=(0,a._)(["\n  height: 100%;\n  position: relative;\n  width: 100%;\n  box-shadow:\n    inset 1px 0 0 ",",\n    inset -1px 0 0 ",";\n"]);return _templateObject5=function(){return e},e}function _templateObject6(){var e=(0,a._)(["\n  background-color: ",";\n  height: 100%;\n  position: absolute;\n  top: 0;\n  width: 1px;\n"]);return _templateObject6=function(){return e},e}function _templateObject7(){var e=(0,a._)(["\n  background-color: ",";\n  border-radius: 1px;\n  color: ",";\n  cursor: default;\n  font-size: 12px;\n  line-height: 12px;\n  margin-left: -12px;\n  padding: 1px 4px;\n  position: absolute;\n  top: -14px;\n  user-select: none;\n"]);return _templateObject7=function(){return e},e}function _templateObject8(){var e=(0,a._)(["\n  align-items: center;\n  box-shadow: inset 0 -1px 0 ",";\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  padding: 1px 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  overflow: hidden;\n\n  :hover {\n    background-color: ",";\n  }\n"]);return _templateObject8=function(){return e},e}function _templateObject9(){var e=(0,a._)(["\n  align-items: center;\n  display: flex;\n  font-size: 13px;\n  justify-content: flex-start;\n  gap: 8px;\n  line-height: 16px;\n  overflow: hidden;\n  padding: 0 12px 0 24px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: ","px;\n"]);return _templateObject9=function(){return e},e}function _templateObject10(){var e=(0,a._)(["\n  flex: 1;\n  position: relative;\n  height: ","px;\n"]);return _templateObject10=function(){return e},e}function _templateObject11(){var e=(0,a._)(["\n  align-items: center;\n  background: ",";\n  border-radius: 2px;\n  height: ","px;\n  position: absolute;\n  top: 2px;\n  ",";\n\n  transition:\n    background-color 300ms linear,\n    width 300ms ease-in-out;\n\n  .chunk-popover-target {\n    display: block;\n    height: 100%;\n    width: 100%;\n  }\n"]);return _templateObject11=function(){return e},e}function _templateObject12(){var e=(0,a._)(["\n  color: ",";\n  cursor: default;\n  font-family: ",";\n  font-size: 14px;\n  font-weight: 600;\n  user-select: none;\n"]);return _templateObject12=function(){return e},e}function _templateObject13(){var e=(0,a._)(["\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n"]);return _templateObject13=function(){return e},e}var RunTimeline=function(e){var n=e.loading,t=e.jobs,a=e.range,p=S.useRef(null),h=(0,u.S)(),f=h.viewport.width,m=h.containerProps.ref,x=Date.now(),j=(0,o._)(a,2),g=(j[0],j[1]),v=t.reduce(function(e,n){var t=n.repoAddress,o=(0,D.Qj)(t),a=e[o]||[];return(0,s._)((0,i._)({},e),(0,r._)({},o,(0,l._)(a).concat([n])))},{}),b=Object.keys(v),w=(0,E.N)(k.y,b),_=w.expandedKeys,O=w.onToggle,R=w.onToggleAll,T=S.useMemo(function(){var e=[];return Object.entries(v).forEach(function(n){var t=(0,o._)(n,2),r=t[0],i=t[1],s=(0,A.g)(r);s&&(e.push({type:"header",repoAddress:s,jobCount:i.length}),_.includes(r)&&i.forEach(function(n){e.push({type:"job",repoAddress:s,job:n})}))}),e},[v,_]),I=(0,y.useVirtualizer)({count:T.length,getScrollElement:function(){return p.current},estimateSize:function(e){return 32},overscan:40}),N=I.getTotalSize(),z=I.getVirtualItems();if(!f)return(0,c.jsx)("div",{style:{height:174},ref:m});var L=Object.keys(v).sort(function(e,n){return e.localeCompare(n)}),U=L.filter(function(e){return _.includes(e)}).reduce(function(e,n){return e+v[n].length},0),q=L.length*F.l+32*U,B=(0,P.w)(L.map(function(e){var n;return(null===(n=(0,A.g)(e))||void 0===n?void 0:n.name)||""})),M=L.length>0;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{ref:m}),(0,c.jsx)(d.x,{padding:{left:24},flex:{direction:"column",justifyContent:"center"},style:{fontSize:"16px",flex:"0 0 ".concat(64,"px")},border:"top-and-bottom",children:"Jobs"}),(0,c.jsx)("div",{style:{position:"relative"},children:(0,c.jsx)(TimeDividers,{interval:36e5,range:a,height:M?q:0})}),L.length?(0,c.jsx)("div",{style:{overflow:"hidden",position:"relative"},children:(0,c.jsx)(C.W2,{ref:p,children:(0,c.jsx)(C.Nh,{$totalHeight:N,children:z.map(function(e){var n=e.index,t=e.key,r=e.size,i=e.start,s=T[n];if("header"===s.type){var o=(0,D.Qj)(s.repoAddress),l=s.repoAddress.name;return(0,c.jsx)(TimelineHeaderRow,{expanded:_.includes(o),height:r,top:i,repoAddress:s.repoAddress,isDuplicateRepoName:!!(l&&B.has(l)),jobs:v[o],onToggle:O,onToggleAll:R},o)}return(0,c.jsx)(RunTimelineRow,{job:s.job,height:r,top:i,range:a,width:f},t)})})})}):(0,c.jsx)(RunsEmptyOrLoading,{loading:void 0!==n&&n,includesTicks:x<=g})]})},TimelineHeaderRow=function(e){var n=e.expanded,t=e.onToggle,r=e.onToggleAll,i=e.repoAddress,s=e.isDuplicateRepoName,o=e.jobs,a=e.height,l=e.top;return(0,c.jsx)(N.vG,{expanded:n,height:a,start:l,repoAddress:i,showLocation:s,onToggle:t,onToggleAll:r,rightElement:(0,c.jsx)(B,{jobs:o})})},B=S.memo(function(e){var n=e.jobs,t=S.useMemo(function(){var e=0,t=0,r=0;return n.forEach(function(n){n.runs.forEach(function(n){var i=n.status;"SCHEDULED"!==i&&(L.Ys.has(i)?e++:L.hd.has(i)?t++:L._m.has(i)&&r++)})}),{inProgressCount:e,failedCount:t,succeededCount:r}},[n]);return(0,c.jsx)(RunStatusTagsWithCounts,(0,i._)({},t))}),RunStatusTagsWithCounts=function(e){var n=e.inProgressCount,t=e.succeededCount,r=e.failedCount;return(0,c.jsxs)(d.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[n>0?(0,c.jsx)(p.u,{content:(0,c.jsx)(M,{children:1===n?"1 run in progress":"".concat(n," runs in progress")}),placement:"top",children:(0,c.jsx)(h.V,{intent:"primary",children:n})}):null,t>0?(0,c.jsx)(p.u,{content:(0,c.jsx)(M,{children:1===t?"1 run succeeded":"".concat(t," runs succeeded")}),placement:"top",children:(0,c.jsx)(h.V,{intent:"success",children:t})}):null,r>0?(0,c.jsx)(p.u,{content:(0,c.jsx)(M,{children:1===r?"1 run failed":"".concat(r," runs failed")}),placement:"top",children:(0,c.jsx)(h.V,{intent:"danger",children:r})}):null]})},M=_.ZP.span.withConfig({componentId:"sc-5670c425-0"})(_templateObject()),$={month:"numeric",day:"numeric",year:"numeric"},V={month:"short",day:"numeric",year:"numeric",timeZoneName:"short"},J={hour:"numeric"},TimeDividers=function(e){var n=e.interval,t=e.range,r=e.height,i=(0,o._)(t,2),s=i[0],a=i[1],u=useFormatDateTime(),p=S.useMemo(function(){for(var e=a-s,n=u(new Date(s),V,"en-US"),t=[],r=new Date(n);r.valueOf()<a;){var i=r.getTime(),o=new Date(i).setDate(r.getDate()+1);r=new Date(o),t.push({dayStart:i,dayEnd:o})}return t.map(function(n){var t=n.dayStart,r=n.dayEnd,i=new Date(t),o=t-s,a=r-t,l=Math.max(0,o/e*100);return{label:u(i,$),key:i.toString(),left:l,width:Math.min(100,(o+a)/e*100)-l}})},[a,u,s]),h=S.useMemo(function(){var e=a-s,t=s%n,r=s-t,i=Math.ceil(e/n)+1;return(0,l._)(Array(i)).map(function(t,i){var o=r+i*n,a=new Date(o);return{label:u(a,J).replace(" ",""),key:a.toString(),left:(o-s)/e*100}}).filter(function(e){return e.left>0})},[a,s,n,u]),m=Date.now(),x="".concat(((m-s)/(a-s)*100).toPrecision(3),"%");return(0,c.jsxs)(G,{style:{height:"".concat(r,"px"),top:"-".concat(64,"px")},children:[(0,c.jsx)(K,{children:p.map(function(e){return(0,c.jsx)(Z,{style:{left:"".concat(e.left.toPrecision(3),"%"),width:"".concat(e.width.toPrecision(3),"%")},children:e.width>10?(0,c.jsx)(d.x,{flex:{justifyContent:"center"},children:e.label}):null},e.key)})}),(0,c.jsx)(K,{children:h.map(function(e){return(0,c.jsx)(H,{style:{left:"".concat(e.left.toPrecision(3),"%")},children:e.label},e.key)})}),(0,c.jsxs)(W,{children:[(0,c.jsx)(Q,{style:{left:0,backgroundColor:f.w.Gray200}}),h.map(function(e){return(0,c.jsx)(Q,{style:{left:"".concat(e.left.toPrecision(3),"%")}},e.key)}),m>=s&&m<=a?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Y,{style:{left:x},children:"Now"}),(0,c.jsx)(Q,{style:{left:x,backgroundColor:f.w.Blue500,zIndex:1}})]}):null]})]})},G=_.ZP.div.withConfig({componentId:"sc-5670c425-1"})(_templateObject1(),320,m.b.monospace,f.w.Gray800),K=_.ZP.div.withConfig({componentId:"sc-5670c425-2"})(_templateObject2(),f.w.KeylineGray,f.w.KeylineGray,f.w.KeylineGray,32),Z=_.ZP.div.withConfig({componentId:"sc-5670c425-3"})(_templateObject3(),f.w.KeylineGray),H=_.ZP.div.withConfig({componentId:"sc-5670c425-4"})(_templateObject4(),f.w.KeylineGray),W=_.ZP.div.withConfig({componentId:"sc-5670c425-5"})(_templateObject5(),f.w.KeylineGray,f.w.KeylineGray),Q=_.ZP.div.withConfig({componentId:"sc-5670c425-6"})(_templateObject6(),f.w.KeylineGray),Y=_.ZP.div.withConfig({componentId:"sc-5670c425-7"})(_templateObject7(),f.w.Blue500,f.w.White),RunTimelineRow=function(e){var n=e.job,t=e.top,r=e.height,i=e.range,s=e.width,a=(0,o._)(i,2),l=a[0],u=a[1],p=s-320,h=n.runs,m=S.useMemo(function(){return(0,q.i)({runs:h,start:l,end:u,width:p,minChunkWidth:2,minMultipleWidth:12})},[h,l,u,p]);return n.runs.length?(0,c.jsxs)(X,{$height:r,$start:t,children:[(0,c.jsxs)(ee,{children:[(0,c.jsx)(x.JO,{name:"asset"===n.jobType?"asset":"job"}),(0,c.jsx)("div",{style:{width:268},children:"asset"===n.jobType?(0,c.jsx)("span",{style:{color:f.w.Gray900},children:(0,c.jsx)(j.g,{text:n.jobName})}):(0,c.jsx)(w.rU,{to:n.path,children:(0,c.jsx)(j.g,{text:n.jobName})})})]}),(0,c.jsx)(en,{children:m.map(function(e){var t=e.left,r=e.width,i=e.runs.length;return(0,c.jsx)(et,{$background:mergeStatusToBackground(e.runs),$multiple:i>1,style:{left:"".concat(t,"px"),width:"".concat(r,"px")},children:(0,c.jsx)(g.J,{content:(0,c.jsx)(RunHoverContent,{job:n,batch:e}),position:"top",interactionKind:"hover",className:"chunk-popover-target",children:(0,c.jsx)(d.x,{flex:{direction:"row",justifyContent:"center",alignItems:"center"},style:{height:"100%"},children:i>1?(0,c.jsx)(er,{children:e.runs.length}):null})})},e.runs[0].id)})})]}):null},RunsEmptyOrLoading=function(e){var n=e.loading,t=e.includesTicks;return(0,c.jsx)(d.x,{background:f.w.White,padding:{vertical:24},flex:{direction:"row",justifyContent:"center"},border:"top-and-bottom",children:n?(0,c.jsxs)(d.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,c.jsx)(v.$,{purpose:"body-text"}),t?"Loading runs and scheduled ticks":"Loading runs"]}):(0,c.jsxs)(d.x,{flex:{direction:"column",gap:12,alignItems:"center"},children:[(0,c.jsx)("div",{children:t?"No runs or scheduled ticks in this time period.":"No runs in this time period."}),(0,c.jsxs)(d.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,c.jsx)(R.A,{icon:(0,c.jsx)(x.JO,{name:"add_circle"}),to:"/overview/jobs",children:"Launch a run"}),(0,c.jsx)("span",{children:"or"}),(0,c.jsx)(R.A,{icon:(0,c.jsx)(x.JO,{name:"materialization"}),to:"/asset-groups",children:"Materialize an asset"})]})]})})},X=_.ZP.div.attrs(function(e){var n=e.$height,t=e.$start;return{style:{height:"".concat(n,"px"),transform:"translateY(".concat(t,"px)")}}}).withConfig({componentId:"sc-5670c425-8"})(_templateObject8(),f.w.KeylineGray,f.w.Gray10),ee=_.ZP.div.withConfig({componentId:"sc-5670c425-9"})(_templateObject9(),320),en=_.ZP.div.withConfig({componentId:"sc-5670c425-10"})(_templateObject10(),32),et=_.ZP.div.withConfig({componentId:"sc-5670c425-11"})(_templateObject11(),function(e){return e.$background},28,function(e){return e.$multiple?"min-width: ".concat(12,"px"):null}),er=_.ZP.div.withConfig({componentId:"sc-5670c425-12"})(_templateObject12(),f.w.White,m.b.monospace),RunHoverContent=function(e){var n=e.job,t=e.batch,r=t.runs.slice(0,50),i=t.runs.length-r.length;return(0,c.jsxs)(d.x,{style:{width:"260px"},children:[(0,c.jsx)(d.x,{padding:12,border:"bottom",children:(0,c.jsx)(ei,{children:n.jobName})}),(0,c.jsx)("div",{style:{maxHeight:"240px",overflowY:"auto"},children:r.map(function(e,n){return(0,c.jsxs)(d.x,{border:n>0?"top":null,flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},padding:{vertical:8,horizontal:12},children:[(0,c.jsxs)(d.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,c.jsx)(z.O_,{status:e.status,size:8}),"SCHEDULED"===e.status?"Scheduled":(0,c.jsx)(w.rU,{to:"/runs/".concat(e.id),children:(0,c.jsx)(b.fv,{children:e.id.slice(0,8)})})]}),(0,c.jsx)(b.fv,{children:"SCHEDULED"===e.status?(0,c.jsx)(O.v,{timestamp:e.startTime/1e3}):(0,c.jsx)(U.Q,{startUnix:e.startTime/1e3,endUnix:e.endTime/1e3})})]},e.id)})}),i>0?(0,c.jsx)(d.x,{padding:12,border:"top",children:(0,c.jsxs)(w.rU,{to:"".concat(n.path,"/runs"),children:["+ ",i," more"]})}):null]})},ei=_.ZP.strong.withConfig({componentId:"sc-5670c425-13"})(_templateObject13())},16413:function(e,n,t){t.d(n,{a:function(){return overlap},i:function(){return batchRunsForTimeline}});var r=t(82550),overlap=function(e,n){return!(e.end<n.start||n.end<e.start)},batchRunsForTimeline=function(e){for(var n=e.runs,t=e.start,i=e.end,s=e.width,o=e.minChunkWidth,a=e.minMultipleWidth,l=i-t,c=(Date.now()-t)/(i-t)*s,u=n.map(function(e){var n=e.startTime,r=e.endTime||Date.now();return{runs:[e],startTime:n,endTime:r,left:Math.max(0,Math.floor((n-t)/l*s)),width:Math.max(o,Math.min(Math.ceil((r-n)/l*s),Math.ceil((r-t)/l*s)))}}).sort(function(e,n){return n.left-e.left}),d=[];u.length;){var p=u.shift(),h=u[0];if(p){if(h&&canBatch(p,h,a,c)){u.shift(),p.runs=(0,r._)(p.runs).concat((0,r._)(h.runs)),p.startTime=Math.min(p.startTime,h.startTime),p.endTime=Math.max(p.endTime,h.endTime);var f=Math.max(p.left+a,p.left+p.width,h.left+h.width),m=Math.min(p.left,h.left);p.width=f-m,p.left=m,u.unshift(p)}else d.push(p)}}return d},canBatch=function(e,n,t,r){var i=e.left,s=e.left+Math.max(e.width,t),o=n.left,a=n.left+Math.max(n.width,t),l=Math.min(e.left,n.left),c=Math.max(e.left+Math.max(e.width,t),n.left+Math.max(n.width,t));return overlap({start:i,end:s},{start:o,end:a})&&(l>r||c<r)}},24808:function(e,n,t){t.d(n,{_:function(){return ScheduleBulkActionMenu}});var r=t(58467),i=t(52322),s=t(37783),o=t(44678),a=t(9001),l=t(71897),c=t(2784),u=t(25729),d=t(81862),p=t(22970),h=t(33379),f=t(38058),m=t(59692),x=t(86412),j=t(10952),g=t(56744),v=t(66213),b=t(55055),ScheduleStateChangeDialog=function(e){var n,t,s,o=e.openWithIntent,u=e.onClose,y=e.onComplete,S=e.schedules,w=S.length,_=(0,r._)((0,g.s)(),2),k=_[0],O=_[1];c.useEffect(function(){"not-open"===o&&O({type:"reset"})},[o,O]);var R=(0,r._)((0,h.D)(b.Wz),1)[0],C=(0,r._)((0,h.D)(b.d0),1)[0],P=(n=(0,d._)(function(e){var n,t,r;return(0,p.Jh)(this,function(i){switch(i.label){case 0:return n=e.repoAddress,t=e.scheduleName,[4,R({variables:{scheduleSelector:{repositoryLocationName:n.location,repositoryName:n.name,scheduleName:t}}})];case 1:switch(null==(r=i.sent().data)?void 0:r.startSchedule.__typename){case"ScheduleStateResult":O({type:"update-success"});break;case"UnauthorizedError":case"PythonError":O({type:"update-error",name:t,error:r.startSchedule.message})}return[2]}})}),function(e){return n.apply(this,arguments)}),T=(t=(0,d._)(function(e){var n,t,r;return(0,p.Jh)(this,function(i){switch(i.label){case 0:return n=e.scheduleName,[4,C({variables:{scheduleOriginId:(t=e.scheduleState).id,scheduleSelectorId:t.selectorId}})];case 1:switch(null==(r=i.sent().data)?void 0:r.stopRunningSchedule.__typename){case"ScheduleStateResult":O({type:"update-success"});break;case"UnauthorizedError":case"PythonError":O({type:"update-error",name:n,error:r.stopRunningSchedule.message})}return[2]}})}),function(e){return t.apply(this,arguments)}),I=(s=(0,d._)(function(){var e,n,t,r,i,s,a;return(0,p.Jh)(this,function(l){switch(l.label){case 0:if("not-open"===o)return[2];O({type:"start"}),e=!0,n=!1,t=void 0,l.label=1;case 1:l.trys.push([1,8,9,10]),r=S[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,7];if(s=i.value,"start"!==o)return[3,4];return[4,P(s)];case 3:return l.sent(),[3,6];case 4:return[4,T(s)];case 5:l.sent(),l.label=6;case 6:return e=!0,[3,2];case 7:return[3,10];case 8:return a=l.sent(),n=!0,t=a,[3,10];case 9:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 10:return O({type:"complete"}),y(),[2]}})}),function(){return s.apply(this,arguments)}),E="updating"!==k.step;return(0,i.jsxs)(j.Vq,{isOpen:"not-open"!==o,title:"start"===o?"Start schedules":"Stop schedules",canEscapeKeyClose:E,canOutsideClickClose:E,onClose:u,children:[(0,i.jsx)(j.a7,{children:(0,i.jsxs)(m.Z,{direction:"column",spacing:24,children:[function(){if("not-open"===o)return null;switch(k.step){case"initial":if("stop"===o)return(0,i.jsx)("div",{children:"".concat(w," ").concat(1===w?"schedule":"schedules"," will be stopped. Do you want to continue?")});return(0,i.jsx)("div",{children:"".concat(w," ").concat(1===w?"schedule":"schedules"," will be started. Do you want to continue?")});case"updating":case"completed":var e=w>0?k.completion.completed/w:1;return(0,i.jsxs)(m.Z,{direction:"column",spacing:8,children:[(0,i.jsx)(f.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===k.step?(0,i.jsx)(v.c,{message:"Schedules are being updated, please do not navigate away yet."}):null]});default:return null}}(),function(){if("not-open"===o||"initial"===k.step)return null;if("updating"===k.step)return(0,i.jsx)("div",{children:"Please do not close the window or navigate away while schedules are being updated."});var e=k.completion.errors,n=Object.keys(e).length,t=k.completion.completed-n;return(0,i.jsxs)(m.Z,{direction:"column",spacing:8,children:[t?(0,i.jsxs)(m.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,i.jsx)(l.JO,{name:"check_circle",color:x.w.Green500}),(0,i.jsx)("div",{children:"start"===o?"Successfully started ".concat(1===t?"1 schedule":"".concat(t," schedules"),"."):"Successfully stopped ".concat(1===t?"1 schedule":"".concat(t," schedules"),".")})]}):null,n?(0,i.jsxs)(m.Z,{direction:"column",spacing:8,children:[(0,i.jsxs)(m.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,i.jsx)(l.JO,{name:"warning",color:x.w.Yellow500}),(0,i.jsx)("div",{children:"start"===o?"Could not start ".concat(1===n?"1 schedule":"".concat(n," schedules"),"."):"Could not stop ".concat(1===n?"1 schedule":"".concat(n," schedules"),".")})]}),(0,i.jsx)("ul",{children:Object.keys(e).map(function(n){return(0,i.jsx)("li",{children:(0,i.jsxs)(m.Z,{direction:"row",spacing:8,children:[(0,i.jsxs)("strong",{children:[n,":"]}),e[n]?(0,i.jsx)("div",{children:e[n]}):null]})},n)})})]}):null]})}()]})}),(0,i.jsx)(j.cN,{children:function(){if("not-open"===o)return null;switch(k.step){case"initial":var e="start"===o?"Start ".concat(1===w?"1 schedule":"".concat(w," schedules")):"Stop ".concat(1===w?"1 schedule":"".concat(w," schedules"));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.zx,{intent:"none",onClick:u,children:"Cancel"}),(0,i.jsx)(a.zx,{intent:"primary",onClick:I,children:e})]});case"updating":var n="start"===o?"Starting ".concat(1===w?"1 schedule":"".concat(w," schedules")):"Stopping ".concat(1===w?"1 schedule":"".concat(w," schedules"));return(0,i.jsx)(a.zx,{intent:"primary",disabled:!0,children:n});case"completed":return(0,i.jsx)(a.zx,{intent:"primary",onClick:u,children:"Done"})}}()})]})},ScheduleBulkActionMenu=function(e){var n=e.schedules,t=e.onDone,d=n.length,p=(0,r._)(c.useState("not-open"),2),h=p[0],f=p[1],m=c.useMemo(function(){return(0,u.H)(n.map(function(e){return e.scheduleState}))},[n]),x=m.anyOff,j=m.anyOn;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.J,{content:(0,i.jsxs)(o.v2,{children:[(0,i.jsx)(o.sN,{text:"Start ".concat(1===d?"1 schedule":"".concat(d," schedules")),disabled:!x,"aria-disabled":!x,icon:"toggle_on",onClick:function(){f("start")}}),(0,i.jsx)(o.sN,{text:"Stop ".concat(1===d?"1 schedule":"".concat(d," schedules")),disabled:!j,"aria-disabled":!j,icon:"toggle_off",onClick:function(){f("stop")}})]}),placement:"bottom-end",children:(0,i.jsx)(a.zx,{disabled:!d,intent:"primary",rightIcon:(0,i.jsx)(l.JO,{name:"expand_more"}),children:"Actions"})}),(0,i.jsx)(ScheduleStateChangeDialog,{openWithIntent:h,schedules:n,onClose:function(){return f("not-open")},onComplete:function(){t()}})]})}},84826:function(e,n,t){t.d(n,{K:function(){return SchedulerInfo}});var r=t(85333),i=t(6692),s=t(2281),o=t(52322),a=t(18399),l=t(9676);t(2784);var SchedulerInfo=function(e){var n=e.daemonHealth,t=(0,s._)(e,["daemonHealth"]),c=void 0;if(n){var u=n.allDaemonStatuses.filter(function(e){return"SCHEDULER"===e.daemonType});if(u.length>0){var d=u[0];c=d.required&&d.healthy}}return!1===c?(0,o.jsx)(a.x,(0,i._)((0,r._)({},t),{children:(0,o.jsx)(l.b,{intent:"warning",title:"The scheduler daemon is not running.",description:(0,o.jsxs)("div",{children:["See the"," ",(0,o.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})})):null}},157:function(e,n,t){t.d(n,{g:function(){return makeScheduleKey}});var r=t(44254),makeScheduleKey=function(e,n){return"".concat((0,r.Uz)(e),"-").concat(n)}},67802:function(e,n,t){t.d(n,{b:function(){return SensorBulkActionMenu}});var r=t(58467),i=t(52322),s=t(37783),o=t(44678),a=t(9001),l=t(71897),c=t(2784),u=t(25729),d=t(81862),p=t(22970),h=t(33379),f=t(38058),m=t(59692),x=t(86412),j=t(10952),g=t(56744),v=t(66213),b=t(57981),SensorStateChangeDialog=function(e){var n,t,s,o=e.openWithIntent,u=e.onClose,y=e.onComplete,S=e.sensors,w=S.length,_=(0,r._)((0,g.s)(),2),k=_[0],O=_[1];c.useEffect(function(){"not-open"===o&&O({type:"reset"})},[o,O]);var R=(0,r._)((0,h.D)(b.VE),1)[0],C=(0,r._)((0,h.D)(b.Xu),1)[0],P=(n=(0,d._)(function(e){var n,t,r;return(0,p.Jh)(this,function(i){switch(i.label){case 0:return n=e.repoAddress,t=e.sensorName,[4,R({variables:{sensorSelector:{repositoryLocationName:n.location,repositoryName:n.name,sensorName:t}}})];case 1:switch(null==(r=i.sent().data)?void 0:r.startSensor.__typename){case"Sensor":O({type:"update-success"});break;case"SensorNotFoundError":case"UnauthorizedError":case"PythonError":O({type:"update-error",name:t,error:r.startSensor.message})}return[2]}})}),function(e){return n.apply(this,arguments)}),T=(t=(0,d._)(function(e){var n,t,r;return(0,p.Jh)(this,function(i){switch(i.label){case 0:return n=e.sensorName,[4,C({variables:{jobOriginId:(t=e.sensorState).id,jobSelectorId:t.selectorId}})];case 1:switch(null==(r=i.sent().data)?void 0:r.stopSensor.__typename){case"StopSensorMutationResult":O({type:"update-success"});break;case"UnauthorizedError":case"PythonError":O({type:"update-error",name:n,error:r.stopSensor.message})}return[2]}})}),function(e){return t.apply(this,arguments)}),I=(s=(0,d._)(function(){var e,n,t,r,i,s,a;return(0,p.Jh)(this,function(l){switch(l.label){case 0:if("not-open"===o)return[2];O({type:"start"}),e=!0,n=!1,t=void 0,l.label=1;case 1:l.trys.push([1,8,9,10]),r=S[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,7];if(s=i.value,"start"!==o)return[3,4];return[4,P(s)];case 3:return l.sent(),[3,6];case 4:return[4,T(s)];case 5:l.sent(),l.label=6;case 6:return e=!0,[3,2];case 7:return[3,10];case 8:return a=l.sent(),n=!0,t=a,[3,10];case 9:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 10:return O({type:"complete"}),y(),[2]}})}),function(){return s.apply(this,arguments)}),E="updating"!==k.step;return(0,i.jsxs)(j.Vq,{isOpen:"not-open"!==o,title:"start"===o?"Start sensors":"Stop sensors",canEscapeKeyClose:E,canOutsideClickClose:E,onClose:u,children:[(0,i.jsx)(j.a7,{children:(0,i.jsxs)(m.Z,{direction:"column",spacing:24,children:[function(){if("not-open"===o)return null;switch(k.step){case"initial":if("stop"===o)return(0,i.jsx)("div",{children:"".concat(w," ").concat(1===w?"sensor":"sensors"," will be stopped. Do you want to continue?")});return(0,i.jsx)("div",{children:"".concat(w," ").concat(1===w?"sensor":"sensors"," will be started. Do you want to continue?")});case"updating":case"completed":var e=w>0?k.completion.completed/w:1;return(0,i.jsxs)(m.Z,{direction:"column",spacing:8,children:[(0,i.jsx)(f.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===k.step?(0,i.jsx)(v.c,{message:"Sensors are being updated, please do not navigate away yet."}):null]});default:return null}}(),function(){if("not-open"===o||"initial"===k.step)return null;if("updating"===k.step)return(0,i.jsx)("div",{children:"Please do not close the window or navigate away while sensors are being updated."});var e=k.completion.errors,n=Object.keys(e).length,t=k.completion.completed-n;return(0,i.jsxs)(m.Z,{direction:"column",spacing:8,children:[t?(0,i.jsxs)(m.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,i.jsx)(l.JO,{name:"check_circle",color:x.w.Green500}),(0,i.jsx)("div",{children:"start"===o?"Successfully started ".concat(1===t?"1 sensor":"".concat(t," sensors"),"."):"Successfully stopped ".concat(1===t?"1 sensor":"".concat(t," sensors"),".")})]}):null,n?(0,i.jsxs)(m.Z,{direction:"column",spacing:8,children:[(0,i.jsxs)(m.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,i.jsx)(l.JO,{name:"warning",color:x.w.Yellow500}),(0,i.jsx)("div",{children:"start"===o?"Could not start ".concat(1===n?"1 sensor":"".concat(n," sensors"),":"):"Could not stop ".concat(1===n?"1 sensor":"".concat(n," sensors"),":")})]}),(0,i.jsx)("ul",{style:{margin:"8px 0"},children:Object.keys(e).map(function(n){return(0,i.jsx)("li",{children:(0,i.jsxs)(m.Z,{direction:"row",spacing:8,children:[(0,i.jsxs)("strong",{children:[n,":"]}),e[n]?(0,i.jsx)("div",{children:e[n]}):null]})},n)})})]}):null]})}()]})}),(0,i.jsx)(j.cN,{children:function(){if("not-open"===o)return null;switch(k.step){case"initial":var e="start"===o?"Start ".concat(1===w?"1 sensor":"".concat(w," sensors")):"Stop ".concat(1===w?"1 sensor":"".concat(w," sensors"));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.zx,{intent:"none",onClick:u,children:"Cancel"}),(0,i.jsx)(a.zx,{intent:"primary",onClick:I,children:e})]});case"updating":var n="start"===o?"Starting ".concat(1===w?"1 sensor":"".concat(w," sensors")):"Stopping ".concat(1===w?"1 sensor":"".concat(w," sensors"));return(0,i.jsx)(a.zx,{intent:"primary",disabled:!0,children:n});case"completed":return(0,i.jsx)(a.zx,{intent:"primary",onClick:u,children:"Done"})}}()})]})},SensorBulkActionMenu=function(e){var n=e.sensors,t=e.onDone,d=n.length,p=(0,r._)(c.useState("not-open"),2),h=p[0],f=p[1],m=c.useMemo(function(){return(0,u.H)(n.map(function(e){return e.sensorState}))},[n]),x=m.anyOff,j=m.anyOn;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.J,{content:(0,i.jsxs)(o.v2,{children:[(0,i.jsx)(o.sN,{text:"Start ".concat(1===d?"1 sensor":"".concat(d," sensors")),disabled:!x,"aria-disabled":!x,icon:"toggle_on",onClick:function(){f("start")}}),(0,i.jsx)(o.sN,{text:"Stop ".concat(1===d?"1 sensor":"".concat(d," sensors")),disabled:!j,"aria-disabled":!j,icon:"toggle_off",onClick:function(){f("stop")}})]}),placement:"bottom-end",children:(0,i.jsx)(a.zx,{disabled:!d,intent:"primary",rightIcon:(0,i.jsx)(l.JO,{name:"expand_more"}),children:"Actions"})}),(0,i.jsx)(SensorStateChangeDialog,{openWithIntent:h,sensors:n,onClose:function(){return f("not-open")},onComplete:function(){t()}})]})}},82439:function(e,n,t){t.d(n,{e:function(){return SensorDetails},F:function(){return humanizeSensorInterval}});var r=t(58467),i=t(52322),s=t(17131),o=t(18399),a=t(81308),l=t(57830),c=t(9001),u=t(95223),d=t(3842),p=t(71897),h=t(2784),f=t(55237),m=t(61935),x=t(63386),j=t(30301),g=t(81862),v=t(85333),b=t(73235),y=t(22970),S=t(33379),w=t(60138),_=t(10952),k=t(59692),O=t(12084),R=t(86412),C=t(63832),P=t(34822),T=t(92364),I=t(35505),E=t(66904),N=t(19211),D=t(91195),A=t(56266),F=t(20059);function _templateObject(){var e=(0,b._)(["\n  mutation SetSensorCursorMutation($sensorSelector: SensorSelector!, $cursor: String) {\n    setSensorCursor(sensorSelector: $sensorSelector, cursor: $cursor) {\n      ... on Sensor {\n        id\n        sensorState {\n          id\n          status\n          typeSpecificData {\n            ... on SensorData {\n              lastCursor\n            }\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}t(33521);var EditCursorDialog=function(e){var n,t=e.isOpen,s=e.sensorSelector,o=e.cursor,a=e.onClose,l=(0,r._)(h.useState(o),2),u=l[0],d=l[1],p=(0,r._)(h.useState(!1),2),f=p[0],m=p[1],x=(0,r._)((0,S.D)(z),1)[0],j=(n=(0,g._)(function(){var e,n;return(0,y.Jh)(this,function(t){switch(t.label){case 0:return m(!0),[4,x({variables:{sensorSelector:s,cursor:u}})];case 1:if((null==(e=t.sent().data)?void 0:e.setSensorCursor.__typename)!=="Sensor")return[3,3];return[4,(0,N.B7)({message:"Cursor value updated",intent:"success"})];case 2:return t.sent(),[3,5];case 3:if(!(null==e?void 0:e.setSensorCursor))return[3,5];return n=e.setSensorCursor,[4,(0,N.B7)({intent:"danger",message:(0,i.jsxs)(k.Z,{direction:"row",spacing:8,children:[(0,i.jsx)("div",{children:"Could not set cursor value."}),(0,i.jsx)(O.Z,{color:R.w.White,underline:"always",onClick:function(){(0,E._)({title:"Python Error",body:"PythonError"===n.__typename?(0,i.jsx)(A.T9,{error:n}):"Sensor not found"})},children:"View error"})]})})];case 4:t.sent(),t.label=5;case 5:return a(),[2]}})}),function(){return n.apply(this,arguments)});return(0,i.jsxs)(_.Vq,{isOpen:t,onClose:function(){a(),d(o)},style:{width:"500px"},title:"Edit ".concat(s.sensorName," cursor"),children:[(0,i.jsx)(_.a7,{children:(0,i.jsx)(P.Kx,{value:u,$resize:"vertical",onChange:function(e){return d(e.target.value)},style:{width:"100%"}})}),(0,i.jsxs)(_.cN,{children:[(0,i.jsx)(c.zx,{onClick:a,children:"Cancel"}),(0,i.jsx)(c.zx,{intent:"primary",onClick:j,disabled:f,children:"Set cursor value"})]})]})},z=(0,w.Ps)(_templateObject(),D.B),L=t(68052),U=t(4472),q=t(54266);function DynamicPartitionRequests(e){var n=e.includeTitle,t=e.requests,r=h.useMemo(function(){if(!t.length)return[];var e=[];return t.forEach(function(n){var t=n.partitionKeys,r=n.partitionsDefName,i=n.type;null==t||t.forEach(function(n){e.push({key:n,def:r,type:i})})}),e},[t]);return r.length?(0,i.jsxs)(o.x,{flex:{direction:"column",gap:12,grow:1},children:[void 0===n||n?(0,i.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,i.jsx)(p.JO,{name:"partition"}),(0,i.jsx)(a.pm,{children:"Dynamic Partition Requests"})]}):null,(0,i.jsxs)(q.i,{style:{borderRight:"1px solid ".concat(R.w.KeylineGray)},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Partition"}),(0,i.jsx)("th",{children:"Partition definition"}),(0,i.jsx)("th",{children:"Requested change"})]})}),(0,i.jsx)("tbody",{children:r.map(function(e,n){var t=e.key,r=e.def,s=e.type;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:t}),(0,i.jsx)("td",{children:r}),(0,i.jsx)("td",{children:s===m.Dq2.ADD_PARTITIONS?(0,i.jsx)(l.V,{intent:"success",children:(0,i.jsx)("span",{children:"Add Partition"})}):(0,i.jsx)(l.V,{intent:"danger",children:(0,i.jsx)("span",{children:"Delete Partition"})})})]},n)})})]})]}):null}var B=t(39818);function SensorDryRunDialog_templateObject(){var e=(0,b._)(["\n  mutation SensorDryRunMutation($selectorData: SensorSelector!, $cursor: String) {\n    sensorDryRun(selectorData: $selectorData, cursor: $cursor) {\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          cursor\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n          dynamicPartitionsRequests {\n            ...DynamicPartitionRequestFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment DynamicPartitionRequestFragment on DynamicPartitionRequest {\n    partitionKeys\n    partitionsDefName\n    type\n  }\n\n  ","\n  ","\n"]);return SensorDryRunDialog_templateObject=function(){return e},e}function _templateObject1(){var e=(0,b._)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  padding-bottom: 12px;\n  border-bottom: 1px solid ",";\n  margin-bottom: 12px;\n  "," {\n    padding-bottom: 4px;\n    display: block;\n  }\n  pre {\n    margin: 0;\n  }\n  button {\n    margin-top: 4px;\n  }\n"]);return _templateObject1=function(){return e},e}var SensorDryRunDialog=function(e){var n=e.isOpen,t=e.onClose,r=e.name;return(0,i.jsx)(_.Vq,{isOpen:n,onClose:t,style:{width:"70vw",display:"flex"},icon:"sensors",title:r,children:(0,i.jsx)(SensorDryRun,(0,v._)({},e))})},SensorDryRun=function(e){var n,t=e.repoAddress,s=e.name,u=e.currentCursor,d=e.onClose,f=e.jobName,m=(0,r._)((0,S.D)(M),1)[0],x=(0,r._)(h.useState(u),2),j=x[0],v=x[1],b=(0,r._)(h.useState(!1),2),w=b[0],I=b[1],D=(0,r._)(h.useState(null),2),q=D[0],B=D[1],V=(0,r._)(h.useState(null),2),J=V[0],G=V[1],K=h.useMemo(function(){return{sensorName:s,repositoryLocationName:t.location,repositoryName:t.name}},[t,s]),Z=h.useCallback((0,g._)(function(){var e,n,t;return(0,y.Jh)(this,function(r){switch(r.label){case 0:return I(!0),[4,m({variables:{selectorData:K,cursor:j}})];case 1:return(n=null===(e=r.sent().data)||void 0===e?void 0:e.sensorDryRun)?(null==n?void 0:n.__typename)==="DryRunInstigationTick"?(null===(t=n.evaluationResult)||void 0===t?void 0:t.error)?B(n.evaluationResult.error):G(n):(null==n?void 0:n.__typename)==="SensorNotFoundError"?(0,E._)({title:"Sensor not found",body:"Could not find a sensor named: ".concat(s)}):B(n):(0,F.UT)("sensorDryRun Mutation returned no data??"),I(!1),[2]}})}),[m,K,j,s]),H=h.useMemo(function(){return J||q?(0,i.jsxs)(o.x,{flex:{direction:"row",gap:8},children:[(0,i.jsx)(c.zx,{"data-testid":(0,L.N)("test-again"),onClick:function(){G(null),B(null)},children:"Test again"}),(0,i.jsx)(c.zx,{intent:"primary",onClick:d,children:"Close"})]}):w?(0,i.jsx)(o.x,{flex:{direction:"row",gap:8},children:(0,i.jsx)(c.zx,{onClick:d,children:"Cancel"})}):(0,i.jsxs)(o.x,{flex:{direction:"row",gap:8},children:[(0,i.jsx)(c.zx,{onClick:d,children:"Cancel"}),(0,i.jsx)(c.zx,{onClick:Z,intent:"primary","data-testid":(0,L.N)("evaluate"),children:"Evaluate"})]})},[J,q,w,d,Z]),W=(0,r._)(h.useState("Unpersisted"),2),Q=W[0],Y=W[1],X=(0,r._)((0,S.D)(z),1)[0],ee=h.useCallback((0,g._)(function(){var e,n,t,r;return(0,y.Jh)(this,function(s){switch(s.label){case 0:return(n=null==J?void 0:null===(e=J.evaluationResult)||void 0===e?void 0:e.cursor)||(0,F.UT)("Did not expect to get here"),Y("Persisting"),[4,X({variables:{sensorSelector:K,cursor:n}})];case 1:if((null==(t=s.sent().data)?void 0:t.setSensorCursor.__typename)!=="Sensor")return[3,3];return[4,(0,N.B7)({message:"Cursor value updated",intent:"success"})];case 2:return s.sent(),Y("Persisted"),[3,5];case 3:if(!(null==t?void 0:t.setSensorCursor))return[3,5];return r=t.setSensorCursor,[4,(0,N.B7)({intent:"danger",message:(0,i.jsxs)(k.Z,{direction:"row",spacing:8,children:[(0,i.jsx)("div",{children:"Could not set cursor value."}),(0,i.jsx)(O.Z,{color:R.w.White,underline:"always",onClick:function(){(0,E._)({title:"Python Error",body:"PythonError"===r.__typename?(0,i.jsx)(A.T9,{error:r}):"Sensor not found"})},children:"View error"})]})})];case 4:s.sent(),s.label=5;case 5:return[2]}})}),[null==J?void 0:null===(n=J.evaluationResult)||void 0===n?void 0:n.cursor,K,X]),en=h.useMemo(function(){if(J||q){var e,n,r,d,h,m,x,g=null==J?void 0:null===(e=J.evaluationResult)||void 0===e?void 0:e.runRequests,b=(null==g?void 0:g.length)||0,y=!q&&0===b,S=null==J?void 0:null===(n=J.evaluationResult)||void 0===n?void 0:n.dynamicPartitionsRequests;return(0,i.jsx)(o.x,{flex:{direction:"column",gap:8},children:(0,i.jsxs)(o.x,{children:[(0,i.jsxs)($,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(a.pm,{children:"Result"}),(0,i.jsx)(o.x,{flex:{grow:1,alignItems:"center"},children:(0,i.jsx)("div",{children:q?(0,i.jsx)(l.V,{intent:"danger",children:"Failed"}):b?(0,i.jsxs)(l.V,{intent:"success",children:[b," run requests"]}):(0,i.jsx)(l.V,{intent:"warning",children:"Skipped"})})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(a.pm,{children:"Used cursor value"}),(0,i.jsx)("pre",{children:(null==j?void 0:j.length)?j:"None"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(a.pm,{children:"Computed cursor value"}),(0,i.jsx)("pre",{children:(null==J?void 0:null===(d=J.evaluationResult)||void 0===d?void 0:null===(r=d.cursor)||void 0===r?void 0:r.length)?null==J?void 0:J.evaluationResult.cursor:q?"Error":"None"}),q||(null!=u?u:"")===(null!==(x=null==J?void 0:null===(h=J.evaluationResult)||void 0===h?void 0:h.cursor)&&void 0!==x?x:"")?null:(0,i.jsxs)(o.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,i.jsx)(c.zx,{disabled:["Persisting","Persisted"].includes(Q),loading:"Persisting"===Q,onClick:ee,children:(0,i.jsx)("span",{"data-testid":(0,L.N)("persist-cursor"),children:"Persisting"===Q?"Persisting":"Persisted"===Q?"Persisted":"Persist computed cursor value"})}),"Persisted"===Q?(0,i.jsx)(p.JO,{name:"check_circle",color:R.w.Green500}):null]})]})]}),q?(0,i.jsx)("div",{children:(0,i.jsx)(A.T9,{error:q})}):null,y?(0,i.jsxs)("div",{children:[(0,i.jsx)(a.pm,{children:"Skip reason"}),(0,i.jsx)("div",{children:(null==J?void 0:null===(m=J.evaluationResult)||void 0===m?void 0:m.skipReason)||"No skip reason was output"})]}):null,b&&g?(0,i.jsx)(U.k,{runRequests:g,name:s,jobName:f,isJob:!0,repoAddress:t}):null,(null==S?void 0:S.length)?(0,i.jsx)("div",{style:{marginTop:"24px"},children:(0,i.jsx)(DynamicPartitionRequests,{requests:S})}):null]})})}return w?(0,i.jsxs)(o.x,{flex:{direction:"row",gap:8,justifyContent:"center",alignItems:"center"},children:[(0,i.jsx)(C.$,{purpose:"body-text"}),(0,i.jsx)("div",{children:"Evaluating sensor"})]}):(0,i.jsxs)(o.x,{flex:{direction:"column",gap:8},children:[(0,i.jsx)("div",{children:"Cursor"}),(0,i.jsx)(P.oi,{value:j,onChange:function(e){return v(e.target.value)},"data-testid":(0,L.N)("cursor-input")}),""!==u&&u?null:(0,i.jsx)(o.x,{padding:{top:16,bottom:32},flex:{justifyContent:"center"},children:(0,i.jsx)(T.t,{icon:"no-results",title:"You're not using a cursor",description:(0,i.jsxs)("span",{children:["Check our"," ",(0,i.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#idempotence-and-cursors",children:"sensor documentation"})," ","to learn how to use cursors"]})})})]})},[J,q,w,u,Q,ee,s,f,t,j]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.a7,{children:(0,i.jsx)("div",{style:{minHeight:"300px"},children:en})}),(0,i.jsx)(_.cN,{topBorder:!0,children:H})]})},M=(0,w.Ps)(SensorDryRunDialog_templateObject(),B.s,D.B),$=I.ZP.div.withConfig({componentId:"sc-deb0197f-0"})(_templateObject1(),R.w.KeylineGray,a.pm),V=t(581),J=t(28090),SensorMonitoredAssets=function(e){var n,t=e.metadata;return(null==t?void 0:null===(n=t.assetKeys)||void 0===n?void 0:n.length)?(0,i.jsx)(o.x,{flex:{direction:"column",gap:2},children:t.assetKeys.map(function(e){return(0,i.jsx)(J.R,{path:e.path,icon:"asset"},e.path.join("/"))})}):(0,i.jsx)("span",{})},G=t(23054),K=t(83026),humanizeSensorInterval=function(e){return(e||(e=30),(e=Math.max(30,e))<60||e%60)?"~".concat(e," sec"):3600===e?"~1 hour":e<3600||e%3600?"~".concat(e/60," min"):86400===e?"~1 day":e<86400||e%86400?"~".concat(e/3600," hours"):"~".concat(e/86400," days")},SensorDetails=function(e){var n,t,g=e.sensor,v=e.repoAddress,b=e.daemonHealth,y=e.refreshState,S=g.name,w=g.sensorState,_=w.status,k=w.ticks,O=g.metadata,R=(0,r._)(h.useState(!1),2),C=R[0],P=R[1],T={sensorName:g.name,repositoryName:v.name,repositoryLocationName:v.location},I=k.length?k[0]:null,E=g.sensorState.typeSpecificData&&"SensorData"===g.sensorState.typeSpecificData.__typename&&g.sensorState.typeSpecificData.lastCursor,N=(0,r._)(h.useState(!1),2),D=N[0],A=N[1],F=_===m.ynu.RUNNING;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.m,{title:(0,i.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,i.jsx)(a.X6,{children:S}),(0,i.jsx)(G.c,{repoAddress:v,sensor:g})]}),icon:"sensors",tags:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.V,{icon:"sensors",children:["Sensor in ",(0,i.jsx)(x.b,{repoAddress:v})]}),g.nextTick&&b&&F?(0,i.jsxs)(l.V,{icon:"timer",children:["Next tick: ",(0,i.jsx)(j.v,{timestamp:g.nextTick.timestamp})]}):null]}),right:(0,i.jsxs)(o.x,{margin:{top:4},flex:{direction:"row",alignItems:"center",gap:8},children:[(0,i.jsx)(f.xi,{refreshState:y}),g.sensorType===m.dEY.STANDARD?(0,i.jsx)(c.zx,{onClick:function(){A(!0)},children:"Test Sensor"}):null]})}),(0,i.jsx)(SensorDryRunDialog,{isOpen:D,onClose:function(){A(!1)},currentCursor:E||"",name:g.name,repoAddress:v,jobName:(null===(t=g.targets)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.pipelineName)||""}),(0,i.jsx)(u.fJ,{children:(0,i.jsxs)("tbody",{children:[g.description?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Description"}),(0,i.jsx)("td",{children:g.description})]}):null,(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Latest tick"}),(0,i.jsx)("td",{children:I?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(o.x,{flex:{direction:"row",gap:8,alignItems:"center"},style:{marginTop:"-2px"},children:[(0,i.jsx)(j.v,{timestamp:I.timestamp}),(0,i.jsx)(V.a,{tick:I})]})}):"Sensor has never run"})]}),g.targets&&g.targets.length?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Target"}),(0,i.jsx)("td",{children:(0,i.jsx)(K.D,{targets:g.targets,repoAddress:v})})]}):null,(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Frequency"}),(0,i.jsx)("td",{children:humanizeSensorInterval(g.minIntervalSeconds)})]}),O.assetKeys&&O.assetKeys.length?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Monitored assets"}),(0,i.jsx)("td",{children:(0,i.jsx)(SensorMonitoredAssets,{metadata:O})})]}):null,(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(o.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Cursor"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(o.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontFamily:d.b.monospace,fontSize:"16px"},children:E||"None"}),(0,i.jsx)(c.zx,{icon:(0,i.jsx)(p.JO,{name:"edit"}),onClick:function(){return P(!0)},children:"Edit"})]}),(0,i.jsx)(EditCursorDialog,{isOpen:C,sensorSelector:T,cursor:E||"",onClose:function(){return P(!1)}})]})]})]})})]})}},56692:function(e,n,t){t.d(n,{F:function(){return SensorInfo}});var r=t(85333),i=t(6692),s=t(2281),o=t(52322),a=t(18399),l=t(9676);t(2784);var SensorInfo=function(e){var n=e.daemonHealth,t=(0,s._)(e,["daemonHealth"]),c=void 0;if(n){var u=n.allDaemonStatuses.filter(function(e){return"SENSOR"===e.daemonType});if(u[0]){var d=u[0];c=!!(d.required&&d.healthy)}}return!1===c?(0,o.jsx)(a.x,(0,i._)((0,r._)({},t),{children:(0,o.jsx)(l.b,{intent:"warning",title:"The sensor daemon is not running.",description:(0,o.jsxs)("div",{children:["See the"," ",(0,o.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})})):null}},83026:function(e,n,t){t.d(n,{D:function(){return SensorTargetList}});var r=t(52322),i=t(18399);t(2784);var s=t(35157),o=t(90818),a=t(51969),SensorTargetList=function(e){var n=e.targets,t=e.repoAddress,l=(0,a.Ux)(t);if(!n)return(0,r.jsx)("span",{});var c=n.filter(function(e){return!(0,s.pv)(e.pipelineName)});return(0,r.jsxs)(i.x,{flex:{direction:"column",gap:2},children:[c.length<n.length&&(0,r.jsx)("span",{children:"A selection of assets"}),c.map(function(e){return e.pipelineName?(0,r.jsx)(o.h,{pipelineName:e.pipelineName,pipelineHrefContext:t,isJob:!!(l&&(0,a.E8)(l,e.pipelineName))},e.pipelineName):null})]})}},22478:function(e,n,t){t.d(n,{x:function(){return makeSensorKey}});var r=t(44254),makeSensorKey=function(e,n){return"".concat((0,r.Uz)(e),"-").concat(n)}},4472:function(e,n,t){t.d(n,{k:function(){return RunRequestTable}});var r=t(52322),i=t(18399),s=t(57830),o=t(71897),a=t(54266),l=t(86412),c=t(19126),u=t.n(c);t(2784);var d=t(90818),p=t(68052),h=t(16148),f=t(51969),m=t(38153),RunRequestTable=function(e){var n=e.runRequests,t=e.isJob,c=e.repoAddress,x=e.mode,j=e.jobName,g=(0,f.Ux)(c),v=(0,r.jsx)("tbody",{"data-testid":(0,p.N)("table-body"),children:n.map(function(e,n){var a;return(0,r.jsxs)("tr",{"data-testid":(0,p.N)(e.runKey||""),children:[(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{alignItems:"center",gap:8},children:(0,r.jsx)(d.h,{pipelineName:j,pipelineHrefContext:c,isJob:!!g&&t,showIcon:!0,size:"small"})})}),(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{direction:"row",gap:8,wrap:"wrap"},children:e.tags.filter(function(e){return!["dagster/schedule_name"].includes(e.key)}).map(function(e){var n=e.key,t=e.value;return(0,r.jsx)(s.V,{children:"".concat(n,": ").concat(t)},n)})})}),(0,r.jsx)("td",{children:(0,r.jsx)(h.A,{icon:(0,r.jsx)(o.JO,{name:"edit"}),target:"_blank",to:(0,m.$U)(c,"/pipeline_or_job/".concat(j,"/playground/setup?").concat(u().stringify({mode:x,config:e.runConfigYaml,tags:e.tags,assetSelection:null===(a=e.assetSelection)||void 0===a?void 0:a.map(function(e){return{assetKey:{path:e.path}}})}))),children:"Open in Launchpad"})})]},n)})});return(0,r.jsx)("div",{children:(0,r.jsxs)(a.i,{style:{borderRight:"1px solid ".concat(l.w.KeylineGray),tableLayout:"fixed"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{children:[t?"Job":"Pipeline"," name"]}),(0,r.jsx)("th",{children:"Tags"}),(0,r.jsx)("th",{children:"Configuration"})]})}),v]})})}},39818:function(e,n,t){t.d(n,{s:function(){return i}});var r=t(73235);function _templateObject(){var e=(0,r._)(["\n  fragment RunRequestFragment on RunRequest {\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n    runKey\n    assetSelection {\n      path\n    }\n  }\n"]);return _templateObject=function(){return e},e}var i=(0,t(60138).Ps)(_templateObject())},581:function(e,n,t){t.d(n,{a:function(){return TickStatusTag}});var r=t(58467),i=t(52322),s=t(57830),o=t(86832),a=t(86412),l=t(43180),c=t(18399),u=t(12084),d=t(10952),p=t(9001),h=t(2784),f=t(56266),m=t(61935),TickStatusTag=function(e){var n=e.tick,t=e.isStuckStarted,x=(0,r._)(h.useState(!1),2),j=x[0],g=x[1],v=h.useMemo(function(){var e="requestedAssetMaterializationCount"in n;switch(n.status){case m.izS.STARTED:return(0,i.jsx)(s.V,{intent:"primary",icon:"spinner",children:t?"Started":"Evaluating"});case m.izS.SKIPPED:var r=(0,i.jsx)(o.m,{fillColor:a.w.Olive50,label:"0 requested"});if("runKeys"in n&&n.runKeys.length){var d="".concat(n.runKeys.length," runs requested, but skipped because the runs already exist for the requested keys.");return(0,i.jsx)(l.u,{position:"right",content:d,children:r})}if("skipReason"in n&&n.skipReason)return(0,i.jsx)(l.u,{position:"right",content:n.skipReason,targetTagName:"div",children:r});return r;case m.izS.FAILURE:return(0,i.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,i.jsx)(s.V,{intent:"danger",children:"Failure"}),n.error?(0,i.jsx)(u.Z,{onClick:function(){g(!0)},children:"View"}):null]});case m.izS.SUCCESS:var p=e?n.requestedAssetMaterializationCount:n.runIds.length,h=(0,i.jsxs)(s.V,{intent:"success",children:[p," requested"]});if("runKeys"in n&&n.runKeys.length>n.runIds.length){var f="".concat(n.runKeys.length," runs requested, but ").concat(n.runKeys.length-n.runIds.length," skipped because the runs already exist for those requested keys.");return(0,i.jsx)(l.u,{position:"right",content:f,children:h})}return h}},[t,n]);return(0,i.jsxs)(i.Fragment,{children:[v,n.error?(0,i.jsxs)(d.Vq,{isOpen:j,title:"Error",style:{width:"80vw"},children:[(0,i.jsx)(d.a7,{children:(0,i.jsx)(f.T9,{error:n.error})}),(0,i.jsx)(d.cN,{topBorder:!0,children:(0,i.jsx)(p.zx,{intent:"primary",onClick:function(){g(!1)},children:"Close"})})]}):null]})}},30682:function(e,n,t){t.d(n,{W:function(){return CheckAllBox}});var r=t(52322),i=t(43180),s=t(82585);t(2784);var CheckAllBox=function(e){var n=e.checkedCount,t=e.totalCount,o=e.onToggleAll;return(0,r.jsx)(i.u,{content:"".concat(n," of ").concat(t," selected"),placement:"top",children:(0,r.jsx)(s.X,{indeterminate:n>0&&n!==t,checked:n>0&&n===t,onChange:function(e){e.target instanceof HTMLInputElement&&o(n!==t)}})})}},8223:function(e,n,t){t.d(n,{g:function(){return useInstigationStatusFilter}});var r=t(52322);t(2784);var i=t(61935),s=t(16292),useInstigationStatusFilter=function(){return(0,s.im)({name:"Running state",icon:"toggle_off",allValues:[{value:i.ynu.RUNNING,match:["on","running"]},{value:i.ynu.STOPPED,match:["off","stopped"]}],getKey:function(e){return e},renderLabel:function(e){var n=e.value;return(0,r.jsx)("span",{children:n===i.ynu.RUNNING?"Running":"Stopped"})},getStringValue:function(e){return e}})}},19358:function(e,n,t){t.d(n,{Y:function(){return s}});var r=t(73235),i=t(86412);function _templateObject(){var e=(0,r._)(["\n  thead tr {\n    position: sticky;\n    top: ","px;\n    background-color: ",";\n    z-index: 1;\n  }\n\n  /**\n   * Safari won't render a box-shadow on the `tr` and we don't want an inset\n   * box-shadow on `th` elements because it will create a double-border on the\n   * bottom of the `thead` in the non-stuck state.\n   *\n   * We therefore render an absoulutely-positioned keyline on the bottom of the\n   * `th` elements. This will appear as a border in the stuck state, and will\n   * overlap the top box-shadow of the first row in the non-stuck state.\n   */\n  thead tr th {\n    position: relative;\n  }\n\n  thead tr th::after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: ",";\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n  }\n"],["\n  thead tr {\n    position: sticky;\n    top: ","px;\n    background-color: ",";\n    z-index: 1;\n  }\n\n  /**\n   * Safari won't render a box-shadow on the \\`tr\\` and we don't want an inset\n   * box-shadow on \\`th\\` elements because it will create a double-border on the\n   * bottom of the \\`thead\\` in the non-stuck state.\n   *\n   * We therefore render an absoulutely-positioned keyline on the bottom of the\n   * \\`th\\` elements. This will appear as a border in the stuck state, and will\n   * overlap the top box-shadow of the first row in the non-stuck state.\n   */\n  thead tr th {\n    position: relative;\n  }\n\n  thead tr th::after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: ",";\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n  }\n"]);return _templateObject=function(){return e},e}var s=t(35505).ZP.div.withConfig({componentId:"sc-518cab7f-0"})(_templateObject(),function(e){var n=e.$top;return void 0===n?0:n},i.w.White,i.w.KeylineGray)},77277:function(e,n,t){t.d(n,{w:function(){return findDuplicateRepoNames}});var findDuplicateRepoNames=function(e){var n=new Set,t=new Set;return e.forEach(function(e){n.has(e)?t.add(e):n.add(e)}),t}},42885:function(e,n,t){t.d(n,{N:function(){return useRepoExpansionState}});var r=t(58467),i=t(2784),s=t(34263),o=t(15282),a=t(44254),validateExpandedKeys=function(e){return Array.isArray(e)?e:[]},useRepoExpansionState=function(e,n){var t,l=(t=i.useContext(s.I).basePath,"".concat(t,":dagster.").concat(e)),c=(0,r._)((0,o.U)(l,validateExpandedKeys),2),u=c[0],d=c[1],p=i.useCallback(function(e){var n=(0,a.Uz)(e);d(function(e){var t=new Set(e||[]);return t.has(n)?t.delete(n):t.add(n),Array.from(t)})},[d]),h=i.useCallback(function(e){d(function(t){var r=new Set(t||[]);return n.forEach(function(n){e?r.delete(n):r.add(n)}),Array.from(r)})},[n,d]),f=i.useMemo(function(){var e=new Set(u);return n.filter(function(n){return!e.has(n)})},[n,u]);return i.useMemo(function(){return{expandedKeys:f,onToggle:p,onToggleAll:h}},[f,p,h])}},9901:function(e,n,t){t.d(n,{I:function(){return VirtualizedJobHeader},b:function(){return VirtualizedJobRow}});var r=t(58467),i=t(73235),s=t(82550),o=t(52322),a=t(83601),l=t(60138),c=t(16861),u=t(18399),d=t(86412),p=t(2784),h=t(47933),f=t(35505),m=t(55237),x=t(44678),j=t(37783),g=t(43180),v=t(9001),b=t(71897),y=t(54949),S=t(61935),w=t(95388),_=t(91916),k=t(94370),O=t(5035),R=t(38153);function _templateObject(){var e=(0,i._)(["\n  query RunReExecutionQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        parentPipelineSnapshotId\n        ...RunFragment\n      }\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}var JobMenu=function(e){var n=e.job,t=e.repoAddress,i=n.runs.length?n.runs[0]:null,s=(0,y.xz)(t.location),l=s.permissions.canLaunchPipelineReexecution,c=s.disabledReasons,u=(0,r._)((0,a.t)(C),2),d=u[0],h=u[1].data,f=(null==h?void 0:h.pipelineRunOrError.__typename)==="Run"?null==h?void 0:h.pipelineRunOrError:null,m=p.useCallback(function(){(null==i?void 0:i.id)&&d({variables:{runId:i.id}})},[i,d]),_=(0,k.D)(),P=(0,o.jsx)(x.sN,{icon:"replay",text:"Re-execute latest run",onClick:function(){return f?_(f,S.hmq.ALL_STEPS):void 0},disabled:!l||!f||!(0,w.EP)(f)}),T=(0,o.jsx)(x.sN,{icon:"sync_problem",text:"Re-execute latest run from failure",onClick:function(){return f?_(f,S.hmq.FROM_FAILURE):void 0},disabled:!l||!f||!(0,w.VM)(f)});return(0,o.jsx)(j.J,{onOpened:function(){return m()},content:(0,o.jsxs)(x.v2,{children:[(0,o.jsx)(O.U,{to:(0,R.jT)({repoName:t.name,repoLocation:t.location,pipelineName:n.name,isJob:n.isJob}),icon:"job",text:"View job"}),(0,o.jsx)(O.U,{to:(0,R.jT)({repoName:t.name,repoLocation:t.location,pipelineName:n.name,isJob:n.isJob,path:"/runs"}),icon:"checklist",text:"View all recent runs"}),l?P:(0,o.jsx)(g.u,{content:c.canLaunchPipelineReexecution,display:"block",children:P}),l?T:(0,o.jsx)(g.u,{content:c.canLaunchPipelineReexecution,display:"block",children:T})]}),position:"bottom-left",children:(0,o.jsx)(v.zx,{icon:(0,o.jsx)(b.JO,{name:"expand_more"})})})},C=(0,l.Ps)(_templateObject(),_.J3),P=t(17212),T=t(12518),I=t(98349),E=t(38917),N=t(66207),D=t(23054),A=t(55658),F=t(86839),z=t(51969);function VirtualizedJobRow_templateObject(){var e=(0,i._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return VirtualizedJobRow_templateObject=function(){return e},e}function _templateObject1(){var e=(0,i._)(["\n  width: 100%;\n\n  > .bp4-popover2-target {\n    width: 100%;\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,i._)(["\n  query SingleJobQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      ... on Pipeline {\n        id\n        name\n        isJob\n        description\n        runs(limit: 5) {\n          id\n          ...RunTimeFragment\n        }\n        schedules {\n          id\n          ...ScheduleSwitchFragment\n        }\n        sensors {\n          id\n          ...SensorSwitchFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject2=function(){return e},e}var L="1.5fr 1fr 180px 96px 80px",VirtualizedJobRow=function(e){var n=e.name,t=e.isJob,i=e.repoAddress,l=e.start,d=e.height,f=(0,r._)((0,a.t)(B,{variables:{selector:(0,z._T)(i,n)}}),2),x=f[0],j=f[1];(0,F.v5)(x),(0,m.C4)(j,m.dT);var g=j.data,v=p.useMemo(function(){if((null==g?void 0:g.pipelineOrError.__typename)==="Pipeline"){var e=g.pipelineOrError;return{schedules:e.schedules,sensors:e.sensors}}return{schedules:[],sensors:[]}},[g]),b=v.schedules,y=v.sensors,S=p.useMemo(function(){if((null==g?void 0:g.pipelineOrError.__typename)==="Pipeline"){var e=g.pipelineOrError.runs;if(e.length)return(0,s._)(e)}return[]},[g]);return(0,o.jsx)(A.X2,{$height:d,$start:l,children:(0,o.jsxs)(U,{border:"bottom",children:[(0,o.jsxs)(A.E5,{children:[(0,o.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:(0,o.jsx)(h.rU,{to:(0,R.$U)(i,"/jobs/".concat(n)),children:(0,o.jsx)(c.g,{text:n})})}),(0,o.jsx)(F.HB,{children:(null==g?void 0:g.pipelineOrError.__typename)==="Pipeline"?g.pipelineOrError.description:""})]}),(0,o.jsx)(A.E5,{children:b.length||y.length?(0,o.jsx)(u.x,{flex:{direction:"column",alignItems:"flex-start",gap:8},children:(0,o.jsx)(q,{children:(0,o.jsx)(T.I,{schedules:b,sensors:y,repoAddress:i})})}):(0,o.jsx)(F.mq,{queryResult:j})}),(0,o.jsx)(A.E5,{children:S[0]?(0,o.jsx)(P.Z,{run:S[0],showButton:!1,showHover:!0,showSummary:!1,name:n}):(0,o.jsx)(F.mq,{queryResult:j})}),(0,o.jsx)(A.E5,{children:S.length?(0,o.jsx)(u.x,{padding:{top:4},children:(0,o.jsx)(I.JH,{jobName:n,runs:(0,s._)(S).reverse(),fade:!0})}):(0,o.jsx)(F.mq,{queryResult:j})}),(0,o.jsx)(A.E5,{children:(0,o.jsx)(u.x,{flex:{justifyContent:"flex-end"},style:{marginTop:"-2px"},children:(0,o.jsx)(JobMenu,{job:{isJob:t,name:n,runs:S},repoAddress:i})})})]})})},VirtualizedJobHeader=function(){return(0,o.jsxs)(u.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:L,height:"32px",fontSize:"12px",color:d.w.Gray600},children:[(0,o.jsx)(A.qN,{children:"Name"}),(0,o.jsx)(A.qN,{children:"Schedules/sensors"}),(0,o.jsx)(A.qN,{children:"Latest run"}),(0,o.jsx)(A.qN,{children:"Run history"}),(0,o.jsx)(A.qN,{})]})},U=(0,f.ZP)(u.x).withConfig({componentId:"sc-35c69bb-0"})(VirtualizedJobRow_templateObject(),L),q=f.ZP.div.withConfig({componentId:"sc-35c69bb-1"})(_templateObject1()),B=(0,l.Ps)(_templateObject2(),E.$X,N.J,D.U)},72349:function(e,n,t){t.d(n,{o:function(){return VirtualizedScheduleHeader},i:function(){return VirtualizedScheduleRow}});var r=t(58467),i=t(73235),s=t(52322),o=t(83601),a=t(60138),l=t(43180),c=t(82585),u=t(18399),d=t(16861),p=t(81308),h=t(86412),f=t(37783),m=t(44678),x=t(9001),j=t(71897),g=t(2784),v=t(47933),b=t(35505),y=t(55237),S=t(61935),w=t(17212),_=t(91230),k=t(90818),O=t(38917),R=t(66207),C=t(57830),errorDisplay=function(e,n){if(e===S.ynu.STOPPED&&0===n||e===S.ynu.RUNNING&&1===n)return null;var t=[];return e===S.ynu.RUNNING&&0===n?t.push("Schedule is set to be running, but either the scheduler is not configured or the scheduler is not running the schedule"):e===S.ynu.STOPPED&&n>0&&t.push("Schedule is set to be stopped, but the scheduler is still running the schedule"),n>0&&t.push("Duplicate cron job for schedule found."),(0,s.jsx)(f.J,{interactionKind:"hover",popoverClassName:"bp4-popover-content-sizing",position:"right",content:(0,s.jsxs)(u.x,{flex:{direction:"column",gap:8},padding:12,children:[(0,s.jsx)("strong",{children:"There are errors with this schedule."}),(0,s.jsx)("div",{children:"Errors:"}),(0,s.jsx)("ul",{children:t.map(function(e,n){return(0,s.jsx)("li",{children:e},n)})})]}),children:(0,s.jsx)(C.V,{fill:!0,interactive:!0,intent:"danger",children:"Error"})})},P=t(30301),T=t(54483),I=t(581),E=t(5035),N=t(55658),D=t(86839),A=t(51969),F=t(38153);function _templateObject(){var e=(0,i._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,i._)(["\n  max-width: 100%;\n\n  .bp4-popover2-target {\n    max-width: 100%;\n\n    :focus {\n      outline: none;\n    }\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,i._)(["\n  query SingleScheduleQuery($selector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $selector) {\n      ... on Schedule {\n        id\n        name\n        pipelineName\n        description\n        scheduleState {\n          id\n          runningCount\n          ticks(limit: 1) {\n            id\n            ...TickTagFragment\n          }\n          runs(limit: 1) {\n            id\n            ...RunTimeFragment\n          }\n          nextTick {\n            timestamp\n          }\n        }\n        partitionSet {\n          id\n          name\n        }\n        ...ScheduleSwitchFragment\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject2=function(){return e},e}var z="60px 1fr 1fr 76px 148px 210px 92px",L="1fr 1fr 76px 148px 210px 92px",VirtualizedScheduleRow=function(e){var n=e.name,t=e.repoAddress,i=e.checked,a=e.onToggleChecked,b=e.showCheckboxColumn,_=e.scheduleState,O=e.start,C=e.height,z=(0,A.Ux)(t),L=(0,r._)((0,o.t)(B,{variables:{selector:{repositoryName:t.name,repositoryLocationName:t.location,scheduleName:n}},notifyOnNetworkStatusChange:!0}),2),M=L[0],$=L[1];(0,D.v5)(M),(0,y.C4)($,y.dT);var V=$.data,J=g.useMemo(function(){return(null==V?void 0:V.scheduleOrError.__typename)!=="Schedule"?null:V.scheduleOrError},[V]),G=!!(J&&(0,A.E8)(z,J.pipelineName)),K=J?(0,T.A)(J.cronSchedule,J.executionTimezone||"UTC"):"",Z=g.useMemo(function(){var e=_.hasStartPermission,n=_.hasStopPermission,t=_.status;return t!==S.ynu.RUNNING||n?t!==S.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this schedule"}:{disabled:!0,message:"You do not have permission to stop this schedule"}},[_]),H=null==J?void 0:J.scheduleState.ticks[0];return(0,s.jsx)(N.X2,{$height:C,$start:O,children:(0,s.jsxs)(U,{border:"bottom",$showCheckboxColumn:b,children:[b?(0,s.jsx)(N.E5,{children:(0,s.jsx)(l.u,{canShow:Z.disabled,content:Z.message||"",placement:"top",children:(0,s.jsx)(c.X,{disabled:Z.disabled,checked:i,onChange:function(e){a&&e.target instanceof HTMLInputElement&&a({checked:e.target.checked,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}})})}):null,(0,s.jsx)(N.E5,{children:(0,s.jsxs)(u.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)("span",{style:{fontWeight:500},children:(0,s.jsx)(v.rU,{to:(0,F.$U)(t,"/schedules/".concat(n)),children:(0,s.jsx)(d.g,{text:n})})}),J?(0,s.jsx)(p.YS,{children:(0,s.jsx)(k.h,{showIcon:!0,size:"small",pipelineName:J.pipelineName,pipelineHrefContext:t,isJob:G})}):null]})}),(0,s.jsx)(N.E5,{children:J?(0,s.jsxs)(u.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(q,{style:{maxWidth:"100%"},children:(0,s.jsx)(l.u,{position:"top-left",content:J.cronSchedule,display:"block",children:(0,s.jsx)("div",{style:{color:h.w.Dark,overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",textOverflow:"ellipsis"},title:K,children:K})})}),J.scheduleState.nextTick&&J.scheduleState.status===S.ynu.RUNNING?(0,s.jsx)(p.YS,{children:(0,s.jsxs)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",textOverflow:"ellipsis"},children:["Next tick:\xa0",(0,s.jsx)(P.v,{timestamp:J.scheduleState.nextTick.timestamp,timezone:J.executionTimezone,timeFormat:{showSeconds:!1,showTimezone:!0}})]})}):null]}):(0,s.jsx)(D.mq,{queryResult:$})}),(0,s.jsx)(N.E5,{children:J?(0,s.jsxs)(u.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(R.M,{repoAddress:t,schedule:J},n),errorDisplay(J.scheduleState.status,J.scheduleState.runningCount)]}):null}),(0,s.jsx)(N.E5,{children:H?(0,s.jsx)("div",{children:(0,s.jsx)(I.a,{tick:H})}):(0,s.jsx)(D.mq,{queryResult:$})}),(0,s.jsx)(N.E5,{children:(null==J?void 0:J.scheduleState)&&(null==J?void 0:J.scheduleState.runs[0])?(0,s.jsx)(w.Z,{run:J.scheduleState.runs[0],name:n,showButton:!1,showHover:!0,showSummary:!1}):(0,s.jsx)(D.mq,{queryResult:$})}),(0,s.jsx)(N.E5,{children:(null==J?void 0:J.partitionSet)?(0,s.jsx)(f.J,{content:(0,s.jsxs)(m.v2,{children:[(0,s.jsx)(E.U,{text:"View partition history",icon:"dynamic_feed",target:"_blank",to:(0,F.$U)(t,"/".concat(G?"jobs":"pipelines","/").concat(J.pipelineName,"/partitions"))}),(0,s.jsx)(E.U,{text:"Launch partition backfill",icon:"add_circle",target:"_blank",to:(0,F.$U)(t,"/".concat(G?"jobs":"pipelines","/").concat(J.pipelineName,"/partitions"))})]}),position:"bottom-left",children:(0,s.jsx)(x.zx,{icon:(0,s.jsx)(j.JO,{name:"expand_more"})})}):(0,s.jsx)("span",{style:{color:h.w.Gray400},children:"–"})})]})})},VirtualizedScheduleHeader=function(e){var n=e.checkbox;return(0,s.jsxs)(u.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:n?z:L,height:"32px",fontSize:"12px",color:h.w.Gray600},children:[n?(0,s.jsx)(N.qN,{children:(0,s.jsx)("div",{style:{position:"relative",top:"-1px"},children:n})}):null,(0,s.jsx)(N.qN,{children:"Schedule name"}),(0,s.jsx)(N.qN,{children:"Schedule"}),(0,s.jsx)(N.qN,{children:"Running"}),(0,s.jsx)(N.qN,{children:"Last tick"}),(0,s.jsx)(N.qN,{children:"Last run"}),(0,s.jsx)(N.qN,{children:"Actions"})]})},U=(0,b.ZP)(u.x).withConfig({componentId:"sc-3eb74649-0"})(_templateObject(),function(e){return e.$showCheckboxColumn?z:L}),q=b.ZP.div.withConfig({componentId:"sc-3eb74649-1"})(_templateObject1()),B=(0,a.Ps)(_templateObject2(),_.dY,O.$X,R.J)},16592:function(e,n,t){t.d(n,{K:function(){return VirtualizedSensorHeader},R:function(){return VirtualizedSensorRow}});var r=t(58467),i=t(73235),s=t(52322),o=t(83601),a=t(60138),l=t(43180),c=t(82585),u=t(18399),d=t(16861),p=t(81308),h=t(86412),f=t(2784),m=t(47933),x=t(35505),j=t(55237),g=t(61935),v=t(17212),b=t(91230),y=t(38917),S=t(82439),w=t(23054),_=t(83026),k=t(581),O=t(55658),R=t(86839),C=t(38153);function _templateObject(){var e=(0,i._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,i._)(["\n  query SingleSensorQuery($selector: SensorSelector!) {\n    sensorOrError(sensorSelector: $selector) {\n      ... on Sensor {\n        id\n        description\n        name\n        targets {\n          pipelineName\n        }\n        metadata {\n          assetKeys {\n            path\n          }\n        }\n        minIntervalSeconds\n        description\n        sensorState {\n          id\n          runningCount\n          ticks(limit: 1) {\n            id\n            ...TickTagFragment\n          }\n          runs(limit: 1) {\n            id\n            ...RunTimeFragment\n          }\n          nextTick {\n            timestamp\n          }\n        }\n        ...SensorSwitchFragment\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject1=function(){return e},e}var P="60px 1.5fr 1fr 76px 120px 148px 180px",T="1.5fr 1fr 76px 120px 148px 180px",VirtualizedSensorRow=function(e){var n=e.name,t=e.repoAddress,i=e.checked,a=e.onToggleChecked,x=e.showCheckboxColumn,b=e.sensorState,y=e.start,P=e.height,T=(0,r._)((0,o.t)(E,{variables:{selector:{repositoryName:t.name,repositoryLocationName:t.location,sensorName:n}}}),2),N=T[0],D=T[1];(0,R.v5)(N),(0,j.C4)(D,j.dT);var A=D.data,F=f.useMemo(function(){return(null==A?void 0:A.sensorOrError.__typename)!=="Sensor"?null:A.sensorOrError},[A]),z=f.useMemo(function(){var e=b.hasStartPermission,n=b.hasStopPermission,t=b.status;return t!==g.ynu.RUNNING||n?t!==g.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this sensor"}:{disabled:!0,message:"You do not have permission to stop this sensor"}},[b]),L=null==F?void 0:F.sensorState.ticks[0];return(0,s.jsx)(O.X2,{$height:P,$start:y,children:(0,s.jsxs)(I,{border:"bottom",$showCheckboxColumn:x,children:[x?(0,s.jsx)(O.E5,{children:(0,s.jsx)(l.u,{canShow:z.disabled,content:z.message||"",placement:"top",children:(0,s.jsx)(c.X,{disabled:z.disabled,checked:i,onChange:function(e){a&&e.target instanceof HTMLInputElement&&a({checked:e.target.checked,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}})})}):null,(0,s.jsx)(O.E5,{children:(0,s.jsxs)(u.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)("span",{style:{fontWeight:500},children:(0,s.jsx)(m.rU,{to:(0,C.$U)(t,"/sensors/".concat(n)),children:(0,s.jsx)(d.g,{text:n})})}),(0,s.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,s.jsx)(p.YS,{style:{color:h.w.Gray500,whiteSpace:"nowrap"},children:null==F?void 0:F.description})})]})}),(0,s.jsx)(O.E5,{children:(0,s.jsx)(u.x,{flex:{direction:"column",gap:4},style:{fontSize:"12px"},children:(0,s.jsx)(_.D,{targets:null==F?void 0:F.targets,repoAddress:t})})}),(0,s.jsx)(O.E5,{children:F?(0,s.jsx)(u.x,{flex:{direction:"column",gap:4},children:(0,s.jsx)(w.c,{repoAddress:t,sensor:F},n)}):null}),(0,s.jsx)(O.E5,{children:F?(0,s.jsx)("div",{style:{color:h.w.Dark},children:(0,S.F)(F.minIntervalSeconds)}):(0,s.jsx)(R.mq,{queryResult:D})}),(0,s.jsx)(O.E5,{children:L?(0,s.jsx)("div",{children:(0,s.jsx)(k.a,{tick:L})}):(0,s.jsx)(R.mq,{queryResult:D})}),(0,s.jsx)(O.E5,{children:(null==F?void 0:F.sensorState)&&(null==F?void 0:F.sensorState.runs[0])?(0,s.jsx)(v.Z,{run:F.sensorState.runs[0],name:n,showButton:!1,showHover:!0,showSummary:!1}):(0,s.jsx)(R.mq,{queryResult:D})})]})})},VirtualizedSensorHeader=function(e){var n=e.checkbox;return(0,s.jsxs)(u.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:n?P:T,height:"32px",fontSize:"12px",color:h.w.Gray600},children:[n?(0,s.jsx)(O.qN,{children:(0,s.jsx)("div",{style:{position:"relative",top:"-1px"},children:n})}):null,(0,s.jsx)(O.qN,{children:"Name"}),(0,s.jsx)(O.qN,{children:"Target"}),(0,s.jsx)(O.qN,{children:"Running"}),(0,s.jsx)(O.qN,{children:"Frequency"}),(0,s.jsx)(O.qN,{children:"Last tick"}),(0,s.jsx)(O.qN,{children:"Last run"})]})},I=(0,x.ZP)(u.x).withConfig({componentId:"sc-3cd7e1ad-0"})(_templateObject(),function(e){return e.$showCheckboxColumn?P:T}),E=(0,a.Ps)(_templateObject1(),b.dY,y.$X,w.U)},86839:function(e,n,t){t.d(n,{HB:function(){return CaptionText},mq:function(){return LoadingOrNone},v5:function(){return useDelayedRowQuery},vG:function(){return RepoRow}});var r=t(73235),i=t(52322),s=t(86412),o=t(81308),a=t(2784),l=t(35505),c=t(51339),u=t(55658);function _templateObject(){var e=(0,r._)(["\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  "," {\n    color: ",";\n    white-space: nowrap;\n  }\n"]);return _templateObject=function(){return e},e}var RepoRow=function(e){var n=e.repoAddress,t=e.height,r=e.start,s=e.expanded,o=e.onToggle,a=e.onToggleAll,l=e.showLocation,d=e.rightElement;return(0,i.jsx)(u.X2,{$height:t,$start:r,children:(0,i.jsx)(c.L,{repoName:n.name,repoLocation:n.location,expanded:s,onClick:function(e){return e.getModifierState("Shift")?a(!s):o(n)},showLocation:l,rightElement:d})})},LoadingOrNone=function(e){var n=e.queryResult,t=e.noneString,r=n.called,o=n.loading,a=n.data;return(0,i.jsx)("div",{style:{color:s.w.Gray500},children:r&&(!o||a)?void 0===t?"None":t:"Loading"})},CaptionText=function(e){var n=e.children;return(0,i.jsx)(d,{children:(0,i.jsx)(o.YS,{children:n})})},d=l.ZP.div.withConfig({componentId:"sc-8a3c5867-0"})(_templateObject(),o.YS,s.w.Gray500),useDelayedRowQuery=function(e){a.useEffect(function(){var n=setTimeout(function(){e()},100);return function(){return clearTimeout(n)}},[e])}},20763:function(e,n,t){t.d(n,{h:function(){return WorkspaceHeader}});var r=t(52322),i=t(17131),s=t(18399),o=t(81308),a=t(86412),l=t(43180),c=t(9001),u=t(71897);t(2784);var d=t(47933),p=t(33308),h=t(56024),f=t(55237),m=t(40049),x=t(38153),WorkspaceTabs=function(e){var n=e.repoAddress,t=e.refreshState,i=e.tab;return(0,r.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,r.jsxs)(h.mQ,{selectedTabId:i,children:[(0,r.jsx)(m.f,{id:"assets",title:"Assets",to:(0,x.$U)(n,"/assets")}),(0,r.jsx)(m.f,{id:"jobs",title:"Jobs",to:(0,x.$U)(n,"/jobs")}),(0,r.jsx)(m.f,{id:"schedules",title:"Schedules",to:(0,x.$U)(n,"/schedules")}),(0,r.jsx)(m.f,{id:"sensors",title:"Sensors",to:(0,x.$U)(n,"/sensors")}),(0,r.jsx)(m.f,{id:"graphs",title:"Graphs",to:(0,x.$U)(n,"/graphs")}),(0,r.jsx)(m.f,{id:"ops",title:"Ops",to:(0,x.$U)(n,"/ops")}),(0,r.jsx)(m.f,{id:"resources",title:"Resources",to:(0,x.$U)(n,"/resources")})]}),t?(0,r.jsx)(s.x,{padding:{bottom:8},children:(0,r.jsx)(f.xi,{refreshState:t})}):null]})},j=t(44254),WorkspaceHeader=function(e){var n=e.repoAddress,t=e.tab,h=e.refreshState,f=e.queryData;return(0,r.jsx)(i.m,{title:(0,r.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(o.X6,{children:(0,r.jsx)(d.rU,{to:"/locations",style:{color:a.w.Dark},children:"Deployment"})}),(0,r.jsx)(o.X6,{children:"/"}),(0,r.jsx)(o.X6,{style:{color:a.w.Gray600},children:(0,j.Uz)(n)})]}),tabs:(0,r.jsx)(WorkspaceTabs,{repoAddress:n,tab:t,refreshState:h,queryData:f}),right:(0,r.jsx)(p.s,{location:n.location,ChildComponent:function(e){var n=e.tryReload,t=e.reloading,i=e.hasReloadPermission;return(0,r.jsx)(l.u,{canShow:!i,content:i?"":p.H,useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(c.zx,{onClick:function(){return n()},loading:t,disabled:!i,icon:(0,r.jsx)(u.JO,{name:"refresh"}),children:"Reload definitions"})})}})})}}}]);
//# sourceMappingURL=626.64a85a5c25e05d3a.js.map