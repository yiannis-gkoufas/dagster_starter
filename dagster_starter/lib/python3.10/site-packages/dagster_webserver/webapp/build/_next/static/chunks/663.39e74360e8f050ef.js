"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{28888:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(73235);function _templateObject(){var e=(0,r._)(["\n  height: 100%;\n  overflow-y: auto;\n  padding-bottom: 64px;\n  width: 100%;\n"]);return _templateObject=function(){return e},e}var o=n(35505).ZP.div.withConfig({componentId:"sc-2cf5acf-0"})(_templateObject())},17131:function(e,t,n){n.d(t,{m:function(){return PageHeader}});var r=n(73235),o=n(52322);n(2784);var i=n(35505),s=n(18399),a=n(86412);function _templateObject(){var e=(0,r._)(["\n  width: 100%;\n\n  /**\n   * Blueprint breadcrumbs annoyingly have a built-in height.\n   */\n  .bp4-breadcrumbs {\n    height: auto;\n  }\n"]);return _templateObject=function(){return e},e}var PageHeader=function(e){var t=e.title,n=e.tags,r=e.right,i=e.tabs;return(0,o.jsxs)(u,{background:a.w.Gray50,padding:{top:16,left:24,right:12},border:"bottom",children:[(0,o.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between"},padding:{bottom:16},children:[(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[t,n]}),r]}),i]})},u=(0,i.ZP)(s.x).withConfig({componentId:"sc-a1bb63a9-0"})(_templateObject())},18774:function(e,t,n){n.d(t,{$H:function(){return buildAssetGroupSelector},Lg:function(){return AssetGroupSuggest},eB:function(){return useAssetGroupSelectorsForAssets}});var r=n(52322),o=n(58931),i=n(71897),s=n(44678),a=n(18399),u=n(82585),l=n(18149),c=n.n(l),p=n(84636),d=n.n(p),m=n(2784),f=n(68912),g=n(37160);function useAssetGroupSelectorsForAssets(e){return m.useMemo(function(){return d()((e||[]).map(buildAssetGroupSelector).filter(function(e){return!!e}),function(e){return JSON.stringify(e)}).sort(function(e,t){return e.groupName.localeCompare(t.groupName)})},[e])}var h={groupName:"-",repositoryLocationName:"-",repositoryName:"-"},AssetGroupSuggest=function(e){var t=e.assetGroups,n=e.value,l=e.onChange,repoKey=function(e){return"".concat(e.repositoryName,"@").concat(e.repositoryLocationName)},p=t[0]?repoKey(t[0]):"",d=!t.every(function(e){return p===repoKey(e)});return(0,r.jsx)(o.U5,{selectedItem:n.length?h:null,items:t,menuWidth:300,inputProps:{style:{width:200},placeholder:"Filter asset groupsâ€¦",rightElement:n.length?(0,r.jsx)(f.C,{onClick:function(){return l([])},style:{marginTop:5,marginRight:4},children:(0,r.jsx)(i.JO,{name:"cancel"})}):void 0},inputValueRenderer:function(){return 1===n.length?n[0].groupName:n.length>1?"".concat(n.length," groups"):""},itemPredicate:function(e,t){return 0===e.length||t.groupName.toLowerCase().includes(e.toLowerCase())},itemsEqual:c(),itemRenderer:function(e,t){return(0,r.jsx)(s.sN,{active:t.modifiers.active,onClick:t.handleClick,text:(0,r.jsxs)(a.x,{flex:{direction:"row",gap:6,alignItems:"center"},margin:{left:4},style:{maxWidth:"500px"},children:[(0,r.jsx)(u.X,{checked:n.some(function(t){return c()(t,e)}),size:"small",readOnly:!0}),(0,r.jsx)(a.x,{flex:{direction:"row",alignItems:"center",grow:1,shrink:1},style:{overflow:"hidden"},children:(0,r.jsxs)("div",{style:{overflow:"hidden"},children:[e.groupName,d?(0,r.jsx)("span",{style:{opacity:.5,paddingLeft:4},children:(0,g.At)(e.repositoryName,e.repositoryLocationName)}):void 0]})})]})},JSON.stringify(e))},noResults:(0,r.jsx)(s.sN,{disabled:!0,text:"No asset groups"}),closeOnSelect:!1,resetOnQuery:!1,onItemSelect:function(e){var t=n.filter(function(t){return!c()(e,t)});t.length===n.length&&t.push(e),l(t)}})};function buildAssetGroupSelector(e){return e.definition&&e.definition.groupName?{groupName:e.definition.groupName,repositoryName:e.definition.repository.name,repositoryLocationName:e.definition.repository.location.name}:null}},18663:function(e,t,n){n.r(t),n.d(t,{AssetsGroupsGlobalGraphRoot:function(){return AssetsGroupsGlobalGraphRoot},default:function(){return O}});var r=n(85333),o=n(6692),i=n(58467),s=n(52322),a=n(28888),u=n(17131),l=n(81308),c=n(18149),p=n.n(c),d=n(2784),m=n(7267),f=n(42760),g=n(18399),h=n(71897),x=n(10397),y=n(77376),b=n(16292),v=n(51969),N=n(37160),j=d.memo(function(e){var t=e.assetGroups,n=e.visibleAssetGroups,r=e.setGroupFilters,o=d.useContext(v.C5),i=o.allRepos,a=o.visibleRepos,u=o.toggleVisible,l=d.useMemo(function(){return new Set(a)},[a]),c=(0,b.im)({name:"Code location",icon:"repo",allValues:i.map(function(e){return{key:e.repository.id,value:e,match:[(0,N.At)(e.repository.name,e.repositoryLocation.name)]}}),menuWidth:"300px",renderLabel:function(e){var t=e.value;return(0,s.jsxs)(g.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,s.jsx)(h.JO,{name:"repo"}),(0,s.jsx)(x.rd,{text:(0,N.At)(t.repository.name,t.repositoryLocation.name)})]})},getStringValue:function(e){return(0,N.At)(e.repository.name,e.repositoryLocation.name)},initialState:l,onStateChanged:function(e){i.forEach(function(t){l.has(t)!==e.has(t)&&u([(0,N.kQ)(t.repository.name,t.repositoryLocation.name)])})}}),p=(0,b.im)({name:"Asset Groups",icon:"asset_group",allValues:(t||[]).map(function(e){var t;return{key:e.groupName,value:null!==(t=null==n?void 0:n.find(function(t){return t.groupName===e.groupName&&t.repositoryName===e.repositoryName&&t.repositoryLocationName===e.repositoryLocationName}))&&void 0!==t?t:e,match:[e.groupName]}}),menuWidth:"300px",renderLabel:function(e){var t=e.value;return(0,s.jsxs)(g.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,s.jsx)(h.JO,{name:"repo"}),(0,s.jsx)(x.rd,{tooltipText:t.groupName+" - "+(0,N.At)(t.repositoryName,t.repositoryLocationName),text:(0,s.jsxs)(s.Fragment,{children:[t.groupName,(0,s.jsx)("span",{style:{opacity:.5,paddingLeft:"4px"},children:(0,N.At)(t.repositoryName,t.repositoryLocationName)})]})})]})},getStringValue:function(e){return e.groupName},initialState:d.useMemo(function(){return new Set(null!=n?n:[])},[n]),onStateChanged:function(e){r&&r(Array.from(e))}}),m=[];i.length>1&&m.push(c),t&&m.push(p);var f=(0,y.m)({filters:m}).button;return i.length<=1&&!t?null:f}),A=n(28252),G=n(71277),C=n(39852),L=n(18774),w=n(74711),S=n(72254),AssetsGroupsGlobalGraphRoot=function(){var e=(0,m.UO)()[0],t=d.useContext(v.C5).visibleRepos,n=(0,m.k6)(),c=(0,i._)((0,G.q)({encode:function(e){return{groups:JSON.stringify(e.groups)}},decode:function(e){return{groups:e.groups?JSON.parse(e.groups):[]}}}),2),g=c[0],h=c[1];(0,A.j)("Global Asset Lineage");var x=d.useCallback(function(e,t){n[t]({pathname:(0,S.Cd)(e),search:n.location.search})},[n]),y=d.useCallback(function(e){n.push((0,w.p)(e.assetKey,{view:"definition"}))},[n]),b=d.useMemo(function(){return{hideEdgesToNodesOutsideQuery:!1,hideNodesMatching:function(e){var n;if(!t.some(function(t){return t.repositoryLocation.name===e.repository.location.name&&t.repository.name===e.repository.name}))return!0;if(null===(n=g.groups)||void 0===n?void 0:n.length){var r=(0,L.$H)({definition:e});if(!g.groups.some(function(e){return p()(e,r)}))return!0}return!1}}},[g.groups,t]),N=d.useMemo(function(){return t.flatMap(function(e){return e.repository.assetGroups.map(function(t){return{groupName:t.groupName,repositoryLocationName:e.repositoryLocation.name,repositoryName:e.repository.name}})})},[t]);return(0,s.jsxs)(a.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,s.jsx)(u.m,{title:(0,s.jsx)(l.X6,{children:"Global Asset Lineage"}),right:(0,s.jsx)(C.i,{label:"Reload definitions"})}),(0,s.jsx)(f.OK,{fetchOptions:b,fetchOptionFilters:(0,s.jsx)(j,{assetGroups:N,visibleAssetGroups:d.useMemo(function(){return g.groups||[]},[g.groups]),setGroupFilters:d.useCallback(function(e){return h((0,o._)((0,r._)({},g),{groups:e}))},[g,h])}),options:{preferAssetRendering:!0,explodeComposites:!0},explorerPath:(0,S.Lu)(e),onChangeExplorerPath:x,onNavigateToSourceAssetNode:y})]})},O=AssetsGroupsGlobalGraphRoot},72254:function(e,t,n){n.d(t,{Cd:function(){return globalAssetGraphPathToString},Lu:function(){return globalAssetGraphPathFromString},TJ:function(){return globalAssetGraphPathForAssetsAndDescendants}});var r=n(85333),o=n(6692),i=n(35157),s=n(88286),a="__GLOBAL__";function globalAssetGraphPathToString(e){var t=(0,s.gY)((0,o._)((0,r._)({},e),{pipelineName:a})).replace(a,"");return"/asset-groups".concat(t)}function globalAssetGraphPathFromString(e){return(0,s.p3)(a+e||"/")}function globalAssetGraphPathForAssetsAndDescendants(e){var t=e.map(function(e){return"".concat((0,i.Je)(e),"*")}).join(", ");return globalAssetGraphPathToString({opNames:t.length>16e3?[]:[e.map(i.Je).join(",")],opsQuery:t})}},39852:function(e,t,n){n.d(t,{i:function(){return ReloadAllButton}});var r=n(58467),o=n(52322),i=n(43180),s=n(9001),a=n(71897),u=n(10952),l=n(2784),c=n(54949),p=n(56266),d=n(40092),m=n(70958),ReloadAllButton=function(e){var t=e.label,n=void 0===t?"Reload all":t,f=(0,c.WB)(),g=f.permissions.canReloadWorkspace,h=f.disabledReasons,x=(0,d.Dc)({scope:"workspace",reloadFn:d.rL}),y=x.reloading,b=x.tryReload,v=x.error,N=x.errorLocationId,j=(0,r._)(l.useState(!!v),2),A=j[0],G=j[1];return(l.useEffect(function(){return G(!!v)},[v]),g)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.zx,{onClick:b,icon:(0,o.jsx)(a.JO,{name:"refresh"}),loading:y,intent:"none",children:n}),N?(0,o.jsx)(m.V,{error:v,location:N,reloading:y,onTryReload:b,onDismiss:function(){return G(!1)},isOpen:A}):(0,o.jsxs)(u.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:A,children:[(0,o.jsx)(u.a7,{children:v&&(0,o.jsx)(p.T9,{error:v})}),(0,o.jsx)(u.cN,{children:(0,o.jsx)(s.zx,{onClick:function(){return G(!1)},children:"Dismiss"})})]})]}):(0,o.jsx)(i.u,{content:h.canReloadWorkspace,children:(0,o.jsx)(s.zx,{icon:(0,o.jsx)(a.JO,{name:"refresh"}),disabled:!0,intent:"none",children:n})})}}}]);
//# sourceMappingURL=663.39e74360e8f050ef.js.map